{"version":3,"sources":["../../../src/firebase/config.ts","../../../src/firebase/server.ts"],"sourcesContent":["export const firebaseConfig = {\r\n  \"projectId\": \"studio-2267792175-c3d0d\",\r\n  \"appId\": \"1:300603419642:web:45d0d0f2168c0180e41243\",\r\n  \"storageBucket\": \"studio-2267792175-c3d0d.firebasestorage.app\",\r\n  \"apiKey\": \"AIzaSyCO-2ySCn-hSI606tvGfXrF8Jhxxcv5glk\",\r\n  \"authDomain\": \"studio-2267792175-c3d0d.firebaseapp.com\",\r\n  \"measurementId\": \"\",\r\n  \"messagingSenderId\": \"300603419642\"\r\n};\r\n\r\n\r\n","\r\n// IMPORTANT: This file is only used on the server and should not be included in the client-side bundle.\r\n\r\nimport { initializeApp, getApps, getApp, cert, App } from 'firebase-admin/app';\r\nimport { getFirestore, Firestore } from 'firebase-admin/firestore';\r\nimport { getAuth, Auth } from 'firebase-admin/auth';\r\nimport { firebaseConfig } from './config';\r\n\r\nlet adminApp: App | undefined;\r\nlet firestoreInstance: Firestore | undefined;\r\nlet authInstance: Auth | undefined;\r\n\r\n// The service account key is retrieved from environment variables.\r\n// This is a secure way to handle credentials on the server.\r\ntry {\r\n  if (!getApps().length) {\r\n    const serviceAccount = process.env.FIREBASE_SERVICE_ACCOUNT\r\n      ? JSON.parse(process.env.FIREBASE_SERVICE_ACCOUNT)\r\n      : undefined;\r\n\r\n    if (serviceAccount) {\r\n      adminApp = initializeApp({\r\n        credential: cert(serviceAccount),\r\n        databaseURL: `https://${firebaseConfig.projectId}.firebaseio.com`,\r\n      });\r\n      firestoreInstance = getFirestore(adminApp);\r\n      authInstance = getAuth(adminApp);\r\n    } else {\r\n      console.warn(\"Firebase Admin SDK not initialized. FIREBASE_SERVICE_ACCOUNT env var is missing.\");\r\n    }\r\n  } else {\r\n    adminApp = getApp();\r\n    firestoreInstance = getFirestore(adminApp);\r\n    authInstance = getAuth(adminApp);\r\n  }\r\n} catch (error) {\r\n    console.error(\"Failed to parse FIREBASE_SERVICE_ACCOUNT or initialize Firebase Admin SDK.\", error);\r\n}\r\n\r\n// Export the instances directly. They will be undefined if initialization failed.\r\n// Code that uses these exports on the server MUST handle the undefined case.\r\nexport const firestore: Firestore | undefined = firestoreInstance;\r\nexport const auth: Auth | undefined = authInstance;\r\n\r\n\r\n"],"names":[],"mappings":"k+CAA8B,CAC5B,UAAa,0BACb,MAAS,4CACT,cAAiB,8CACjB,OAAU,0CACV,WAAc,0CACd,cAAiB,GACjB,kBAAqB,cACvB,uCCAI,EACA,EACA,EAPJ,IAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,gDAQA,GAAI,CACF,GAAK,CAAD,AAAC,EAAA,EAAA,OAAA,AAAO,IAAG,MAAM,CAgBnB,EAAW,CAAA,EAAA,EAAA,MAAA,AAAM,IACjB,EAAoB,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,GACjC,EAAe,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,OAlBF,CACrB,IAAM,EAAiB,QAAQ,GAAG,CAAC,wBAAwB,CACvD,KAAK,KAAK,CAAC,QAAQ,GAAG,CAAC,wBAAwB,OAC/C,EAEA,GACF,EAAW,CAAA,EAAA,EAAA,MADO,OACP,AAAa,EAAC,CACvB,WAAY,CAAA,EAAA,EAAA,IAAA,AAAI,EAAC,GACjB,YAAa,CAAC,QAAQ,EAAE,EAAA,cAAc,CAAC,SAAS,CAAC,eAAe,CAAC,AACnE,GACA,EAAoB,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,GACjC,EAAe,CAAA,EAAA,EAAA,OAAO,AAAP,EAAQ,IAEvB,QAAQ,IAAI,CAAC,mFAEjB,CAKF,CAAE,KALO,CAKA,EAAO,CACZ,QAAQ,KAAK,CAAC,6EAA8E,EAChG,CAIO,IAAM,EAAmC,EACnC,EAAyB"}