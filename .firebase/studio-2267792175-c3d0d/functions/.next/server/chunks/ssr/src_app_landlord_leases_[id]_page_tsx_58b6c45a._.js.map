{"version":3,"sources":["../../../../src/app/landlord/leases/%5Bid%5D/page.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { notFound, useParams } from 'next/navigation';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button, buttonVariants } from '@/components/ui/button';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\r\nimport { format } from \"date-fns\";\r\nimport { CheckCircle2, FileClock, Hourglass, Check, Signature, AlertTriangle, Printer, DollarSign, Building, Loader2 } from 'lucide-react';\r\nimport { cn, formatPrice } from \"@/utils\";\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { doc, updateDoc } from 'firebase/firestore';\r\nimport Link from 'next/link';\r\nimport { useUser, useFirestore, useDoc, useMemoFirebase } from '@/firebase';\r\nimport type { LeaseAgreement, UserProfile as User, Property } from '@/types';\r\nimport Loading from '@/app/loading';\r\n\r\n\r\nexport default function ViewLandlordLeasePage() {\r\n    const params = useParams();\r\n    const id = Array.isArray(params.id) ? params.id[0] : params.id;\r\n    const { user: currentUser, isUserLoading } = useUser();\r\n    const firestore = useFirestore();\r\n    const { toast } = useToast();\r\n\r\n    const leaseRef = useMemoFirebase(() => id ? doc(firestore, 'leaseAgreements', id) : null, [firestore, id]);\r\n    const { data: lease, isLoading: isLeaseLoading } = useDoc<LeaseAgreement>(leaseRef);\r\n\r\n    const landlordRef = useMemoFirebase(() => lease ? doc(firestore, 'users', lease.landlordId) : null, [firestore, lease]);\r\n    const { data: landlord, isLoading: isLandlordLoading } = useDoc<User>(landlordRef);\r\n\r\n    const tenantRef = useMemoFirebase(() => lease ? doc(firestore, 'users', lease.tenantId) : null, [firestore, lease]);\r\n    const { data: tenant, isLoading: isTenantLoading } = useDoc<User>(tenantRef);\r\n\r\n    const propertyRef = useMemoFirebase(() => lease ? doc(firestore, 'properties', lease.propertyId) : null, [firestore, lease]);\r\n    const { data: property, isLoading: isPropertyLoading } = useDoc<Property>(propertyRef);\r\n\r\n    const [isSigning, setIsSigning] = useState(false);\r\n    const [showSuccessDialog, setShowSuccessDialog] = useState(false);\r\n\r\n    // Unified loading state\r\n    const isLoading = isUserLoading || isLeaseLoading;\r\n    const isSupportingDataLoading = isLandlordLoading || isTenantLoading || isPropertyLoading;\r\n\r\n    const handleSignLease = async () => {\r\n        if (!leaseRef || !lease) return;\r\n\r\n        setIsSigning(true);\r\n        try {\r\n            const signedName = landlord?.legalName || landlord?.name || \"Landlord\";\r\n            const signatureLine = `\\n\\nDigitally Signed by Landlord: ${signedName} on ${new Date().toLocaleString()}`;\r\n            const updatedLeaseText = lease.leaseText + signatureLine;\r\n\r\n            await updateDoc(leaseRef, {\r\n                landlordSigned: true,\r\n                leaseText: updatedLeaseText\r\n            });\r\n\r\n            // Show success logic\r\n            setIsSigning(false);\r\n            setShowSuccessDialog(true);\r\n\r\n            // Note: We don't rely only on toast anymore as per UX feedback\r\n            toast({\r\n                title: \"Lease Signed Successfully!\",\r\n                description: \"Your signature has been recorded.\"\r\n            });\r\n        } catch (error: unknown) {\r\n            console.error(\"Error signing lease:\", error);\r\n            setIsSigning(false);\r\n            toast({\r\n                variant: \"destructive\",\r\n                title: \"Error\",\r\n                description: \"Could not sign the lease. Please try again.\"\r\n            })\r\n        }\r\n    };\r\n\r\n    console.log('Lease Detail Debug:', {\r\n        id,\r\n        isUserLoading,\r\n        isLeaseLoading,\r\n        currentUserUid: currentUser?.uid,\r\n        leaseExists: !!lease,\r\n        leaseLandlordId: lease?.landlordId,\r\n        match: currentUser && lease ? currentUser.uid === lease.landlordId : 'N/A'\r\n    });\r\n\r\n    if (isLoading) {\r\n        return <Loading />;\r\n    }\r\n\r\n    // After main lease and user are loaded, check if they exist or if match fails\r\n    if (!lease || !currentUser || currentUser.uid !== lease.landlordId) {\r\n        console.warn(\"Landlord Lease not found or access denied\", {\r\n            leaseId: id,\r\n            leaseExists: !!lease,\r\n            currentUserId: currentUser?.uid,\r\n            leaseLandlordId: lease?.landlordId\r\n        });\r\n\r\n        return (\r\n            <div className=\"container mx-auto max-w-2xl py-20 px-4 text-center\">\r\n                <div className=\"rounded-lg border border-destructive/50 bg-destructive/10 p-8\">\r\n                    <h1 className=\"text-2xl font-bold text-destructive mb-4\">Unable to Load Lease</h1>\r\n                    <p className=\"mb-6 text-muted-foreground\">\r\n                        We couldn't display this lease agreement. Here is the diagnostic info to help us fix it:\r\n                    </p>\r\n                    <div className=\"text-left bg-black/80 text-green-400 p-4 rounded-md font-mono text-xs overflow-auto mb-6\">\r\n                        <p>Lease ID in URL: {id}</p>\r\n                        <p>Lease Document Found: {lease ? \"YES\" : \"NO\"}</p>\r\n                        <p>User Logged In: {currentUser ? \"YES\" : \"NO\"}</p>\r\n                        {currentUser && lease && (\r\n                            <>\r\n                                <p>Your User ID: {currentUser.uid}</p>\r\n                                <p>Lease Landlord ID: {lease.landlordId || \"MISSING\"}</p>\r\n                                <p>Match: {currentUser.uid === lease.landlordId ? \"YES\" : \"FAIL\"}</p>\r\n                            </>\r\n                        )}\r\n                        {lease && !lease.landlordId && <p className=\"mt-2 text-red-500 font-bold\">CRITICAL: This lease agreement document has no landlordId field!</p>}\r\n                        {!lease && <p className=\"mt-2 text-amber-400\">Note: If Found is NO, the ID might be wrong or the document was deleted. Database collection checked: 'leaseAgreements'</p>}\r\n                        {lease && currentUser && lease.landlordId && currentUser.uid !== lease.landlordId && (\r\n                            <p className=\"mt-2 text-amber-400\">Note: Match is FAIL, which means you are logged in but don't own this lease.</p>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex justify-center gap-4\">\r\n                        <Button asChild variant=\"outline\" className=\"rounded-xl\">\r\n                            <Link href=\"/landlord/leases\">Return to Leases</Link>\r\n                        </Button>\r\n                        <Button variant=\"default\" className=\"rounded-xl\" onClick={() => window.location.reload()}>\r\n                            Retry / Force Refresh\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Wait for supporting data if we have the main lease\r\n    if (isSupportingDataLoading) {\r\n        return <Loading />;\r\n    }\r\n\r\n    const getStatusVariant = (status: 'active' | 'expired' | 'pending' | 'terminating') => {\r\n        switch (status) {\r\n            case 'active': return 'secondary';\r\n            case 'expired': return 'outline';\r\n            case 'pending': return 'default';\r\n            case 'terminating': return 'destructive';\r\n        }\r\n    };\r\n    const getStatusIcon = (status: 'active' | 'expired' | 'pending' | 'terminating') => {\r\n        switch (status) {\r\n            case 'active': return <CheckCircle2 className=\"h-5 w-5 text-green-600\" />;\r\n            case 'expired': return <FileClock className=\"h-5 w-5 text-muted-foreground\" />;\r\n            case 'pending': return <Hourglass className=\"h-5 w-5 text-primary\" />;\r\n            case 'terminating': return <AlertTriangle className=\"h-5 w-5 text-destructive\" />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-5xl mx-auto space-y-12 pb-32 animate-in fade-in duration-700\">\r\n            <style jsx global>{`\r\n                @media print {\r\n                    @page { margin: 2cm; }\r\n                    body * {\r\n                        visibility: hidden;\r\n                    }\r\n                    #lease-document, #lease-document * {\r\n                        visibility: visible;\r\n                    }\r\n                    #lease-document {\r\n                        position: absolute;\r\n                        left: 0;\r\n                        top: 0;\r\n                        width: 100%;\r\n                    }\r\n                }\r\n            `}</style>\r\n\r\n            {/* Premium Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-8 pb-8 border-b-4 border-foreground/5\">\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className={cn(\r\n                            \"p-2 rounded-xl bg-white shadow-lg border-2\",\r\n                            lease.status === 'active' ? \"border-green-500/20\" :\r\n                                lease.status === 'pending' ? \"border-primary/20\" : \"border-muted/20\"\r\n                        )}>\r\n                            {getStatusIcon(lease.status)}\r\n                        </div>\r\n                        <Badge variant={getStatusVariant(lease.status)} className=\"px-4 py-1 rounded-full text-[10px] font-black uppercase tracking-widest\">\r\n                            {lease.status}\r\n                        </Badge>\r\n                    </div>\r\n                    <h1 className=\"font-headline text-4xl md:text-5xl font-black tracking-tight text-foreground uppercase\">\r\n                        LEASE AGREEMENT\r\n                    </h1>\r\n                    <p className=\"text-lg text-muted-foreground font-medium\">\r\n                        Digital Contract for <Link href={`/landlord/properties/${property?.id}`} className=\"text-primary hover:underline\">#{property?.title}</Link>\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-3\">\r\n                    <Button variant=\"outline\" className=\"h-14 rounded-2xl px-6 font-black text-xs uppercase tracking-widest gap-2 bg-white hover:bg-muted/50 transition-all border-2\" onClick={() => window.print()}>\r\n                        <Printer className=\"h-4 w-4\" /> PRINT\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-10\">\r\n                {/* Main Content: The Document */}\r\n                <div className=\"lg:col-span-2 space-y-10\">\r\n                    <div className=\"relative group\">\r\n                        {/* Decorative Background for \"Paper\" effect */}\r\n                        <div className=\"absolute inset-0 bg-muted/20 -rotate-1 rounded-[3rem] -z-10 transition-transform group-hover:rotate-0\" />\r\n                        <div className=\"absolute inset-0 bg-primary/5 rotate-1 rounded-[3rem] -z-10 transition-transform group-hover:rotate-0\" />\r\n\r\n                        <div className=\"relative bg-white border-2 border-foreground/5 shadow-2xl rounded-[3rem] p-8 md:p-12 min-h-[600px] flex flex-col\">\r\n                            <div className=\"flex justify-between items-start mb-12\">\r\n                                <div className=\"space-y-1\">\r\n                                    <p className=\"text-[10px] font-black text-muted-foreground/40 uppercase tracking-[0.2em]\">DOCUMENT ID</p>\r\n                                    <p className=\"font-mono text-[10px] opacity-60\">#{lease.id.toUpperCase()}</p>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className=\"text-[10px] font-black text-muted-foreground/40 uppercase tracking-[0.2em]\">ISSUE DATE</p>\r\n                                    <p className=\"font-bold text-sm\">{format(new Date(lease.startDate), 'MMMM dd, yyyy')}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <Separator className=\"mb-10 opacity-10\" />\r\n\r\n                            <h2 className=\"text-xl font-black uppercase tracking-widest mb-8 text-center decoration-primary/20 underline underline-offset-8 decoration-4\">\r\n                                CONTRACTUAL TERMS & CONDITIONS\r\n                            </h2>\r\n\r\n                            <div id=\"lease-document\" className=\"prose prose-sm md:prose-base max-w-none whitespace-pre-wrap leading-relaxed text-foreground/80 flex-grow\">\r\n                                {lease.leaseText}\r\n                            </div>\r\n\r\n                            <Separator className=\"my-12 opacity-10\" />\r\n\r\n                            {/* Formal Signature Section */}\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-12 mt-auto pt-8 border-t-2 border-dotted border-muted/30\">\r\n                                <div className=\"space-y-4\">\r\n                                    <p className=\"text-[10px] font-black text-muted-foreground/60 uppercase tracking-widest\">LANDLORD SIGNATURE</p>\r\n                                    <div className=\"h-24 bg-muted/10 rounded-3xl border-2 border-dashed border-muted/30 flex items-center justify-center relative overflow-hidden\">\r\n                                        {lease.landlordSigned ? (\r\n                                            <div className=\"text-center animate-in zoom-in duration-500\">\r\n                                                <p className=\"text-2xl text-primary font-bold opacity-80 -rotate-3\">{landlord?.name}</p>\r\n                                                <Badge variant=\"secondary\" className=\"mt-2 text-[9px] font-black uppercase tracking-tighter bg-green-500/10 text-green-600 border-none\">VERIFIED SIGNATURE</Badge>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"flex flex-col items-center gap-1 opacity-20\">\r\n                                                <Hourglass className=\"h-6 w-6\" />\r\n                                                <p className=\"text-[8px] font-black uppercase tracking-widest\">AWAITING EXECUTION</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    <p className=\"text-center text-xs font-bold text-muted-foreground/40\">Executed by: {landlord?.name || 'Authorized Representative'}</p>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-4\">\r\n                                    <p className=\"text-[10px] font-black text-muted-foreground/60 uppercase tracking-widest\">TENANT SIGNATURE</p>\r\n                                    <div className=\"h-24 bg-muted/10 rounded-3xl border-2 border-dashed border-muted/30 flex items-center justify-center relative overflow-hidden\">\r\n                                        {lease.tenantSigned ? (\r\n                                            <div className=\"text-center animate-in zoom-in duration-500\">\r\n                                                <p className=\"text-2xl text-primary font-bold opacity-80 -rotate-3\">{tenant?.name}</p>\r\n                                                <Badge variant=\"secondary\" className=\"mt-2 text-[9px] font-black uppercase tracking-tighter bg-green-500/10 text-green-600 border-none\">VERIFIED SIGNATURE</Badge>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"flex flex-col items-center gap-1 opacity-20\">\r\n                                                <Hourglass className=\"h-6 w-6\" />\r\n                                                <p className=\"text-[8px] font-black uppercase tracking-widest\">PENDING APPROVAL</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    <p className=\"text-center text-xs font-bold text-muted-foreground/40\">Executed by: {tenant?.name || 'Prospective Tenant'}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Sidebar: Metadata & Actions */}\r\n                <div className=\"space-y-10\">\r\n                    {/* Metadata Card */}\r\n                    <Card className=\"rounded-[2.5rem] border-2 border-foreground/5 shadow-xl bg-white overflow-hidden\">\r\n                        <CardHeader className=\"bg-primary/5 border-b-2 border-primary/10\">\r\n                            <CardTitle className=\"text-xs font-black uppercase tracking-widest flex items-center gap-2\">\r\n                                <CheckCircle2 className=\"h-4 w-4\" /> CONTRACT METRICS\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"p-8 space-y-8\">\r\n                            <div className=\"space-y-6\">\r\n                                <div className=\"flex justify-between items-center group\">\r\n                                    <div>\r\n                                        <p className=\"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1\">RENTAL ASSET</p>\r\n                                        <p className=\"font-black text-sm uppercase group-hover:text-primary transition-colors truncate max-w-[150px]\">{property?.title}</p>\r\n                                    </div>\r\n                                    <div className=\"h-10 w-10 rounded-xl bg-muted/20 flex items-center justify-center\">\r\n                                        <Building className=\"h-5 w-5 opacity-20\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center group\">\r\n                                    <div>\r\n                                        <p className=\"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1\">TERM DURATION</p>\r\n                                        <p className=\"font-black text-sm uppercase truncate max-w-[150px]\">\r\n                                            {format(new Date(lease.startDate), 'MMM yy')} - {format(new Date(lease.endDate), 'MMM yy')}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"h-10 w-10 rounded-xl bg-muted/20 flex items-center justify-center\">\r\n                                        <FileClock className=\"h-5 w-5 opacity-20\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center group\">\r\n                                    <div>\r\n                                        <p className=\"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1\">MONTHLY RATE</p>\r\n                                        <p className=\"font-black text-2xl text-primary\">{formatPrice(property?.price || 0, property?.currency)}</p>\r\n                                    </div>\r\n                                    <div className=\"h-10 w-10 rounded-xl bg-green-500/10 flex items-center justify-center\">\r\n                                        <DollarSign className=\"h-5 w-5 text-green-600\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Action Card: Sign */}\r\n                    {lease.status === 'pending' && !lease.landlordSigned && (\r\n                        <div className=\"relative group overflow-hidden rounded-[2.5rem] bg-foreground text-white p-8 md:p-10 shadow-2xl space-y-8 animate-in slide-in-from-right duration-700\">\r\n                            <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-bl-[5rem] -mr-8 -mt-8 transition-all group-hover:scale-110\" />\r\n                            <div className=\"relative z-10 space-y-4 text-center\">\r\n                                <h3 className=\"text-2xl font-black uppercase tracking-tight\">EXECUTE AGREEMENT</h3>\r\n                                <p className=\"text-white/60 font-serif text-sm leading-relaxed\">\r\n                                    &quot;Your signature confirm that terms reflect the latest property updates.&quot;\r\n                                </p>\r\n                                <Button\r\n                                    className=\"w-full h-16 rounded-2xl bg-white text-foreground hover:bg-white/90 font-black text-sm uppercase tracking-widest gap-3 shadow-2xl transition-all hover:scale-105 active:scale-95 disabled:scale-100 disabled:opacity-70\"\r\n                                    onClick={handleSignLease}\r\n                                    disabled={isSigning}\r\n                                >\r\n                                    {isSigning ? (\r\n                                        <>\r\n                                            <Loader2 className=\"h-5 w-5 animate-spin\" /> SIGNING...\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <Signature className=\"h-5 w-5\" /> SIGN DIGITALLY\r\n                                        </>\r\n                                    )}\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {lease.status === 'pending' && lease.landlordSigned && (\r\n                        <div className=\"relative group overflow-hidden rounded-[2.5rem] bg-blue-600 text-white p-8 md:p-10 shadow-2xl space-y-8 animate-in slide-in-from-right duration-700 text-center\">\r\n                            <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-bl-[5rem] -mr-8 -mt-8 transition-all group-hover:scale-110\" />\r\n                            <div className=\"relative z-10 space-y-4\">\r\n                                <h3 className=\"text-xl font-black uppercase tracking-tight\">AWAITING TENANT</h3>\r\n                                <p className=\"text-white/60 font-serif text-sm leading-relaxed\">\r\n                                    This lease has been sent to {tenant?.name} for their signature.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <Link\r\n                        href=\"/landlord/leases\"\r\n                        className={cn(\r\n                            buttonVariants({ variant: \"ghost\" }),\r\n                            \"font-black text-[10px] uppercase tracking-[0.3em] hover:tracking-[0.4em] transition-all opacity-40 hover:opacity-100\"\r\n                        )}\r\n                    >\r\n                        ‚Üê BACK TO ALL LEASES\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            <Dialog open={showSuccessDialog} onOpenChange={setShowSuccessDialog}>\r\n                <DialogContent className=\"sm:max-w-md\">\r\n                    <DialogHeader>\r\n                        <DialogTitle className=\"flex items-center gap-2 text-green-600\">\r\n                            <CheckCircle2 className=\"h-6 w-6\" />\r\n                            Lease Signed Successfully\r\n                        </DialogTitle>\r\n                        <DialogDescription>\r\n                            Your digital signature has been recorded. The lease is now pending tenant signature.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"flex justify-center py-6\">\r\n                        <Signature className=\"h-16 w-16 text-primary/20\" />\r\n                    </div>\r\n                    <DialogFooter className=\"sm:justify-between gap-2\">\r\n                        <Button\r\n                            className=\"w-full\"\r\n                            onClick={() => setShowSuccessDialog(false)}\r\n                        >\r\n                            Okay, Got it\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div >\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}