module.exports=[84219,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(23690),e=a.i(59637),f=a.i(86304),g=a.i(99570),h=a.i(91119),i=a.i(72233),j=a.i(75083),k=a.i(21374),l=a.i(74875),m=a.i(16286),n=a.i(3544),o=a.i(24987),p=a.i(16201),q=a.i(85264),r=a.i(61111),s=a.i(59565),t=a.i(29355),u=a.i(36656),v=a.i(63588),w=a.i(53569),x=a.i(92258),y=a.i(63910),z=a.i(69769),A=a.i(13749),B=a.i(76472),C=a.i(66351),D=a.i(72131),E=a.i(14574),F=a.i(38246),G={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},H=D.default.createContext&&D.default.createContext(G),I=["attr","size","title"];function J(){return(J=Object.assign.bind()).apply(this,arguments)}function K(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function L(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?K(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):K(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function M(a){var b=b=>{var c,{attr:d,size:e,title:f}=a,g=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,I),h=e||b.size||"1em";return b.className&&(c=b.className),a.className&&(c=(c?c+" ":"")+a.className),D.default.createElement("svg",J({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},b.attr,d,g,{className:c,style:L(L({color:a.color||b.color},b.style),a.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),f&&D.default.createElement("title",null,f),a.children)};return void 0!==H?D.default.createElement(H.Consumer,null,a=>b(a)):b(G)}function N(a){var b;return(b={tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]},a=>D.default.createElement(M,J({attr:L({},b.attr)},a),function a(b){return b&&b.map((b,c)=>D.default.createElement(b.tag,L({key:c},b.attr),a(b.child)))}(b.child)))(a)}var O=a.i(54614),P=a.i(70430),Q=a.i(29246);a.i(79597);var R=a.i(36505),S=a.i(28137),T=a.i(73810);a.i(69387);var U=a.i(60574),V=a.i(48711),W=a.i(19569),X=a.i(47560),Y=a.i(86764);let Z={Furnished:(0,b.jsx)(u.Tv,{className:"h-5 w-5 text-primary"}),"Wi-Fi":(0,b.jsx)(q.Wifi,{className:"h-5 w-5 text-primary"}),"In-unit Laundry":(0,b.jsx)(t.Wind,{className:"h-5 w-5 text-primary"}),"Pet Friendly":(0,b.jsx)(s.Dog,{className:"h-5 w-5 text-primary"}),"Parking Spot":(0,b.jsx)(r.ParkingCircle,{className:"h-5 w-5 text-primary"})};function $({initialProperty:a,propertyId:q}){(0,c.useParams)();let r=(0,R.useFirestore)(),s=(0,c.usePathname)(),{toast:t}=(0,O.useToast)(),{user:u,isUserLoading:G}=(0,R.useUser)(),H=(0,c.useRouter)(),[I,J]=(0,D.useState)(""),[K,L]=(0,D.useState)(!1),[M,$]=(0,D.useState)(!1);(0,D.useEffect)(()=>{L(!0)},[]);let aa=(0,R.useMemoFirebase)(()=>q?(0,U.doc)(r,"properties",q):null,[r,q]),{data:ab,isLoading:ac}=(0,S.useDoc)(aa),ad=ab||a,ae=(0,R.useMemoFirebase)(()=>ad?(0,U.doc)(r,"users",ad.landlordId):null,[r,ad]),{data:af,isLoading:ag}=(0,S.useDoc)(ae),ah=(0,R.useMemoFirebase)(()=>q?(0,U.query)((0,U.collection)(r,"propertyReviews"),(0,U.where)("propertyId","==",q)):null,[r,q]),{data:ai,isLoading:aj}=(0,T.useCollection)(ah),ak=(0,R.useMemoFirebase)(()=>u?(0,U.doc)(r,"users",u.uid):null,[r,u]),{data:al,isLoading:am}=(0,S.useDoc)(ak),an=D.default.useMemo(()=>al?.currency?al.currency:al?.country?(0,e.getCurrencyByCountry)(al.country):"USD",[al]),ao=(0,R.useMemoFirebase)(()=>(0,U.query)((0,U.collection)(r,"properties"),(0,U.where)("status","==","available")),[r]),{data:ap}=(0,T.useCollection)(ao),aq=D.default.useMemo(()=>ad&&ap?ap.filter(a=>a.id!==ad.id&&(a.type===ad.type||a.location.city===ad.location.city)).slice(0,3):[],[ad,ap]),ar=D.default.useMemo(()=>!!al&&!!ad&&(al.bookmarkedPropertyIds||[]).includes(ad.id),[al?.bookmarkedPropertyIds,ad?.id]);if(!ad&&!(ag||aj||G||am))return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center text-center py-20",children:[(0,b.jsx)("div",{className:"rounded-full bg-secondary p-4",children:(0,b.jsx)(y.Building,{className:"h-10 w-10 text-muted-foreground"})}),(0,b.jsx)("h1",{className:"mt-6 text-2xl font-bold",children:"Property Not Found"}),(0,b.jsx)("p",{className:"mt-2 text-muted-foreground",children:"The property you are looking for does not exist or is no longer available."}),(0,b.jsx)(g.Button,{asChild:!0,className:"mt-6",children:(0,b.jsx)(F.default,{href:"/student/properties",children:"Browse Other Properties"})})]});let as=ai&&ai.length>0?ai.reduce((a,b)=>a+b.rating,0)/ai.length:0,at=K?`${window.location.origin}${s}`:"",au=async()=>{if(!u||!af||!ad){t({variant:"destructive",title:"Login or Data Missing",description:"You must be logged in and property data must be loaded to send a request."}),u||H.push("/auth/login");return}let a=(0,U.collection)(r,"rentalApplications"),b={propertyId:ad.id,tenantId:u.uid,landlordId:ad.landlordId,messageToLandlord:I,applicationDate:new Date().toISOString(),status:"pending"};try{let c=await (0,U.addDoc)(a,b);await (0,U.updateDoc)(c,{id:c.id});let d=(0,U.collection)(r,"messages");await (0,U.addDoc)(d,{text:I||`Hi, I'm interested in renting ${ad.title}.`,senderId:u.uid,recipientId:af.id,participantIds:[u.uid,af.id].sort(),timestamp:(0,U.serverTimestamp)(),read:!1}),await (0,V.sendNotification)({toUserId:af.id,type:"NEW_REQUEST",firestore:r,senderName:al?.name||"A student",propertyName:ad.title,link:"/landlord/requests"}),t({title:"Request Sent!",description:"Your rental request has been sent to the landlord."}),H.push(`/student/messages?conversationId=${af.id}`)}catch(a){console.error("Error sending rental request:",a),t({variant:"destructive",title:"Uh oh! Something went wrong.",description:"Could not send your rental request. Please try again later."})}},av=async a=>{if(a.preventDefault(),!u||!ak||!ad)return void t({variant:"destructive",title:"Login Required",description:"Please log in to bookmark properties"});try{ar?(await (0,U.updateDoc)(ak,{bookmarkedPropertyIds:(0,U.arrayRemove)(ad.id)}),t({title:"Removed from bookmarks"})):(await (0,U.updateDoc)(ak,{bookmarkedPropertyIds:(0,U.arrayUnion)(ad.id)}),t({title:"Added to bookmarks"}))}catch(a){console.error("Error toggling bookmark:",a)}},aw={"@context":"https://schema.org","@type":"RealEstateListing",name:ad.title,description:ad.description,image:ad.images,url:at,address:{"@type":"PostalAddress",streetAddress:ad.location.address,addressLocality:ad.location.city,addressRegion:ad.location.state},offers:{"@type":"Offer",price:ad.price,priceCurrency:ad.currency||"USD"}};return(0,b.jsxs)("div",{className:"min-h-screen pb-20",children:[(0,b.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(aw)}}),(0,b.jsx)("div",{className:"container mx-auto max-w-7xl px-4 lg:px-8 mt-0",children:(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:()=>H.back(),className:"gap-2 hover:gap-3 transition-all",children:[(0,b.jsx)(A.ChevronLeft,{className:"h-4 w-4"})," Back to Properties"]})}),(0,b.jsx)("div",{className:"container mx-auto max-w-7xl px-4 lg:px-8 mt-4",children:(0,b.jsx)(X.PropertyHeroCarousel,{images:ad.images,title:ad.title})}),(0,b.jsxs)("div",{className:"container mx-auto max-w-7xl px-4 lg:px-8 mt-12",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-12",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(f.Badge,{variant:"secondary",className:"bg-primary/10 text-primary border-none px-4 py-1 text-xs font-bold uppercase tracking-widest",children:ad.type}),"occupied"===ad.status&&(0,b.jsx)(f.Badge,{variant:"destructive",className:"px-4 py-1 text-xs font-bold uppercase tracking-widest",children:"Occupied"})]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-6",children:[(0,b.jsx)("h1",{className:"font-headline text-4xl md:text-6xl font-bold tracking-tight text-foreground leading-[1.1] flex-1 uppercase",children:ad.title}),(0,b.jsxs)("div",{className:"flex items-center gap-3 shrink-0 md:mt-2",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"icon",className:(0,d.cn)("h-14 w-14 rounded-2xl border-2 transition-all hover:scale-105",ar?"bg-red-50 border-red-100 text-red-500 hover:bg-red-100":"bg-white hover:border-primary/20"),onClick:av,children:(0,b.jsx)(B.Heart,{className:(0,d.cn)("h-6 w-6",ar&&"fill-current")})}),(0,b.jsx)(g.Button,{variant:"outline",size:"icon",className:"h-14 w-14 rounded-2xl border-2 bg-white hover:border-primary/20 transition-all hover:scale-105",onClick:()=>$(!0),children:(0,b.jsx)(w.Share2,{className:"h-6 w-6"})})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-3 text-muted-foreground font-medium",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.MapPin,{className:"h-5 w-5 text-primary"}),(0,b.jsxs)("span",{children:[ad.location.address,", ",ad.location.city]})]}),ad.location.school&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(z.GraduationCap,{className:"h-5 w-5 text-primary"}),(0,b.jsxs)("span",{children:["Near ",ad.location.school]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Star,{className:"h-5 w-5 text-yellow-500 fill-current"}),(0,b.jsx)("span",{className:"text-foreground",children:as.toFixed(1)}),(0,b.jsxs)("span",{className:"text-sm font-normal",children:["(",ai?.length||0," reviews)"]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-muted/30 p-6 rounded-3xl border border-border/50 flex flex-col items-center text-center group hover:bg-primary/5 hover:border-primary/20 transition-all",children:[(0,b.jsx)(l.BedDouble,{className:"h-8 w-8 text-primary mb-3 transition-transform group-hover:scale-110"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:ad.bedrooms}),(0,b.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Bedrooms"})]}),(0,b.jsxs)("div",{className:"bg-muted/30 p-6 rounded-3xl border border-border/50 flex flex-col items-center text-center group hover:bg-primary/5 hover:border-primary/20 transition-all",children:[(0,b.jsx)(m.Bath,{className:"h-8 w-8 text-primary mb-3 transition-transform group-hover:scale-110"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:ad.bathrooms}),(0,b.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Bathrooms"})]}),(0,b.jsxs)("div",{className:"bg-muted/30 p-6 rounded-3xl border border-border/50 flex flex-col items-center text-center group hover:bg-primary/5 hover:border-primary/20 transition-all",children:[(0,b.jsx)(n.Ruler,{className:"h-8 w-8 text-primary mb-3 transition-transform group-hover:scale-110"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:ad.area}),(0,b.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Square Feet"})]}),(0,b.jsxs)("div",{className:"bg-muted/30 p-6 rounded-3xl border border-border/50 flex flex-col items-center text-center group hover:bg-primary/5 hover:border-primary/20 transition-all",children:[(0,b.jsx)(y.Building,{className:"h-8 w-8 text-primary mb-3 transition-transform group-hover:scale-110"}),(0,b.jsx)("p",{className:"text-xl font-bold whitespace-nowrap",children:ad.type}),(0,b.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Property Type"})]})]}),(0,b.jsxs)(j.Tabs,{defaultValue:"gallery",className:"w-full",children:[(0,b.jsxs)(j.TabsList,{className:"w-full justify-start bg-transparent border-b rounded-none px-0 h-auto gap-8 mb-8",children:[(0,b.jsx)(j.TabsTrigger,{value:"gallery",className:"text-base font-bold rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 pb-4",children:"Gallery"}),(0,b.jsx)(j.TabsTrigger,{value:"overview",className:"text-base font-bold rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 pb-4",children:"Overview"}),(0,b.jsx)(j.TabsTrigger,{value:"amenities",className:"text-base font-bold rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 pb-4",children:"Amenities"}),(0,b.jsx)(j.TabsTrigger,{value:"rules",className:"text-base font-bold rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 pb-4",children:"House Rules"}),(0,b.jsx)(j.TabsTrigger,{value:"reviews",className:"text-base font-bold rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 pb-4",children:"Reviews"})]}),(0,b.jsx)(j.TabsContent,{value:"gallery",className:"mt-0 space-y-6",children:(0,b.jsx)(W.PropertyGallery,{images:ad.images,videos:ad.videos,title:ad.title})}),(0,b.jsxs)(j.TabsContent,{value:"overview",className:"mt-0 space-y-6",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:"About this property"}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground leading-relaxed",children:ad.description})]}),(0,b.jsx)(j.TabsContent,{value:"amenities",className:"mt-0",children:(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:ad.amenities.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-2xl border bg-card/50 backdrop-blur-sm group hover:border-primary/30 transition-all",children:[(0,b.jsx)("div",{className:"bg-primary/10 p-2 rounded-xl text-primary group-hover:bg-primary group-hover:text-white transition-all",children:Z[a]||(0,b.jsx)(p.CheckCircle,{className:"h-5 w-5"})}),(0,b.jsx)("span",{className:"font-bold text-sm tracking-tight",children:a})]},a))})}),(0,b.jsx)(j.TabsContent,{value:"rules",className:"mt-0",children:(0,b.jsx)("div",{className:"bg-muted/20 p-8 rounded-[2rem] border-2 border-dashed border-border",children:(0,b.jsx)("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ad.rules.map(a=>(0,b.jsxs)("li",{className:"flex items-start gap-3 text-muted-foreground font-medium",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary mt-2 flex-shrink-0"}),a]},a))})})}),(0,b.jsxs)(j.TabsContent,{value:"reviews",className:"mt-0 space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:"Student reviews"}),(0,b.jsx)(_,{propertyId:ad.id,userId:u?.uid,firestore:r,userProfile:al})]}),ai&&ai.length>0?(0,b.jsx)("div",{className:"space-y-6",children:ai.map(a=>(0,b.jsxs)("div",{className:"p-6 rounded-3xl border bg-card/50 backdrop-blur-sm space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(i.Avatar,{className:"h-12 w-12 border-2 border-background shadow-lg",children:[(0,b.jsx)(i.AvatarImage,{src:a.tenantImageUrl,className:"object-cover"}),(0,b.jsx)(i.AvatarFallback,{className:"bg-primary/10 text-primary font-bold",children:a.tenantName?.[0]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-lg leading-none",children:a.tenantName}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)("div",{className:"flex italic",children:[void 0,void 0,void 0,void 0,void 0].map((c,e)=>(0,b.jsx)(k.Star,{className:(0,d.cn)("h-3 w-3",e<a.rating?"text-yellow-500 fill-current":"text-muted/30")},e))}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground font-bold",children:new Date(a.reviewDate).toLocaleDateString(void 0,{month:"long",year:"numeric"})})]})]})]}),(0,b.jsx)("p",{className:"text-muted-foreground leading-relaxed font-medium",children:a.comment})]},a.id))}):(0,b.jsxs)("div",{className:"text-center py-12 bg-muted/20 rounded-3xl border border-dashed flex flex-col items-center gap-3",children:[(0,b.jsx)(k.Star,{className:"h-8 w-8 text-muted/30"}),(0,b.jsx)("p",{className:"text-muted-foreground font-bold",children:"No reviews yet for this property."})]})]})]})]}),(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"sticky top-12 space-y-6",children:[(0,b.jsxs)(h.Card,{className:"border-none bg-background shadow-[0_0_50px_-12px_rgba(0,0,0,0.12)] rounded-[2.5rem] overflow-hidden",children:[(0,b.jsxs)(h.CardHeader,{className:"bg-[#0A0A0A] text-white p-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)(f.Badge,{variant:"secondary",className:"bg-white/10 text-white border-white/20 px-3 py-0.5 text-[10px] font-bold uppercase tracking-widest",children:"Pricing"}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-white/60",children:[(0,b.jsx)(k.Star,{className:"h-4 w-4 text-yellow-500 fill-current"}),(0,b.jsx)("span",{className:"text-sm font-bold text-white",children:as.toFixed(1)})]})]}),(0,b.jsxs)("p",{className:"text-3xl md:text-4xl font-bold tracking-tight truncate",children:[an&&an!==ad.currency?(0,d.formatPrice)((0,e.convertCurrency)(ad.price,ad.currency,an),an):(0,d.formatPrice)(ad.price,ad.currency),(0,b.jsx)("span",{className:"text-base md:text-lg font-normal text-white/40 ml-1",children:"/mo"})]})]}),(0,b.jsxs)(h.CardContent,{className:"p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(E.Dialog,{children:[(0,b.jsx)(E.DialogTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{className:"w-full h-14 rounded-2xl text-lg font-bold shadow-xl shadow-primary/20",disabled:"occupied"===ad.status,children:"Request to Rent"})}),(0,b.jsxs)(E.DialogContent,{className:"sm:max-w-lg rounded-3xl",children:[(0,b.jsxs)(E.DialogHeader,{children:[(0,b.jsxs)(E.DialogTitle,{className:"text-2xl font-bold uppercase",children:["Application for ",ad.title]}),(0,b.jsxs)(E.DialogDescription,{className:"text-base font-medium",children:["Start a conversation with ",af?.name,". Your request will include a text message."]})]}),(0,b.jsx)("div",{className:"py-6 space-y-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(P.Label,{htmlFor:"message",children:"Your Message"}),(0,b.jsx)(Q.Textarea,{id:"message",placeholder:"Describe yourself...",className:"min-h-[150px] active:ring-primary",value:I,onChange:a=>J(a.target.value)})]})}),(0,b.jsxs)(E.DialogFooter,{className:"gap-3",children:[(0,b.jsx)(E.DialogClose,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"outline",className:"h-12 rounded-xl flex-1 border-2",children:"Cancel"})}),(0,b.jsx)(g.Button,{onClick:au,className:"h-12 rounded-xl flex-1",children:"Send Request"})]})]})]}),(0,b.jsxs)(g.Button,{variant:"outline",className:"w-full h-14 rounded-2xl text-lg font-bold border-2 hover:bg-muted/50",onClick:()=>{if(!u){t({variant:"destructive",title:"Not Logged In",description:"You must be logged in to message a landlord."}),H.push("/auth/login");return}af&&H.push(`/student/messages?contact=${af.id}`)},children:[(0,b.jsx)(v.MessageSquare,{className:"mr-3 h-5 w-5"})," Message Host"]})]}),(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t border-border/50",children:[(0,b.jsx)("div",{className:"flex items-center justify-between text-sm font-bold uppercase tracking-widest text-muted-foreground/60",children:(0,b.jsx)("span",{children:"Landlord Stats"})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"Response Rate"}),(0,b.jsx)("span",{className:"font-bold",children:"100%"})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"Response Time"}),(0,b.jsx)("span",{className:"font-bold",children:"Under 1hr"})]})]})]})]})]}),af&&(0,b.jsxs)(h.Card,{className:"border-none bg-muted/30 rounded-[2rem] p-6 hover:bg-muted/40 transition-colors group",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(i.Avatar,{className:"h-16 w-16 shadow-xl border-2 border-background group-hover:scale-105 transition-transform",children:[(0,b.jsx)(i.AvatarImage,{src:af.profileImageUrl,className:"object-cover"}),(0,b.jsx)(i.AvatarFallback,{className:"bg-primary/10 text-primary text-xl font-bold",children:af.name[0]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-primary mb-1",children:"Meet Your Host"}),(0,b.jsx)("h4",{className:"text-xl font-headline font-bold",children:af.name}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,b.jsx)("a",{href:`mailto:${af.email}`,className:"text-muted-foreground hover:text-primary",children:(0,b.jsx)(x.Mail,{className:"h-4 w-4"})}),af.whatsappUrl&&(0,b.jsx)(F.default,{href:af.whatsappUrl,target:"_blank",className:"text-muted-foreground hover:text-primary",children:(0,b.jsx)(N,{className:"h-4 w-4"})})]})]})]}),af.bio&&(0,b.jsxs)("p",{className:"mt-4 text-sm text-muted-foreground line-clamp-3 font-medium leading-relaxed",children:['"',af.bio,'"']})]})]})})]}),aq.length>0&&(0,b.jsxs)("div",{className:"mt-20 border-t pt-20",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Similar Properties"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Explore other homes."})]}),(0,b.jsx)(g.Button,{variant:"ghost",className:"text-primary font-bold gap-2",asChild:!0,children:(0,b.jsxs)(F.default,{href:"/student/properties",children:["View All ",(0,b.jsx)(A.ChevronLeft,{className:"h-4 w-4 rotate-180"})]})})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:aq.map(a=>(0,b.jsx)(C.default,{property:a},a.id))})]}),(0,b.jsx)(Y.SharePropertyModal,{isOpen:M,onClose:()=>$(!1),propertyId:ad.id,propertyTitle:ad.title})]})]})}function _({propertyId:c,userId:e,firestore:f,userProfile:h}){let[i,j]=(0,D.useState)(!1),[k,l]=(0,D.useState)(!1),[m,n]=(0,D.useState)(5),[o,p]=(0,D.useState)(""),{toast:q}=(0,O.useToast)();D.default.useEffect(()=>{e&&f&&(async()=>{let b=(0,U.query)((0,U.collection)(f,"leaseAgreements"),(0,U.where)("tenantId","==",e),(0,U.where)("propertyId","==",c)),{getDocs:d}=await a.A(28162);(await d(b)).empty||j(!0)})()},[e,c,f]);let r=async()=>{if(e&&h)try{await (0,U.addDoc)((0,U.collection)(f,"propertyReviews"),{propertyId:c,tenantId:e,tenantName:h.name,tenantImageUrl:h.profileImageUrl,rating:m,comment:o,reviewDate:new Date().toISOString()}),q({title:"Review Submitted!"}),l(!1)}catch(a){q({variant:"destructive",title:"Error",description:"Could not submit review."})}};return i?(0,b.jsxs)(E.Dialog,{open:k,onOpenChange:l,children:[(0,b.jsx)(E.DialogTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"outline",className:"rounded-xl border-primary text-primary hover:bg-primary hover:text-white font-bold h-10 px-6",children:"Leave a Review"})}),(0,b.jsxs)(E.DialogContent,{className:"sm:max-w-md rounded-[2.5rem]",children:[(0,b.jsx)(E.DialogHeader,{children:(0,b.jsx)(E.DialogTitle,{className:"text-2xl font-bold uppercase",children:"Rate your stay"})}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsx)("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(a=>(0,b.jsx)("button",{onClick:()=>n(a),className:(0,d.cn)("h-10 w-10 rounded-xl transition-all",m>=a?"bg-yellow-100 text-yellow-600 scale-110 shadow-lg":"bg-muted/30 text-muted/40 hover:bg-muted"),children:a},a))}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(P.Label,{className:"font-bold uppercase tracking-wider text-[10px] text-muted-foreground pl-1",children:"Your experience"}),(0,b.jsx)(Q.Textarea,{placeholder:"What was it like living here?",className:"min-h-[120px] rounded-2xl bg-muted/20 border-border/50 focus:ring-primary p-4",value:o,onChange:a=>p(a.target.value)})]})]}),(0,b.jsx)(E.DialogFooter,{children:(0,b.jsx)(g.Button,{onClick:r,className:"w-full h-12 rounded-xl text-lg font-bold",children:"Post Review"})})]})]}):null}a.s(["default",()=>$],84219)}];

//# sourceMappingURL=src_app_student_properties_%5Bid%5D_PropertyDetailClient_tsx_523db550._.js.map