{"version":3,"sources":["../../../../src/app/student/tenancy/%5Bid%5D/page.tsx","../../../../node_modules/date-fns/add.mjs","../../../../src/components/tenancy-skeleton.tsx","../../../../src/components/ui/skeleton.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { notFound, useParams, useRouter } from \"next/navigation\";\r\nimport { formatPrice, cn } from \"@/utils\";\r\nimport { add } from \"date-fns/add\";\r\nimport { format, isPast } from \"date-fns\";\r\nimport PaymentDialog from '@/components/payment-dialog';\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport TenancySkeleton from \"@/components/tenancy-skeleton\";\r\nimport { useUser, useFirestore, useDoc, useCollection, useMemoFirebase } from \"@/firebase\";\r\nimport { doc, collection, query, where, updateDoc } from \"firebase/firestore\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport type { Property, UserProfile as User, Transaction, LeaseAgreement } from \"@/types\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport Link from \"next/link\";\r\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\r\nimport { Table, TableHeader, TableRow, TableHead, TableBody, TableCell } from \"@/components/ui/table\";\r\nimport { Dialog, DialogTrigger, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter, DialogClose } from \"@/components/ui/dialog\";\r\nimport { Avatar, AvatarImage, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { AlertTriangle, FileText, User as UserIcon, MessageSquare, Clock, DollarSign, Signature } from \"lucide-react\";\r\n\r\n\r\nexport default function TenancyDetailPage() {\r\n    const params = useParams();\r\n    const id = Array.isArray(params.id) ? params.id[0] : params.id;\r\n    const { user, isUserLoading } = useUser();\r\n    const firestore = useFirestore();\r\n    const router = useRouter();\r\n\r\n    const propertyRef = useMemoFirebase(() => id ? doc(firestore, 'properties', id) : null, [firestore, id]);\r\n    const { data: property, isLoading: isPropertyLoading } = useDoc<Property>(propertyRef);\r\n\r\n    const landlordRef = useMemoFirebase(() => property ? doc(firestore, 'users', property.landlordId) : null, [firestore, property]);\r\n    const { data: landlord, isLoading: isLandlordLoading } = useDoc<User>(landlordRef);\r\n\r\n    const [isPaymentDialogOpen, setIsPaymentDialogOpen] = useState(false);\r\n    const [isVacateDialogOpen, setIsVacateDialogOpen] = useState(false);\r\n\r\n    const transactionsQuery = useMemoFirebase(() => (user && id) ? query(collection(firestore, 'transactions'), where('tenantId', '==', user.uid), where('propertyId', '==', id)) : null, [firestore, user, id]);\r\n    const { data: transactions, isLoading: areTransactionsLoading } = useCollection<Transaction>(transactionsQuery);\r\n\r\n    const leaseQuery = useMemoFirebase(() => (user && id) ? query(collection(firestore, 'leaseAgreements'), where('propertyId', '==', id), where('tenantId', '==', user.uid)) : null, [firestore, user, id]);\r\n    const { data: leases, isLoading: isLeaseLoading } = useCollection<LeaseAgreement>(leaseQuery);\r\n    const lease = leases?.[0];\r\n\r\n    const [tenancyState, setTenancyState] = useState<{\r\n        showPayButton: boolean;\r\n        paymentAmount: number;\r\n        leaseEndDate: Date;\r\n        leaseStartDate: Date;\r\n        isLeaseActive: boolean;\r\n        isLeaseExpired: boolean;\r\n        isRentDue: boolean;\r\n        isAwaitingActivation: boolean;\r\n        rentStatusText: string;\r\n        rentDueDateText: string;\r\n        hasPendingPayments: boolean;\r\n    } | null>(null);\r\n    const { toast } = useToast();\r\n\r\n    const handlePaymentSuccess = async (details: { months: number, method: string, amount: number }) => {\r\n        if (!lease || !property || !user) return;\r\n\r\n        try {\r\n            // If it's a Stripe payment, we might want to record it here if the dialog didn't\r\n            // But based on the current architecture, the dialog handles the record creation for offline.\r\n            // For Stripe, we'll assume the dialog also handles record creation or we do it here.\r\n            // Let's ensure consistency.\r\n\r\n            // Only execute activation logic if the lease is currently pending\r\n            if (lease.status === 'pending') {\r\n                const leaseRef = doc(firestore, 'leaseAgreements', lease.id);\r\n                const isOffline = details.method === 'Offline';\r\n\r\n                if (isOffline) {\r\n                    // For offline, we don't activate yet, just record the selection\r\n                    await updateDoc(leaseRef, {\r\n                        paymentMethod: 'offline',\r\n                        paymentConfirmed: false,\r\n                        offlinePaymentAmount: details.amount,\r\n                        offlinePaymentMonths: details.months\r\n                    });\r\n\r\n                    // Send notification for offline verification\r\n                    const { sendNotification } = await import('@/lib/notifications');\r\n                    await sendNotification({\r\n                        toUserId: lease.landlordId,\r\n                        type: 'OFFLINE_PAYMENT_PENDING',\r\n                        firestore: firestore,\r\n                        propertyName: property.title,\r\n                        link: `/landlord/requests`\r\n                    });\r\n\r\n                    toast({\r\n                        title: \"Offline Payment Recorded\",\r\n                        description: \"Waiting for landlord to confirm payment receipt. Your lease will be activated once verified.\"\r\n                    });\r\n                } else {\r\n                    // 1. Activate Lease (Stripe)\r\n                    await updateDoc(leaseRef, {\r\n                        status: 'active',\r\n                        paymentMethod: 'stripe',\r\n                        paymentConfirmed: true\r\n                    });\r\n\r\n                    // 2. Update Property to Occupied\r\n                    const propertyRef = doc(firestore, 'properties', property.id);\r\n                    await updateDoc(propertyRef, {\r\n                        status: 'occupied',\r\n                        currentTenantId: user.uid,\r\n                        leaseStartDate: new Date().toISOString(),\r\n                    });\r\n\r\n                    // 3. Notify Landlord\r\n                    const { sendNotification } = await import('@/lib/notifications');\r\n                    await sendNotification({\r\n                        toUserId: lease.landlordId,\r\n                        type: 'LEASE_SIGNED',\r\n                        firestore: firestore,\r\n                        propertyName: property.title,\r\n                        link: `/landlord/leases/${lease.id}`,\r\n                        customMessage: `${user.displayName || 'Tenant'} has signed the lease and paid the first month's rent.`\r\n                    });\r\n\r\n                    toast({\r\n                        title: \"Tenancy Activated\",\r\n                        description: \"Your lease is now active and your payment has been confirmed.\"\r\n                    });\r\n                }\r\n            } else {\r\n                // Regular rent payment for an active lease\r\n                toast({\r\n                    title: \"Payment Received\",\r\n                    description: `Your payment of ${formatPrice(details.amount, property.currency)} for ${details.months} month(s) has been recorded.`\r\n                });\r\n            }\r\n\r\n            setIsPaymentDialogOpen(false);\r\n            // We'll use window.location.reload() for a hard refresh to ensure all Firestore listeners update\r\n            setTimeout(() => window.location.reload(), 1500);\r\n        } catch (error) {\r\n            console.error(\"Error finalizing payment flow:\", error);\r\n            toast({\r\n                variant: 'destructive',\r\n                title: \"Error\",\r\n                description: \"Transaction completed, but failed to update status. Please contact support.\"\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleConfirmCompensation = async () => {\r\n        if (!lease || !property || !user) return;\r\n        try {\r\n            // Update lease to expired (Immediate Termination)\r\n            const leaseRef = doc(firestore, 'leaseAgreements', lease.id);\r\n            await updateDoc(leaseRef, {\r\n                status: 'expired',\r\n                endDate: new Date().toISOString()\r\n            });\r\n\r\n            // Clean up property - mark as available and remove tenant\r\n            const propertyRef = doc(firestore, 'properties', property.id);\r\n            await updateDoc(propertyRef, {\r\n                status: 'available',\r\n                currentTenantId: null,\r\n                leaseStartDate: null\r\n            });\r\n\r\n            toast({\r\n                title: \"Tenancy Terminated\",\r\n                description: \"You have confirmed receipt of compensation and acknowledged the vacation period. The tenancy is now closed.\",\r\n            });\r\n            setIsVacateDialogOpen(false);\r\n            router.push('/student/tenancy');\r\n        } catch (error) {\r\n            console.error(\"Error confirming compensation:\", error);\r\n            toast({\r\n                title: \"Error\",\r\n                description: \"Failed to finalize tenancy. Please try again.\",\r\n                variant: \"destructive\",\r\n            });\r\n        }\r\n    };\r\n\r\n    // Auto-cleanup logic\r\n    useEffect(() => {\r\n        if (lease?.status === 'terminating' && lease.terminationGracePeriodEnd) {\r\n            if (isPast(new Date(lease.terminationGracePeriodEnd))) {\r\n                handleConfirmCompensation();\r\n            }\r\n        }\r\n    }, [lease]);\r\n\r\n    const handleMessageLandlord = () => {\r\n        if (landlord) {\r\n            router.push(`/student/messages?contact=${landlord.id}`);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (areTransactionsLoading || isLeaseLoading || !property) return;\r\n\r\n        const tenantTransactions = transactions || [];\r\n        const leaseStartDate = property?.leaseStartDate ? new Date(property.leaseStartDate) : (lease?.createdAt ? (typeof lease.createdAt.toDate === 'function' ? lease.createdAt.toDate() : new Date(lease.createdAt)) : new Date());\r\n        const leaseEndDate = add(leaseStartDate, { years: 1 });\r\n\r\n        // Calculate total months paid from completed rent transactions\r\n        const rentTransactions = tenantTransactions\r\n            .filter(t => (t.type === 'Rent' || t.type === 'Lease Activation') && t.status === 'Completed');\r\n\r\n        const totalMonthsPaid = rentTransactions.reduce((acc, t) => acc + (t.months || 1), 0);\r\n        const nextRentDueDate = add(leaseStartDate, { months: totalMonthsPaid });\r\n\r\n        const isLeaseActive = lease?.status === 'active';\r\n        const isRentDue = isPast(nextRentDueDate);\r\n        const isLeaseExpired = lease?.status === 'expired' || isPast(leaseEndDate);\r\n\r\n        // Check for ANY pending payment transaction\r\n        const hasPendingTransaction = tenantTransactions.some(t =>\r\n            (t.type === 'Rent' || t.type === 'Lease Activation') &&\r\n            (t.status === 'Pending' || t.status === 'Pending Verification')\r\n        );\r\n\r\n        // An offline payment is pending if it's selected on the lease record but not confirmed\r\n        const isOfflineActivationPending = lease?.status === 'pending' && lease?.paymentMethod === 'offline' && !lease?.paymentConfirmed;\r\n\r\n        const isAwaitingActivation = lease?.status === 'pending' && lease?.tenantSigned && !lease?.paymentMethod;\r\n\r\n        const hasAnyPending = hasPendingTransaction || isOfflineActivationPending;\r\n\r\n        setTenancyState({\r\n            isLeaseActive,\r\n            isLeaseExpired,\r\n            isRentDue,\r\n            isAwaitingActivation,\r\n            rentDueDateText: format(nextRentDueDate, 'MMMM do, yyyy'),\r\n            rentStatusText: isRentDue ? 'Rent is currently overdue' : 'Next rent payment scheduled',\r\n            leaseEndDate,\r\n            leaseStartDate,\r\n            paymentAmount: property.price,\r\n            hasPendingPayments: hasAnyPending,\r\n            showPayButton: (isLeaseActive || (lease?.status === 'pending' && lease?.tenantSigned)) && !hasAnyPending\r\n        });\r\n    }, [transactions, areTransactionsLoading, lease, isLeaseLoading, property]);\r\n\r\n    const isLoading = isUserLoading || isPropertyLoading || isLandlordLoading || !tenancyState;\r\n\r\n    if (isLoading) {\r\n        return <TenancySkeleton />;\r\n    }\r\n\r\n    // Allow access if:\r\n    // User is the tenant on this specific lease (regardless of current property status)\r\n    const isTenant = user?.uid === lease?.tenantId;\r\n\r\n    if (!property || !isTenant) {\r\n        if (!isLoading) notFound();\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"max-w-full overflow-x-hidden space-y-8 md:space-y-12 px-4 md:px-0 animate-in fade-in duration-700\">\r\n            {/* Header Section */}\r\n            <div className=\"relative overflow-hidden rounded-2xl md:rounded-[2.5rem] bg-primary/5 p-4 sm:p-6 md:p-12 max-w-full\">\r\n                <div className=\"absolute inset-0 bg-gradient-to-br from-primary/10 via-transparent to-transparent\" />\r\n                <div className=\"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-4 md:gap-8 max-w-full\">\r\n                    <div className=\"space-y-3 md:space-y-4 min-w-0 flex-1\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <Badge className=\"bg-primary text-primary-foreground font-black px-4 py-1.5 rounded-full border-none tracking-widest uppercase text-[10px] shadow-lg shadow-primary/20\">\r\n                                Active Tenancy\r\n                            </Badge>\r\n                        </div>\r\n                        <h1 className=\"font-headline text-xl sm:text-2xl md:text-4xl lg:text-5xl font-black tracking-tight text-foreground leading-tight uppercase break-words overflow-wrap-anywhere\">\r\n                            {property.title}\r\n                        </h1>\r\n                        <p className=\"text-xs sm:text-sm md:text-base lg:text-lg font-medium text-muted-foreground/80 leading-relaxed break-words overflow-wrap-anywhere\">\r\n                            {property.location.address}, {property.location.city}\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 w-full sm:w-auto max-w-full\">\r\n                        {tenancyState?.hasPendingPayments ? (\r\n                            <div className=\"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-3 bg-amber-500/10 text-amber-600 rounded-xl sm:rounded-2xl font-black text-[9px] sm:text-[10px] md:text-xs uppercase tracking-widest border border-amber-500/20\">\r\n                                <Clock className=\"h-3 w-3\" /> <span className=\"whitespace-nowrap\">Pending</span>\r\n                            </div>\r\n                        ) : tenancyState?.showPayButton && (\r\n                            <Button onClick={() => setIsPaymentDialogOpen(true)} size=\"lg\" className=\"w-full sm:w-auto h-11 sm:h-12 md:h-14 rounded-xl sm:rounded-2xl px-4 sm:px-6 md:px-12 font-black text-[9px] sm:text-[10px] md:text-xs uppercase tracking-widest shadow-2xl shadow-primary/20 transition-all hover:shadow-primary/40 hover:-translate-y-1\">\r\n                                <DollarSign className=\"mr-1 sm:mr-2 h-3 w-3\" /> <span className=\"whitespace-nowrap\">Pay</span>\r\n                            </Button>\r\n                        )}\r\n                        <Button variant=\"outline\" className=\"w-full sm:w-auto h-11 sm:h-12 md:h-14 rounded-xl sm:rounded-2xl px-4 sm:px-6 md:px-12 font-black text-[9px] sm:text-[10px] md:text-xs uppercase tracking-widest border-2\" onClick={handleMessageLandlord}>\r\n                            <MessageSquare className=\"mr-1 sm:mr-2 h-3 w-3\" /> <span className=\"whitespace-nowrap\">Contact</span>\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Critical Action Alerts */}\r\n            <div className=\"space-y-4 md:space-y-6 max-w-full\">\r\n                {lease?.status === 'pending' && !lease.tenantSigned && (\r\n                    <Card className=\"overflow-hidden border-none bg-amber-500/10 shadow-xl shadow-amber-500/5 backdrop-blur-md text-amber-900 animate-in slide-in-from-top duration-500\">\r\n                        <CardHeader className=\"flex flex-row items-center gap-6 p-8\">\r\n                            <div className=\"flex h-16 w-16 shrink-0 items-center justify-center rounded-2xl bg-white shadow-xl\">\r\n                                <Signature className=\"h-8 w-8 text-amber-600\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <CardTitle className=\"text-2xl font-black tracking-tight text-amber-900\">Lease Signature Required</CardTitle>\r\n                                <CardDescription className=\"text-lg font-medium text-amber-700/80 leading-relaxed\">\r\n                                    Your lease agreement for <span className=\"font-bold\">{property.title}</span> is ready. Review and sign to activate your full tenancy.\r\n                                </CardDescription>\r\n                                <Button size=\"lg\" className=\"mt-4 bg-amber-600 hover:bg-amber-700 text-white rounded-2xl font-bold px-8\" asChild>\r\n                                    <Link href={`/student/leases/${lease.id}`}>Review & Sign Now</Link>\r\n                                </Button>\r\n                            </div>\r\n                        </CardHeader>\r\n                    </Card>\r\n                )}\r\n\r\n                {lease?.status === 'terminating' && (\r\n                    <Card className=\"overflow-hidden border-none bg-destructive/10 shadow-xl shadow-destructive/5 backdrop-blur-md text-destructive animate-in slide-in-from-top duration-500\">\r\n                        <CardHeader className=\"flex flex-row items-center gap-6 p-8\">\r\n                            <div className=\"flex h-16 w-16 shrink-0 items-center justify-center rounded-2xl bg-white shadow-xl\">\r\n                                <AlertTriangle className=\"h-8 w-8 text-destructive\" />\r\n                            </div>\r\n                            <div className=\"space-y-2 flex-1\">\r\n                                <CardTitle className=\"text-2xl font-black tracking-tight\">Tenancy Ending Soon</CardTitle>\r\n                                <CardDescription className=\"text-lg font-medium text-destructive/80 leading-relaxed\">\r\n                                    A termination process has been initiated. You are entitled to a pro-rated refund of <span className=\"font-bold\">{formatPrice(lease.calculatedRefund || 0, property.currency)}</span>.\r\n                                </CardDescription>\r\n                                <Dialog open={isVacateDialogOpen} onOpenChange={setIsVacateDialogOpen}>\r\n                                    <DialogTrigger asChild>\r\n                                        <Button\r\n                                            size=\"lg\"\r\n                                            className=\"mt-4 bg-destructive hover:bg-destructive/90 text-white rounded-2xl font-bold px-8\"\r\n                                        >\r\n                                            Confirm Refund Received & Vacate\r\n                                        </Button>\r\n                                    </DialogTrigger>\r\n                                    <DialogContent className=\"max-w-md rounded-[2rem] border-none shadow-2xl p-8\">\r\n                                        <DialogHeader className=\"space-y-4\">\r\n                                            <div className=\"flex h-16 w-16 items-center justify-center rounded-2xl bg-destructive/10 text-destructive mx-auto\">\r\n                                                <AlertTriangle className=\"h-8 w-8\" />\r\n                                            </div>\r\n                                            <div className=\"space-y-2 text-center\">\r\n                                                <DialogTitle className=\"text-2xl font-black tracking-tight uppercase\">Confirm Vacation</DialogTitle>\r\n                                                <DialogDescription className=\"text-base font-medium text-muted-foreground leading-relaxed\">\r\n                                                    You are confirming that you have received your pro-rated refund.\r\n                                                    <br /><br />\r\n                                                    <span className=\"text-foreground font-bold\">Important:</span> You are required to vacate the property within <span className=\"text-destructive font-bold\">48 hours</span> of this confirmation.\r\n                                                </DialogDescription>\r\n                                            </div>\r\n                                        </DialogHeader>\r\n                                        <DialogFooter className=\"mt-8 flex-col sm:flex-row gap-3\">\r\n                                            <DialogClose asChild>\r\n                                                <Button variant=\"ghost\" className=\"rounded-xl font-bold\">Cancel</Button>\r\n                                            </DialogClose>\r\n                                            <Button\r\n                                                className=\"bg-destructive hover:bg-destructive/90 text-white rounded-xl font-bold px-8\"\r\n                                                onClick={handleConfirmCompensation}\r\n                                            >\r\n                                                Acknowledge & Terminate\r\n                                            </Button>\r\n                                        </DialogFooter>\r\n                                    </DialogContent>\r\n                                </Dialog>\r\n                            </div>\r\n                        </CardHeader>\r\n                    </Card>\r\n                )}\r\n            </div>\r\n\r\n            <Tabs defaultValue=\"payments\" className=\"w-full max-w-full space-y-6 md:space-y-10\">\r\n                <div className=\"w-full max-w-full overflow-x-auto pb-2 scrollbar-hide -mx-4 px-4 md:mx-0 md:px-0\">\r\n                    <TabsList className=\"flex h-12 sm:h-14 md:h-16 w-full md:w-max md:min-w-[700px] gap-1.5 sm:gap-2 rounded-xl sm:rounded-2xl md:rounded-[2rem] bg-muted/30 p-1.5 sm:p-2 backdrop-blur-md mx-auto\">\r\n                        <TabsTrigger value=\"payments\" className=\"flex-1 px-2 sm:px-3 md:px-8 rounded-lg sm:rounded-xl md:rounded-[1.5rem] text-[10px] sm:text-xs md:text-sm font-bold tracking-tight transition-all data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary whitespace-nowrap\">\r\n                            Pay\r\n                        </TabsTrigger>\r\n                        <TabsTrigger value=\"lease\" className=\"flex-1 px-2 sm:px-3 md:px-8 rounded-lg sm:rounded-xl md:rounded-[1.5rem] text-[10px] sm:text-xs md:text-sm font-bold tracking-tight transition-all data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary whitespace-nowrap\">\r\n                            Lease\r\n                        </TabsTrigger>\r\n                        <TabsTrigger value=\"contact\" className=\"flex-1 px-2 sm:px-3 md:px-8 rounded-lg sm:rounded-xl md:rounded-[1.5rem] text-[10px] sm:text-xs md:text-sm font-bold tracking-tight transition-all data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary whitespace-nowrap\">\r\n                            Info\r\n                        </TabsTrigger>\r\n                    </TabsList>\r\n                </div>\r\n\r\n                <TabsContent value=\"payments\" className=\"space-y-6 md:space-y-10\">\r\n                    {/* Payment Cards Grid */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8\">\r\n                        <Card className=\"group relative overflow-hidden border-none bg-white p-4 sm:p-6 md:p-8 shadow-xl shadow-black/[0.02] transition-all hover:shadow-2xl hover:shadow-primary/5\">\r\n                            <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 transition-opacity group-hover:opacity-100\" />\r\n                            <div className=\"relative space-y-4\">\r\n                                <p className=\"text-xs font-black uppercase tracking-widest text-primary/60\">Next Payment Due</p>\r\n                                <h3 className={cn(\r\n                                    \"text-2xl sm:text-3xl font-black tracking-tight break-words\",\r\n                                    tenancyState?.isRentDue && tenancyState.isLeaseActive ? \"text-destructive\" : \"text-primary\"\r\n                                )}>\r\n                                    {tenancyState?.rentDueDateText || \"N/A\"}\r\n                                </h3>\r\n                                <p className=\"text-sm sm:text-base md:text-lg font-bold text-muted-foreground/80\">{tenancyState?.rentStatusText || \"N/A\"}</p>\r\n                            </div>\r\n                        </Card>\r\n\r\n                        <Card className=\"group relative overflow-hidden border-none bg-white p-4 sm:p-6 md:p-8 shadow-xl shadow-black/[0.02] transition-all hover:shadow-2xl hover:shadow-primary/5\">\r\n                            <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 transition-opacity group-hover:opacity-100\" />\r\n                            <div className=\"relative space-y-4\">\r\n                                <p className=\"text-xs font-black uppercase tracking-widest text-primary/60\">Lease Overview</p>\r\n                                <h3 className=\"text-2xl sm:text-3xl font-black tracking-tight text-foreground break-words\">\r\n                                    {tenancyState?.leaseEndDate ? format(tenancyState.leaseEndDate, 'MMMM do, yyyy') : \"N/A\"}\r\n                                </h3>\r\n                                <p className=\"text-sm sm:text-base md:text-lg font-bold text-muted-foreground/80\">Scheduled end of tenancy</p>\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n\r\n                    <Card className=\"overflow-hidden border-none bg-white shadow-xl shadow-black/[0.02]\">\r\n                        <CardHeader className=\"p-4 sm:p-6 md:p-8 pb-4\">\r\n                            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                                <div>\r\n                                    <CardTitle className=\"text-2xl font-black tracking-tight\">Financial History</CardTitle>\r\n                                    <CardDescription className=\"text-base font-medium\">Detailed log of all your rental payments and deposits.</CardDescription>\r\n                                </div>\r\n                                <Button variant=\"outline\" className=\"w-full sm:w-auto rounded-2xl font-bold border-muted/50 hover:bg-muted/10 h-12\">\r\n                                    Export PDF\r\n                                </Button>\r\n                            </div>\r\n                        </CardHeader>\r\n                        <CardContent className=\"p-0\">\r\n                            {/* Desktop Table View */}\r\n                            <div className=\"hidden md:block overflow-x-auto\">\r\n                                <Table>\r\n                                    <TableHeader>\r\n                                        <TableRow className=\"bg-muted/30 border-none\">\r\n                                            <TableHead className=\"px-4 lg:px-8 font-bold text-foreground\">Date</TableHead>\r\n                                            <TableHead className=\"font-bold text-foreground\">Type</TableHead>\r\n                                            <TableHead className=\"text-right font-bold text-foreground\">Amount</TableHead>\r\n                                            <TableHead className=\"text-center font-bold text-foreground px-4 lg:px-8\">Status</TableHead>\r\n                                        </TableRow>\r\n                                    </TableHeader>\r\n                                    <TableBody>\r\n                                        {transactions && transactions.length > 0 ? transactions.map((t, idx) => (\r\n                                            <TableRow key={t.id} className=\"border-muted/10 hover:bg-muted/5 transition-colors\">\r\n                                                <TableCell className=\"px-4 lg:px-8 font-bold text-muted-foreground/80\">{format(new Date(t.date), 'MMM dd, yyyy')}</TableCell>\r\n                                                <TableCell className=\"font-bold\">{t.type}</TableCell>\r\n                                                <TableCell className=\"text-right font-black text-foreground\">{formatPrice(t.amount, t.currency)}</TableCell>\r\n                                                <TableCell className=\"text-center px-4 lg:px-8\">\r\n                                                    <Badge className={cn(\r\n                                                        \"rounded-full px-4 py-1 text-[10px] font-black uppercase tracking-widest border-none\",\r\n                                                        t.status === 'Completed' ? \"bg-green-500/10 text-green-600\"\r\n                                                            : t.status === 'Pending' ? \"bg-amber-500/10 text-amber-600\"\r\n                                                                : \"bg-destructive/10 text-destructive\"\r\n                                                    )}>\r\n                                                        {t.status}\r\n                                                    </Badge>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        )) : (\r\n                                            <TableRow>\r\n                                                <TableCell colSpan={4} className=\"text-center py-20 text-muted-foreground font-medium\">No transactions found.</TableCell>\r\n                                            </TableRow>\r\n                                        )}\r\n                                    </TableBody>\r\n                                </Table>\r\n                            </div>\r\n\r\n                            {/* Mobile Card View */}\r\n                            <div className=\"md:hidden divide-y divide-muted/10\">\r\n                                {transactions && transactions.length > 0 ? transactions.map((t, idx) => (\r\n                                    <div key={t.id} className=\"p-4 hover:bg-muted/5 transition-colors\">\r\n                                        <div className=\"flex items-start justify-between mb-3\">\r\n                                            <div>\r\n                                                <p className=\"text-xs font-black uppercase tracking-widest text-muted-foreground/60 mb-1\">Date</p>\r\n                                                <p className=\"font-bold text-sm\">{format(new Date(t.date), 'MMM dd, yyyy')}</p>\r\n                                            </div>\r\n                                            <Badge className={cn(\r\n                                                \"rounded-full px-3 py-1 text-[10px] font-black uppercase tracking-widest border-none\",\r\n                                                t.status === 'Completed' ? \"bg-green-500/10 text-green-600\"\r\n                                                    : t.status === 'Pending' ? \"bg-amber-500/10 text-amber-600\"\r\n                                                        : \"bg-destructive/10 text-destructive\"\r\n                                            )}>\r\n                                                {t.status}\r\n                                            </Badge>\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-2 gap-3\">\r\n                                            <div>\r\n                                                <p className=\"text-xs font-black uppercase tracking-widest text-muted-foreground/60 mb-1\">Type</p>\r\n                                                <p className=\"font-bold text-sm\">{t.type}</p>\r\n                                            </div>\r\n                                            <div className=\"text-right\">\r\n                                                <p className=\"text-xs font-black uppercase tracking-widest text-muted-foreground/60 mb-1\">Amount</p>\r\n                                                <p className=\"font-black text-sm text-foreground\">{formatPrice(t.amount, t.currency)}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )) : (\r\n                                    <div className=\"text-center py-20 text-muted-foreground font-medium\">No transactions found.</div>\r\n                                )}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"lease\" className=\"space-y-10\">\r\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-10\">\r\n                        <Card className=\"lg:col-span-2 overflow-hidden border-none bg-white shadow-xl shadow-black/[0.02]\">\r\n                            <CardHeader className=\"p-8 border-b border-muted/20 bg-muted/5 relative overflow-hidden\">\r\n                                <div className=\"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent\" />\r\n                                <div className=\"relative flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                                    <div className=\"space-y-1\">\r\n                                        <CardTitle className=\"text-2xl font-black tracking-tight\">Lease Agreement</CardTitle>\r\n                                        <CardDescription className=\"font-medium\">Legally binding terms of your tenancy.</CardDescription>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <Badge className=\"bg-green-500/10 text-green-600 border-none font-bold\">\r\n                                            Authenticated\r\n                                        </Badge>\r\n                                    </div>\r\n                                </div>\r\n                            </CardHeader>\r\n                            <CardContent className=\"p-0 bg-[#fdfdfd]\">\r\n                                <ScrollArea className=\"h-[600px] w-full p-8 font-serif leading-relaxed text-lg\">\r\n                                    <div className=\"prose prose-lg max-w-none prose-slate whitespace-pre-wrap selection:bg-primary/20\">\r\n                                        {lease?.leaseText}\r\n                                    </div>\r\n                                </ScrollArea>\r\n                            </CardContent>\r\n                            <div className=\"p-8 border-t border-muted/20 bg-muted/5 flex items-center justify-between\">\r\n                                <p className=\"text-sm font-medium text-muted-foreground\">\r\n                                    Last updated: {(() => {\r\n                                        const dateValue = lease?.createdAt;\r\n                                        if (!dateValue) return 'N/A';\r\n\r\n                                        const d = (dateValue && typeof dateValue.toDate === 'function')\r\n                                            ? dateValue.toDate()\r\n                                            : new Date(dateValue);\r\n\r\n                                        return isNaN(d.getTime()) ? 'N/A' : format(d, 'PPP');\r\n                                    })()}\r\n                                </p>\r\n                                <Button variant=\"outline\" className=\"rounded-2xl font-bold\">Download Signed Copy (PDF)</Button>\r\n                            </div>\r\n                        </Card>\r\n\r\n                        <div className=\"space-y-10\">\r\n                            <Card className=\"overflow-hidden border-none bg-white shadow-xl shadow-black/[0.02]\">\r\n                                <CardHeader className=\"p-8\">\r\n                                    <CardTitle className=\"text-xl font-bold tracking-tight\">Signatories</CardTitle>\r\n                                </CardHeader>\r\n                                <CardContent className=\"px-8 pb-8 space-y-6\">\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className={cn(\"flex h-12 w-12 items-center justify-center rounded-2xl\", lease?.tenantSigned ? \"bg-green-500/10 text-green-600\" : \"bg-muted/50 text-muted-foreground\")}>\r\n                                            <Signature className=\"h-6 w-6\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-bold\">Tenant (You)</p>\r\n                                            <p className=\"text-xs font-bold text-muted-foreground uppercase tracking-widest\">{lease?.tenantSigned ? \"Signed & Verified\" : \"Pending Signature\"}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className={cn(\"flex h-12 w-12 items-center justify-center rounded-2xl\", lease?.landlordSigned ? \"bg-green-500/10 text-green-600\" : \"bg-muted/50 text-muted-foreground\")}>\r\n                                            <Signature className=\"h-6 w-6\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-bold\">Landlord</p>\r\n                                            <p className=\"text-xs font-bold text-muted-foreground uppercase tracking-widest\">{lease?.landlordSigned ? \"Signed & Verified\" : \"Pending Signature\"}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n\r\n                            <Card className=\"overflow-hidden border-none bg-primary/5 shadow-xl shadow-primary/5\">\r\n                                <CardContent className=\"p-8 text-center space-y-6\">\r\n                                    <div className=\"flex h-16 w-16 mx-auto items-center justify-center rounded-3xl bg-white shadow-xl\">\r\n                                        <FileText className=\"h-8 w-8 text-primary\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <h4 className=\"font-black text-xl tracking-tight\">Need a Change?</h4>\r\n                                        <p className=\"text-sm font-medium text-muted-foreground/80 leading-relaxed\">\r\n                                            &quot;If you need to discuss lease terms or request an amendment, please contact your landlord directly.&quot;\r\n                                        </p>\r\n                                    </div>\r\n                                    <Button variant=\"outline\" className=\"w-full h-12 rounded-2xl font-bold border-primary/20 text-primary hover:bg-primary/5 transition-all\" onClick={handleMessageLandlord}>\r\n                                        Message Landlord\r\n                                    </Button>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </div>\r\n                    </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"contact\">\r\n                    {landlord && (\r\n                        <Card className=\"overflow-hidden border-none bg-white shadow-xl shadow-black/[0.02] max-w-4xl mx-auto\">\r\n                            <div className=\"relative h-48 bg-primary overflow-hidden\">\r\n                                <div className=\"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent\" />\r\n                                <div className=\"absolute -bottom-12 left-12\">\r\n                                    <Avatar className=\"h-32 w-32 border-8 border-white shadow-2xl\">\r\n                                        <AvatarImage src={landlord.profileImageUrl} className=\"object-cover\" />\r\n                                        <AvatarFallback className=\"bg-muted\">\r\n                                            <UserIcon className=\"h-12 w-12 text-muted-foreground\" />\r\n                                        </AvatarFallback>\r\n                                    </Avatar>\r\n                                </div>\r\n                            </div>\r\n                            <CardContent className=\"pt-20 px-6 sm:px-12 pb-12\">\r\n                                <div className=\"space-y-8\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <h2 className=\"text-3xl sm:text-4xl font-black tracking-tight\">{landlord.name}</h2>\r\n                                        <div className=\"text-lg sm:text-xl font-medium text-muted-foreground flex flex-wrap items-center gap-2\">\r\n                                            <Badge variant=\"secondary\" className=\"rounded-full px-4 py-1 font-bold\">Property Landlord</Badge>\r\n                                            Verified Account\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-10\">\r\n                                        <div className=\"space-y-4\">\r\n                                            <p className=\"text-xs font-black uppercase tracking-widest text-muted-foreground\">Contact Email</p>\r\n                                            <p className=\"text-lg font-bold text-foreground\">{landlord.email}</p>\r\n                                        </div>\r\n                                        <div className=\"space-y-4\">\r\n                                            <p className=\"text-xs font-black uppercase tracking-widest text-muted-foreground\">Communication Policy</p>\r\n                                            <p className=\"text-lg font-bold text-foreground\">Standard 24h Response</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"pt-8 border-t border-muted/20\">\r\n                                        <Button size=\"lg\" onClick={handleMessageLandlord} className=\"w-full sm:w-auto h-16 rounded-2xl px-12 font-black text-xl shadow-2xl shadow-primary/20 transition-all hover:shadow-primary/40 hover:-translate-y-1\">\r\n                                            <MessageSquare className=\"mr-3 h-6 w-6\" /> Send Message\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    )}\r\n                </TabsContent>\r\n            </Tabs>\r\n\r\n            {\r\n                tenancyState && user && lease && (\r\n                    <PaymentDialog\r\n                        isOpen={isPaymentDialogOpen}\r\n                        onClose={() => setIsPaymentDialogOpen(false)}\r\n                        onPaymentSuccess={handlePaymentSuccess}\r\n                        amount={tenancyState.paymentAmount || property.price}\r\n                        tenantName={user.displayName || user.email || ''}\r\n                        tenantId={user.uid}\r\n                        landlordId={property.landlordId}\r\n                        propertyId={property.id}\r\n                        currency={property.currency}\r\n                        destinationAccountId={landlord?.stripeAccountId}\r\n                        metadata={{ type: lease.status === 'pending' ? 'Lease Activation' : 'Rent', leaseId: lease.id }}\r\n                    />\r\n                )\r\n            }\r\n        </div >\r\n    );\r\n}\r\n","import { addDays } from \"./addDays.mjs\";\nimport { addMonths } from \"./addMonths.mjs\";\nimport { constructFrom } from \"./constructFrom.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name add\n * @category Common Helpers\n * @summary Add the specified years, months, weeks, days, hours, minutes and seconds to the given date.\n *\n * @description\n * Add the specified years, months, weeks, days, hours, minutes and seconds to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param duration - The object with years, months, weeks, days, hours, minutes and seconds to be added.\n *\n * | Key            | Description                        |\n * |----------------|------------------------------------|\n * | years          | Amount of years to be added        |\n * | months         | Amount of months to be added       |\n * | weeks          | Amount of weeks to be added        |\n * | days           | Amount of days to be added         |\n * | hours          | Amount of hours to be added        |\n * | minutes        | Amount of minutes to be added      |\n * | seconds        | Amount of seconds to be added      |\n *\n * All values default to 0\n *\n * @returns The new date with the seconds added\n *\n * @example\n * // Add the following duration to 1 September 2014, 10:19:50\n * const result = add(new Date(2014, 8, 1, 10, 19, 50), {\n *   years: 2,\n *   months: 9,\n *   weeks: 1,\n *   days: 7,\n *   hours: 5,\\\\-7\n *   minutes: 9,\n *   seconds: 30,\n * })\n * //=> Thu Jun 15 2017 15:29:20\n */\nexport function add(date, duration) {\n  const {\n    years = 0,\n    months = 0,\n    weeks = 0,\n    days = 0,\n    hours = 0,\n    minutes = 0,\n    seconds = 0,\n  } = duration;\n\n  // Add years and months\n  const _date = toDate(date);\n  const dateWithMonths =\n    months || years ? addMonths(_date, months + years * 12) : _date;\n\n  // Add weeks and days\n  const dateWithDays =\n    days || weeks ? addDays(dateWithMonths, days + weeks * 7) : dateWithMonths;\n\n  // Add days, hours, minutes and seconds\n  const minutesToAdd = minutes + hours * 60;\n  const secondsToAdd = seconds + minutesToAdd * 60;\n  const msToAdd = secondsToAdd * 1000;\n  const finalDate = constructFrom(date, dateWithDays.getTime() + msToAdd);\n\n  return finalDate;\n}\n\n// Fallback for modularized imports:\nexport default add;\n","\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Table, TableBody, TableCell, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\n\r\nexport default function TenancySkeleton() {\r\n  return (\r\n    <div className=\"space-y-8 animate-pulse\">\r\n        <div>\r\n            <Skeleton className=\"h-9 w-64\" />\r\n            <Skeleton className=\"h-4 w-96 mt-2\" />\r\n        </div>\r\n        <Separator />\r\n\r\n        <Tabs defaultValue=\"payments\" className=\"w-full\">\r\n            <TabsList className=\"grid w-full grid-cols-3\">\r\n                <TabsTrigger value=\"payments\">Payments</TabsTrigger>\r\n                <TabsTrigger value=\"lease\">Lease Info</TabsTrigger>\r\n                <TabsTrigger value=\"contact\">Contact</TabsTrigger>\r\n            </TabsList>\r\n            <TabsContent value=\"payments\">\r\n                 <Card className=\"mt-2\">\r\n                    <CardHeader>\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <div>\r\n                                <CardTitle>Payment History</CardTitle>\r\n                                <CardDescription>Review your past transactions.</CardDescription>\r\n                            </div>\r\n                            <Skeleton className=\"h-10 w-32\" />\r\n                        </div>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <Table>\r\n                            <TableHeader>\r\n                                <TableRow>\r\n                                    <TableCell><Skeleton className=\"h-4 w-20\" /></TableCell>\r\n                                    <TableCell><Skeleton className=\"h-4 w-20\" /></TableCell>\r\n                                    <TableCell className=\"text-right\"><Skeleton className=\"h-4 w-24 ml-auto\" /></TableCell>\r\n                                    <TableCell className=\"text-center\"><Skeleton className=\"h-4 w-20 mx-auto\" /></TableCell>\r\n                                </TableRow>\r\n                            </TableHeader>\r\n                            <TableBody>\r\n                                {[...Array(3)].map((_, i) => (\r\n                                    <TableRow key={i}>\r\n                                        <TableCell><Skeleton className=\"h-4 w-24\" /></TableCell>\r\n                                        <TableCell><Skeleton className=\"h-4 w-16\" /></TableCell>\r\n                                        <TableCell className=\"text-right\"><Skeleton className=\"h-4 w-20 ml-auto\" /></TableCell>\r\n                                        <TableCell className=\"text-center\"><Skeleton className=\"h-6 w-24 rounded-full mx-auto\" /></TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </CardContent>\r\n                 </Card>\r\n            </TabsContent>\r\n        </Tabs>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import { cn } from \"@/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n\r\n\r\n"],"names":[],"mappings":"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","ignoreList":[1]}