module.exports=[52191,a=>{"use strict";var b=a.i(87924),c=a.i(59501),d=a.i(95245),e=a.i(63563),f=a.i(99570),g=a.i(41921),h=a.i(66718),i=a.i(91119),j=a.i(75083),k=a.i(72233);let l=(0,a.i(70106).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var m=a.i(46842),n=a.i(63658),o=a.i(86192),p=a.i(80701);a.i(79597);var q=a.i(36505),r=a.i(28137),s=a.i(81056),t=a.i(78140);a.i(69387);var u=a.i(60574),v=a.i(72131),w=a.i(42816),x=a.i(54614),y=a.i(33937);a.i(60121);var z=a.i(5420),A=a.i(35156),B=a.i(54243),C=a.i(5975),D=a.i(59637);let E=e.object({name:e.string().min(2,"Name must be at least 2 characters."),email:e.string().email("Please enter a valid email address."),phone:e.string().min(10,"Valid phone number is required."),country:e.string().optional(),state:e.string().optional(),school:e.string().optional(),currency:e.string().optional()}),F=e.object({currentPassword:e.string().min(8,"Password must be at least 8 characters."),newPassword:e.string().min(8,"Password must be at least 8 characters."),confirmPassword:e.string().min(8,"Password must be at least 8 characters.")}).refine(a=>a.newPassword===a.confirmPassword,{message:"New passwords don't match",path:["confirmPassword"]});function G(){let{user:a,isUserLoading:e}=(0,q.useUser)(),G=(0,q.useFirestore)(),{toast:H}=(0,x.useToast)(),I=(0,q.useFirebaseApp)(),[J,K]=(0,v.useState)(!1),[L,M]=(0,v.useState)(null),N=(0,v.useRef)(null),O=(0,q.useMemoFirebase)(()=>a?(0,u.doc)(G,"users",a.uid):null,[a,G]),{data:P,isLoading:Q}=(0,r.useDoc)(O),R=(0,d.useForm)({resolver:(0,c.zodResolver)(E),defaultValues:{name:"",email:"",phone:"",country:"",state:"",school:"",currency:""}});(0,v.useEffect)(()=>{P&&R.reset({name:P.name||"",email:P.email||"",phone:P.phone||"",country:P.country||"",state:P.state||"",school:P.school||"",currency:P.currency||"USD"})},[P,R]);let S=(0,d.useForm)({resolver:(0,c.zodResolver)(F),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}});async function T(b){let c=b.target.files?.[0];if(c&&a){if(c.size>5242880)return void H({variant:"destructive",title:"Image too large",description:"Please upload an image smaller than 5MB."});if(!c.type.startsWith("image/"))return void H({variant:"destructive",title:"Invalid file type",description:"Please upload a valid image file (JPG, PNG, WebP, etc.)."});K(!0);try{let b=(0,z.getStorage)(I),d=await (0,A.uploadProfileImage)(b,a.uid,c);O&&(await (0,u.setDoc)(O,{profileImageUrl:d},{merge:!0}),M(d),H({title:"Profile Picture Updated",description:"Your profile picture has been updated."}))}catch(a){console.error("Error uploading image: ",a),H({variant:"destructive",title:"Upload Failed",description:a.message||"Could not upload image. Please check that the file is a valid image and try again."}),M(null)}finally{K(!1),N.current&&(N.current.value="")}}}return e||Q?(0,b.jsx)(w.default,{}):a&&P?(0,b.jsxs)("div",{className:"max-w-5xl mx-auto space-y-12 animate-in fade-in duration-700",children:[(0,b.jsxs)("div",{className:"relative overflow-hidden rounded-[3rem] bg-muted/30 p-10 md:p-14 border-2 border-white/40 shadow-xl shadow-black/[0.02]",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent"}),(0,b.jsxs)("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-10",children:[(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsxs)(k.Avatar,{className:"h-32 w-32 md:h-40 md:w-40 border-8 border-white shadow-2xl transition-transform duration-500 group-hover:scale-105",children:[(0,b.jsx)(k.AvatarImage,{src:L||P.profileImageUrl,className:"object-cover"}),(0,b.jsx)(k.AvatarFallback,{className:"bg-muted text-4xl",children:(0,b.jsx)(m.User,{className:"h-16 w-16 text-muted-foreground/40"})})]}),(0,b.jsx)("button",{onClick:()=>N.current?.click(),disabled:J,className:"absolute bottom-2 right-2 flex h-10 w-10 items-center justify-center rounded-2xl bg-primary text-white shadow-xl hover:scale-110 active:scale-95 transition-all",children:(0,b.jsx)(l,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"space-y-4 text-center md:text-left",children:[(0,b.jsxs)("h1",{className:"font-headline text-2xl md:text-5xl font-black tracking-tight text-foreground uppercase",children:["Account ",(0,b.jsx)("span",{className:"text-primary",children:"Settings"})]}),(0,b.jsx)("p",{className:"max-w-md text-lg font-medium text-muted-foreground/80 leading-relaxed",children:'"Personalize your profile and manage your preferences for a tailored Lodger experience."'})]})]})]}),(0,b.jsxs)(j.Tabs,{defaultValue:"profile",className:"w-full space-y-10",children:[(0,b.jsxs)(j.TabsList,{className:"h-16 w-full max-w-md grid grid-cols-2 p-1 bg-muted/30 rounded-3xl border-2 border-white/40 shadow-inner",children:[(0,b.jsx)(j.TabsTrigger,{value:"profile",className:"rounded-[1.25rem] font-black text-sm uppercase tracking-widest data-[state=active]:bg-white data-[state=active]:shadow-lg transition-all",children:"Profile"}),(0,b.jsx)(j.TabsTrigger,{value:"settings",className:"rounded-[1.25rem] font-black text-sm uppercase tracking-widest data-[state=active]:bg-white data-[state=active]:shadow-lg transition-all",children:"Security"})]}),(0,b.jsx)(j.TabsContent,{value:"profile",className:"space-y-10 outline-none animate-in fade-in slide-in-from-bottom-4 duration-500",children:(0,b.jsxs)(i.Card,{className:"border-none bg-white shadow-xl shadow-black/[0.02] rounded-[2.5rem] overflow-hidden",children:[(0,b.jsxs)(i.CardHeader,{className:"p-10 border-b border-muted/20",children:[(0,b.jsx)(i.CardTitle,{className:"text-2xl font-black",children:"Personal Information"}),(0,b.jsx)(i.CardDescription,{className:"text-lg font-medium text-muted-foreground/60",children:"Landlords use this to identify and verify you."})]}),(0,b.jsx)(i.CardContent,{className:"p-10",children:(0,b.jsx)(g.Form,{...R,children:(0,b.jsxs)("form",{onSubmit:R.handleSubmit(function(a){if(!O)return;let b={name:a.name,phone:a.phone,country:a.country,state:a.state,school:a.school,currency:a.currency||"USD"};(0,u.setDoc)(O,b,{merge:!0}).then(()=>{H({title:"Profile Updated",description:"Your profile has been successfully updated."})}).catch(a=>{if(console.error("Profile update error:",a),"permission-denied"===a.code){let a=new t.FirestorePermissionError({path:O.path,operation:"update",requestResourceData:b});s.errorEmitter.emit("permission-error",a)}else H({variant:"destructive",title:"Update Failed",description:"Could not update profile. Please try again."})})}),className:"space-y-10",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12",children:[(0,b.jsx)(g.FormField,{control:R.control,name:"name",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"space-y-3",children:[(0,b.jsx)(g.FormLabel,{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:"Full Name"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{placeholder:"Enter your full name",className:"h-14 rounded-2xl border-2 bg-muted/10 focus:bg-white focus:ring-4 focus:ring-primary/10 font-bold",...a})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:R.control,name:"phone",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"space-y-3",children:[(0,b.jsx)(g.FormLabel,{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:"Phone Number"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{placeholder:"(555) 000-0000",className:"h-14 rounded-2xl border-2 bg-muted/10 focus:bg-white focus:ring-4 focus:ring-primary/10 font-bold",...a})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:R.control,name:"email",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"space-y-3",children:[(0,b.jsx)(g.FormLabel,{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:"Email Address"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{className:"h-14 rounded-2xl border-2 bg-muted/10 opacity-60 font-bold",...a,disabled:!0})}),(0,b.jsx)(g.FormDescription,{className:"text-muted-foreground/60",children:"Verified primary contact"}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:R.control,name:"school",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"space-y-3",children:[(0,b.jsx)(g.FormLabel,{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:"Institution"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(B.SchoolCombobox,{value:a.value,onChange:a.onChange,placeholder:"Select your university",emptyText:"Searching institutions..."})}),(0,b.jsx)(g.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12",children:[(0,b.jsx)(g.FormField,{control:R.control,name:"country",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"flex flex-col space-y-3",children:[(0,b.jsx)(g.FormLabel,{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:"Country"}),(0,b.jsx)(C.Combobox,{options:y.countries.map(a=>({label:a.name,value:a.name})),value:a.value,onChange:b=>{a.onChange(b);let c=(0,D.getCurrencyByCountry)(b);c&&R.setValue("currency",c),R.setValue("state","")},placeholder:"Select country"}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:R.control,name:"state",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"flex flex-col space-y-3",children:[(0,b.jsx)(g.FormLabel,{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:"State/Province"}),(0,b.jsx)(C.Combobox,{options:y.countries.find(a=>a.name===R.watch("country"))?.states.map(a=>({label:a.name,value:a.name}))||[],value:a.value,onChange:a.onChange,placeholder:"Select state",disabled:!R.watch("country")}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:R.control,name:"currency",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"space-y-3",children:[(0,b.jsx)(g.FormLabel,{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:"Currency Preference"}),(0,b.jsxs)(p.Select,{onValueChange:a.onChange,value:a.value||"USD",children:[(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(p.SelectTrigger,{className:"h-14 rounded-2xl border-2 bg-muted/10 font-bold",children:(0,b.jsx)(p.SelectValue,{placeholder:"USD"})})}),(0,b.jsxs)(p.SelectContent,{className:"rounded-2xl border-none shadow-3xl p-2",children:[(0,b.jsx)(p.SelectItem,{value:"USD",className:"rounded-xl py-3 font-bold",children:"USD - US Dollar"}),(0,b.jsx)(p.SelectItem,{value:"NGN",className:"rounded-xl py-3 font-bold",children:"NGN - Nigerian Naira"}),(0,b.jsx)(p.SelectItem,{value:"GHS",className:"rounded-xl py-3 font-bold",children:"GHS - Ghanaian Cedi"}),(0,b.jsx)(p.SelectItem,{value:"KES",className:"rounded-xl py-3 font-bold",children:"KES - Kenyan Shilling"}),(0,b.jsx)(p.SelectItem,{value:"GBP",className:"rounded-xl py-3 font-bold",children:"GBP - British Pound"}),(0,b.jsx)(p.SelectItem,{value:"EUR",className:"rounded-xl py-3 font-bold",children:"EUR - Euro"})]})]}),(0,b.jsx)(g.FormMessage,{})]})})]}),(0,b.jsx)("div",{className:"pt-8 border-t border-muted/10",children:(0,b.jsx)(f.Button,{type:"submit",size:"lg",className:"h-16 px-12 rounded-[1.25rem] font-black text-lg shadow-xl shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-1 transition-all",children:"Save Changes"})})]})})})]})}),(0,b.jsx)(j.TabsContent,{value:"settings",className:"space-y-10 outline-none animate-in fade-in slide-in-from-bottom-4 duration-500",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-10",children:[(0,b.jsxs)(i.Card,{className:"border-none bg-white shadow-xl shadow-black/[0.02] rounded-[2.5rem]",children:[(0,b.jsxs)(i.CardHeader,{className:"p-10",children:[(0,b.jsx)(i.CardTitle,{className:"text-2xl font-black",children:"Security"}),(0,b.jsx)(i.CardDescription,{className:"text-lg font-medium text-muted-foreground/60",children:"Manage your password and authentication."})]}),(0,b.jsx)(i.CardContent,{className:"p-10 pt-0",children:(0,b.jsx)(g.Form,{...S,children:(0,b.jsxs)("form",{onSubmit:S.handleSubmit(function(a){console.log("Password change request:",a),H({title:"Feature Not Implemented",description:"Password changes are not yet available.",variant:"destructive"})}),className:"space-y-8",children:[(0,b.jsx)(g.FormField,{control:S.control,name:"currentPassword",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"space-y-3",children:[(0,b.jsx)(g.FormLabel,{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:"Current Password"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{type:"password",placeholder:"••••••••",className:"h-14 rounded-2xl border-2 bg-muted/10 font-bold",...a})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,b.jsx)(g.FormField,{control:S.control,name:"newPassword",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"space-y-3",children:[(0,b.jsx)(g.FormLabel,{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:"New Password"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{type:"password",placeholder:"••••••••",className:"h-14 rounded-2xl border-2 bg-muted/10 font-bold",...a})}),(0,b.jsx)(g.FormMessage,{})]})}),(0,b.jsx)(g.FormField,{control:S.control,name:"confirmPassword",render:({field:a})=>(0,b.jsxs)(g.FormItem,{className:"space-y-3",children:[(0,b.jsx)(g.FormLabel,{className:"text-sm font-black uppercase tracking-widest text-muted-foreground",children:"Confirm New Password"}),(0,b.jsx)(g.FormControl,{children:(0,b.jsx)(h.Input,{type:"password",placeholder:"••••••••",className:"h-14 rounded-2xl border-2 bg-muted/10 font-bold",...a})}),(0,b.jsx)(g.FormMessage,{})]})})]}),(0,b.jsx)(f.Button,{type:"submit",className:"h-14 rounded-2xl px-10 font-bold border-2",children:"Update Security"})]})})})]}),(0,b.jsxs)(i.Card,{className:"border-none bg-white shadow-xl shadow-black/[0.02] rounded-[2.5rem]",children:[(0,b.jsxs)(i.CardHeader,{className:"p-10",children:[(0,b.jsx)(i.CardTitle,{className:"text-2xl font-black",children:"Preferences"}),(0,b.jsx)(i.CardDescription,{className:"text-lg font-medium text-muted-foreground/60",children:"Control your digital footprint and notifications."})]}),(0,b.jsxs)(i.CardContent,{className:"p-10 pt-0 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 rounded-[1.5rem] bg-muted/10 border-2",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h4",{className:"font-black text-lg",children:"Activity Notifications"}),(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground/60",children:"Stay informed about request status and messages."})]}),(0,b.jsx)(n.Switch,{defaultChecked:!0,className:"data-[state=checked]:bg-primary"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 rounded-[1.5rem] bg-muted/10 border-2",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h4",{className:"font-black text-lg",children:"Marketing & Updates"}),(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground/60",children:"Receive news about new features and regions."})]}),(0,b.jsx)(n.Switch,{className:"data-[state=checked]:bg-primary"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-10",children:[(0,b.jsx)(i.Card,{className:"border-2 border-primary/20 bg-primary/5 rounded-[2.5rem] overflow-hidden",children:(0,b.jsxs)(i.CardContent,{className:"p-10 text-center space-y-6",children:[(0,b.jsx)("div",{className:"h-16 w-16 mx-auto bg-white rounded-3xl shadow-xl flex items-center justify-center",children:(0,b.jsx)(m.User,{className:"h-8 w-8 text-primary"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h4",{className:"font-black text-xl",children:"Privacy Control"}),(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground/80 leading-relaxed",children:'"Your data is encrypted and secure. Review our privacy policy to learn how we protect your journey."'})]})]})}),(0,b.jsxs)(i.Card,{className:"border-2 border-destructive/20 bg-destructive/5 rounded-[2.5rem] overflow-hidden",children:[(0,b.jsx)(i.CardHeader,{className:"p-10 pb-4",children:(0,b.jsx)(i.CardTitle,{className:"text-destructive font-black",children:"Danger Zone"})}),(0,b.jsxs)(i.CardContent,{className:"p-10 pt-0 space-y-6",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground/80 leading-relaxed",children:"Once you delete your account, there is no going back. Please be certain."}),(0,b.jsxs)(o.AlertDialog,{children:[(0,b.jsx)(o.AlertDialogTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"destructive",className:"w-full h-14 rounded-2xl font-bold shadow-lg shadow-destructive/10",children:"Terminate Account"})}),(0,b.jsxs)(o.AlertDialogContent,{className:"rounded-[2.5rem] p-10 border-none shadow-3xl",children:[(0,b.jsxs)(o.AlertDialogHeader,{className:"space-y-4",children:[(0,b.jsx)(o.AlertDialogTitle,{className:"text-3xl font-black",children:"Hold on!"}),(0,b.jsx)(o.AlertDialogDescription,{className:"text-lg font-medium leading-relaxed",children:"Are you absolutely sure you want to leave us? This will permanently delete your profile, booking history, and all account data."})]}),(0,b.jsxs)(o.AlertDialogFooter,{className:"pt-8 gap-4",children:[(0,b.jsx)(o.AlertDialogCancel,{className:"h-14 rounded-2xl font-bold border-2",children:"I changed my mind"}),(0,b.jsx)(o.AlertDialogAction,{className:"h-14 rounded-2xl font-bold bg-destructive hover:bg-destructive/90 text-white",children:"Yes, terminate account"})]})]})]})]})]})]})]})})]}),(0,b.jsx)("input",{ref:N,type:"file",accept:"image/*",className:"hidden",onChange:T})]}):(0,b.jsx)("div",{children:"Please log in to view your account."})}a.s(["default",()=>G],52191)}];

//# sourceMappingURL=src_app_student_account_page_tsx_c8ef9324._.js.map