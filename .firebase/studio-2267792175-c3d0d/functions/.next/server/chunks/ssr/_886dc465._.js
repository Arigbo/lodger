module.exports=[54243,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33441),e=a.i(37539),f=a.i(15618),g=a.i(23690),h=a.i(99570),i=a.i(19622),j=a.i(99209),k=a.i(14574),l=a.i(66718),m=a.i(70430);a.i(79597);var n=a.i(36505);a.i(69387);var o=a.i(60574),p=a.i(54614),q=a.i(5975),r=a.i(33937);function s({value:a,onChange:s,placeholder:t="Select university...",emptyText:u="School not found.",className:v,disabled:w=!1}){let[x,y]=c.useState(!1),[z,A]=c.useState([]),[B,C]=c.useState(""),[D,E]=c.useState(!1),F=(0,n.useFirestore)(),{toast:G}=(0,p.useToast)(),[H,I]=c.useState(!1),[J,K]=c.useState(""),[L,M]=c.useState(""),[N,O]=c.useState(""),[P,Q]=c.useState(""),[R,S]=c.useState(!1);c.useEffect(()=>{if(!F)return;let a=async()=>{E(!0);try{let a,b=(0,o.collection)(F,"schools");a=B.trim()?(0,o.query)(b,(0,o.orderBy)("name"),(0,o.startAt)(B),(0,o.endAt)(B+"ï£¿"),(0,o.limit)(20)):(0,o.query)(b,(0,o.orderBy)("name"),(0,o.limit)(20));let c=(await (0,o.getDocs)(a)).docs.map(a=>({id:a.id,value:a.data().name,label:a.data().name}));A(c)}catch(a){console.error("Error fetching schools:",a)}finally{E(!1)}},b=setTimeout(()=>{a()},300);return()=>clearTimeout(b)},[B,F]);let T=async()=>{if(!J||!N||!L)return void G({variant:"destructive",title:"Missing Fields",description:"Please fill in Name, City, and Country."});if(!F)return void G({variant:"destructive",title:"System Error",description:"Database connection not available."});S(!0);try{let a=(0,o.collection)(F,"schools");await (0,o.addDoc)(a,{name:J,city:L,country:N,state:P||null,createdAt:new Date().toISOString()}),s(J),C(""),I(!1),K(""),M(""),Q(""),O(""),G({title:"School Added",description:`${J} has been added to our database.`})}catch(a){console.error("Error adding school:",a),G({variant:"destructive",title:"Error",description:"Failed to add school. Please try again."})}finally{S(!1)}},U=c.useMemo(()=>N?(r.countries.find(a=>a.name===N)?.states||[]).map(a=>a.name):[],[N]);return(0,b.jsxs)(k.Dialog,{open:H,onOpenChange:I,children:[(0,b.jsxs)(j.Popover,{open:x,onOpenChange:y,modal:!1,children:[(0,b.jsx)(j.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"outline",role:"combobox","aria-expanded":x,className:(0,g.cn)("w-full justify-between",v,!a&&"text-muted-foreground"),disabled:w,children:[a||t,(0,b.jsx)(e.ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,b.jsx)(j.PopoverContent,{className:"w-[--radix-popover-trigger-width] p-0 z-[300]",onOpenAutoFocus:a=>a.preventDefault(),children:(0,b.jsxs)(i.Command,{shouldFilter:!1,children:[(0,b.jsx)(i.CommandInput,{placeholder:"Search university...",value:B,onValueChange:C}),(0,b.jsxs)(i.CommandList,{children:[(0,b.jsxs)(i.CommandEmpty,{className:"p-2",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:u}),(0,b.jsxs)(h.Button,{size:"sm",variant:"secondary",className:"w-full text-xs h-7",onClick:()=>{K(B),y(!1),I(!0)},children:[(0,b.jsx)(f.Plus,{className:"mr-1 h-3 w-3"}),' Add "',B||"New School",'"']})]}),(0,b.jsx)(i.CommandGroup,{children:z.map(c=>(0,b.jsxs)(i.CommandItem,{value:c.label,onPointerDown:a=>{a.preventDefault()},onSelect:b=>{s(b===a?"":b),y(!1)},onClick:()=>{s(c.label===a?"":c.label),y(!1)},children:[(0,b.jsx)(d.Check,{className:(0,g.cn)("mr-2 h-4 w-4",a===c.value?"opacity-100":"opacity-0")}),c.label]},c.id))})]})]})})]}),(0,b.jsxs)(k.DialogContent,{className:"sm:max-w-md w-[95vw] border-2 shadow-lg",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Add New School"}),(0,b.jsx)(k.DialogDescription,{children:"Can't find your university? Add it to our database."})]}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(m.Label,{htmlFor:"name",children:"University Name"}),(0,b.jsx)(l.Input,{id:"name",value:J,onChange:a=>K(a.target.value),placeholder:"e.g. University of Example"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(m.Label,{children:"Country"}),(0,b.jsx)(q.Combobox,{options:r.countries.map(a=>({label:a.name,value:a.name})),value:N,onChange:O,placeholder:"Select Country"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(m.Label,{children:"State / Province"}),(0,b.jsx)(q.Combobox,{options:U.map(a=>({label:a,value:a})),value:P,onChange:Q,placeholder:"Select State",disabled:!N||0===U.length})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(m.Label,{htmlFor:"city",children:"City"}),(0,b.jsx)(l.Input,{id:"city",value:L,onChange:a=>M(a.target.value),placeholder:"e.g. London"})]})]}),(0,b.jsxs)(k.DialogFooter,{children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>I(!1),disabled:R,children:"Cancel"}),(0,b.jsx)(h.Button,{onClick:T,disabled:R,children:R?"Adding...":"Add School"})]})]})]})}a.s(["SchoolCombobox",()=>s])},99209,a=>{"use strict";let b,c,d;var e=a.i(87924),f=a.i(72131),g=a.i(7554),h=a.i(70121),i=a.i(50104),j=a.i(96743),k=a.i(86228),l=a.i(22297),m=a.i(92843),n=a.i(4691),o=a.i(92616),p=a.i(77192),q=a.i(30553),r=Symbol("radix.slottable");function s(a){return f.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===r}var t=a.i(25152),u=a.i(41852),v=a.i(52081),w="Popover",[x,y]=(0,i.createContextScope)(w,[n.createPopperScope]),z=(0,n.createPopperScope)(),[A,B]=x(w),C=a=>{let{__scopePopover:b,children:c,open:d,defaultOpen:g,onOpenChange:h,modal:i=!1}=a,j=z(b),k=f.useRef(null),[l,o]=f.useState(!1),[p,q]=(0,t.useControllableState)({prop:d,defaultProp:g??!1,onChange:h,caller:w});return(0,e.jsx)(n.Root,{...j,children:(0,e.jsx)(A,{scope:b,contentId:(0,m.useId)(),triggerRef:k,open:p,onOpenChange:q,onOpenToggle:f.useCallback(()=>q(a=>!a),[q]),hasCustomAnchor:l,onCustomAnchorAdd:f.useCallback(()=>o(!0),[]),onCustomAnchorRemove:f.useCallback(()=>o(!1),[]),modal:i,children:c})})};C.displayName=w;var D="PopoverAnchor";f.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,g=B(D,c),h=z(c),{onCustomAnchorAdd:i,onCustomAnchorRemove:j}=g;return f.useEffect(()=>(i(),()=>j()),[i,j]),(0,e.jsx)(n.Anchor,{...h,...d,ref:b})}).displayName=D;var E="PopoverTrigger",F=f.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,f=B(E,c),i=z(c),j=(0,h.useComposedRefs)(b,f.triggerRef),k=(0,e.jsx)(q.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":f.open,"aria-controls":f.contentId,"data-state":R(f.open),...d,ref:j,onClick:(0,g.composeEventHandlers)(a.onClick,f.onOpenToggle)});return f.hasCustomAnchor?k:(0,e.jsx)(n.Anchor,{asChild:!0,...i,children:k})});F.displayName=E;var G="PopoverPortal",[H,I]=x(G,{forceMount:void 0}),J=a=>{let{__scopePopover:b,forceMount:c,children:d,container:f}=a,g=B(G,b);return(0,e.jsx)(H,{scope:b,forceMount:c,children:(0,e.jsx)(p.Presence,{present:c||g.open,children:(0,e.jsx)(o.Portal,{asChild:!0,container:f,children:d})})})};J.displayName=G;var K="PopoverContent",L=f.forwardRef((a,b)=>{let c=I(K,a.__scopePopover),{forceMount:d=c.forceMount,...f}=a,g=B(K,a.__scopePopover);return(0,e.jsx)(p.Presence,{present:d||g.open,children:g.modal?(0,e.jsx)(N,{...f,ref:b}):(0,e.jsx)(O,{...f,ref:b})})});L.displayName=K;var M=((d=f.forwardRef((a,b)=>{let{children:c,...d}=a;if(f.isValidElement(c)){var e;let a,g,i=(e=c,(g=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(g=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==f.Fragment&&(j.ref=b?(0,h.composeRefs)(b,i):i),f.cloneElement(c,j)}return f.Children.count(c)>1?f.Children.only(null):null})).displayName="PopoverContent.RemoveScroll.SlotClone",b=d,(c=f.forwardRef((a,c)=>{let{children:d,...g}=a,h=f.Children.toArray(d),i=h.find(s);if(i){let a=i.props.children,d=h.map(b=>b!==i?b:f.Children.count(a)>1?f.Children.only(null):f.isValidElement(a)?a.props.children:null);return(0,e.jsx)(b,{...g,ref:c,children:f.isValidElement(a)?f.cloneElement(a,void 0,d):null})}return(0,e.jsx)(b,{...g,ref:c,children:d})})).displayName="PopoverContent.RemoveScroll.Slot",c),N=f.forwardRef((a,b)=>{let c=B(K,a.__scopePopover),d=f.useRef(null),i=(0,h.useComposedRefs)(b,d),j=f.useRef(!1);return f.useEffect(()=>{let a=d.current;if(a)return(0,u.hideOthers)(a)},[]),(0,e.jsx)(v.RemoveScroll,{as:M,allowPinchZoom:!0,children:(0,e.jsx)(P,{...a,ref:i,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,g.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),j.current||c.triggerRef.current?.focus()}),onPointerDownOutside:(0,g.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;j.current=2===b.button||c},{checkForDefaultPrevented:!1}),onFocusOutside:(0,g.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),O=f.forwardRef((a,b)=>{let c=B(K,a.__scopePopover),d=f.useRef(!1),g=f.useRef(!1);return(0,e.jsx)(P,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(d.current||c.triggerRef.current?.focus(),b.preventDefault()),d.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(d.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let e=b.target;c.triggerRef.current?.contains(e)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),P=f.forwardRef((a,b)=>{let{__scopePopover:c,trapFocus:d,onOpenAutoFocus:f,onCloseAutoFocus:g,disableOutsidePointerEvents:h,onEscapeKeyDown:i,onPointerDownOutside:m,onFocusOutside:o,onInteractOutside:p,...q}=a,r=B(K,c),s=z(c);return(0,k.useFocusGuards)(),(0,e.jsx)(l.FocusScope,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:f,onUnmountAutoFocus:g,children:(0,e.jsx)(j.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:h,onInteractOutside:p,onEscapeKeyDown:i,onPointerDownOutside:m,onFocusOutside:o,onDismiss:()=>r.onOpenChange(!1),children:(0,e.jsx)(n.Content,{"data-state":R(r.open),role:"dialog",id:r.contentId,...s,...q,ref:b,style:{...q.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Q="PopoverClose";function R(a){return a?"open":"closed"}f.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,f=B(Q,c);return(0,e.jsx)(q.Primitive.button,{type:"button",...d,ref:b,onClick:(0,g.composeEventHandlers)(a.onClick,()=>f.onOpenChange(!1))})}).displayName=Q,f.forwardRef((a,b)=>{let{__scopePopover:c,...d}=a,f=z(c);return(0,e.jsx)(n.Arrow,{...f,...d,ref:b})}).displayName="PopoverArrow";var S=a.i(23690);let T=f.forwardRef(({className:a,align:b="center",sideOffset:c=4,...d},f)=>(0,e.jsx)(J,{children:(0,e.jsx)(L,{ref:f,align:b,sideOffset:c,className:(0,S.cn)("z-[300] w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})}));T.displayName=L.displayName,a.s(["Popover",()=>C,"PopoverContent",()=>T,"PopoverTrigger",()=>F],99209)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)}];

//# sourceMappingURL=_886dc465._.js.map