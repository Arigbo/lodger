{"version":3,"sources":["../../../../src/app/student/leases/%5Bid%5D/page.tsx","../../../../node_modules/lucide-react/src/icons/shield-alert.ts"],"sourcesContent":["\r\n'use client';\r\nimport React from 'react';\r\nimport { notFound, useParams } from 'next/navigation';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { format } from 'date-fns';\r\nimport { Signature, CheckCircle2, FileClock, Hourglass, Check, DollarSign, Download, Printer, ShieldAlert, FileText } from 'lucide-react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { useUser, useFirestore, useDoc, useMemoFirebase } from '@/firebase';\r\nimport PaymentDialog from '@/components/payment-dialog';\r\nimport type { LeaseAgreement, Property, UserProfile as User } from '@/types';\r\nimport { doc, updateDoc, addDoc, collection, serverTimestamp } from 'firebase/firestore';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport Loading from '@/app/loading';\r\nimport { sendNotification } from '@/lib/notifications';\r\nimport { formatPrice, cn } from '@/utils';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Loader2 } from 'lucide-react';\r\nimport { useState } from 'react';\r\n\r\nexport default function ViewStudentLeasePage() {\r\n    const params = useParams();\r\n    const id = Array.isArray(params.id) ? params.id[0] : params.id;\r\n    const { user: currentUser, isUserLoading } = useUser();\r\n    const firestore = useFirestore();\r\n    const router = useRouter();\r\n    const { toast } = useToast();\r\n\r\n    const leaseRef = useMemoFirebase(() => id ? doc(firestore, 'leaseAgreements', id) : null, [firestore, id]);\r\n    const { data: lease, isLoading: isLeaseLoading } = useDoc<LeaseAgreement>(leaseRef);\r\n\r\n    const landlordRef = useMemoFirebase(() => lease ? doc(firestore, 'users', lease.landlordId) : null, [firestore, lease]);\r\n    const { data: landlord, isLoading: isLandlordLoading } = useDoc<User>(landlordRef);\r\n\r\n    const tenantRef = useMemoFirebase(() => lease ? doc(firestore, 'users', lease.tenantId) : null, [firestore, lease]);\r\n    const { data: tenant, isLoading: isTenantLoading } = useDoc<User>(tenantRef);\r\n\r\n    const propertyRef = useMemoFirebase(() => lease ? doc(firestore, 'properties', lease.propertyId) : null, [firestore, lease]);\r\n    const { data: property, isLoading: isPropertyLoading } = useDoc<Property>(propertyRef);\r\n\r\n    const isLoading = isUserLoading || isLeaseLoading || isLandlordLoading || isTenantLoading || isPropertyLoading;\r\n\r\n    React.useEffect(() => {\r\n        console.log('Lease Page Debug:', {\r\n            id,\r\n            leaseExists: !!lease,\r\n            currentUserUid: currentUser?.uid,\r\n            leaseTenantId: lease?.tenantId,\r\n            match: currentUser?.uid === lease?.tenantId\r\n        });\r\n    }, [id, lease, currentUser]);\r\n\r\n    const [isPaymentOpen, setIsPaymentOpen] = useState(false);\r\n    const [monthsToPay, setMonthsToPay] = useState(1);\r\n\r\n    if (isLoading) {\r\n        return <Loading />;\r\n    }\r\n\r\n    if (!lease || !currentUser || (currentUser.uid !== lease.tenantId)) {\r\n        console.warn(\"Lease not found or access denied\", {\r\n            leaseId: id,\r\n            leaseExists: !!lease,\r\n            currentUserId: currentUser?.uid,\r\n            leaseTenantId: lease?.tenantId\r\n        });\r\n\r\n        // Debug UI to help user identify the issue\r\n        return (\r\n            <div className=\"container mx-auto max-w-2xl py-20 px-4 text-center\">\r\n                <div className=\"rounded-lg border border-destructive/50 bg-destructive/10 p-8\">\r\n                    <h1 className=\"text-2xl font-bold text-destructive mb-4\">Unable to Load Lease</h1>\r\n                    <p className=\"mb-6 text-muted-foreground\">\r\n                        We couldn't display this lease. Here is the diagnostic info:\r\n                    </p>\r\n                    <div className=\"text-left bg-black/80 text-green-400 p-4 rounded-md font-mono text-xs overflow-auto mb-6\">\r\n                        <p>Lease ID in URL: {id}</p>\r\n                        <p>Lease Document Found: {lease ? \"YES\" : \"NO\"}</p>\r\n                        <p>User Logged In: {currentUser ? \"YES\" : \"NO\"}</p>\r\n                        {currentUser && lease && (\r\n                            <>\r\n                                <p>Your User ID: {currentUser.uid}</p>\r\n                                <p>Lease Tenant ID: {lease.tenantId}</p>\r\n                                <p>Match: {currentUser.uid === lease.tenantId ? \"YES\" : \"FAIL\"}</p>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                    <Button asChild variant=\"outline\">\r\n                        <Link href=\"/student\">Return to Dashboard</Link>\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handlePaymentSuccess = async (details: { months: number, method: string, amount: number, transactionId?: string }) => {\r\n        try {\r\n            if (!leaseRef) return;\r\n\r\n            const isOffline = details.method === 'Offline';\r\n\r\n            if (isOffline) {\r\n                // For offline, we don't activate yet, just record the selection\r\n                await updateDoc(leaseRef, {\r\n                    paymentMethod: 'offline',\r\n                    paymentConfirmed: false,\r\n                    offlinePaymentAmount: details.amount,\r\n                    offlinePaymentMonths: details.months\r\n                });\r\n\r\n                // Send notification for offline verification\r\n                await sendNotification({\r\n                    toUserId: lease.landlordId,\r\n                    type: 'OFFLINE_PAYMENT_PENDING',\r\n                    firestore: firestore,\r\n                    propertyName: property?.title || 'Property',\r\n                    transactionId: details.transactionId,\r\n                    link: `/landlord/requests` // Fallback\r\n                });\r\n\r\n                toast({\r\n                    title: \"Offline Payment Recorded\",\r\n                    description: \"Waiting for landlord to confirm payment receipt. Your lease will be activated once verified.\"\r\n                });\r\n            } else {\r\n                // For Stripe (once implemented), we activate immediately\r\n                await updateDoc(leaseRef, {\r\n                    status: 'active',\r\n                    paymentMethod: 'stripe',\r\n                    paymentConfirmed: true\r\n                });\r\n\r\n                if (propertyRef) {\r\n                    await updateDoc(propertyRef, {\r\n                        status: 'occupied',\r\n                        currentTenantId: currentUser.uid,\r\n                        leaseStartDate: lease.startDate\r\n                    });\r\n\r\n                    // Notify other applicants about the property being occupied\r\n                    try {\r\n                        await fetch('/api/notify-applicants', {\r\n                            method: 'POST',\r\n                            headers: { 'Content-Type': 'application/json' },\r\n                            body: JSON.stringify({\r\n                                propertyId: lease.propertyId,\r\n                                winnerTenantId: currentUser.uid,\r\n                                propertyTitle: property?.title\r\n                            })\r\n                        });\r\n                    } catch (err) {\r\n                        console.error(\"Failed to notify other applicants\", err);\r\n                    }\r\n                }\r\n\r\n                toast({\r\n                    title: \"Payment Successful!\",\r\n                    description: \"Your lease is now ACTIVE. Welcome to your new home!\"\r\n                });\r\n            }\r\n\r\n            setIsPaymentOpen(false);\r\n            router.refresh();\r\n        } catch (error) {\r\n            console.error(\"Post-payment update failed:\", error);\r\n            toast({ variant: \"destructive\", title: \"Error\", description: \"Payment succeeded but status update failed. Contact support.\" });\r\n        }\r\n    };\r\n\r\n\r\n    const handleSignLease = async () => {\r\n        if (!leaseRef) return;\r\n        try {\r\n            // Inject Tenant Name into Lease\r\n            const signedName = tenant?.legalName || tenant?.name || \"Tenant\";\r\n            const dateStr = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });\r\n\r\n            let updatedLeaseText = lease.leaseText;\r\n\r\n            // Replace Tenant: Nill globally (top and bottom)\r\n            updatedLeaseText = updatedLeaseText.replace(/Tenant:\\s*Nill/g, `Tenant: ${signedName}`);\r\n\r\n            // Replace Date: Nill specifically following Tenant line\r\n            updatedLeaseText = updatedLeaseText.replace(/(Tenant:[^\\n]*\\n\\s*Date:\\s*)Nill/g, `$1${dateStr}`);\r\n\r\n            // Fallback: If no Nill pattern found (e.g. legacy lease), append signature\r\n            if (!updatedLeaseText.includes(`Tenant: ${signedName}`)) {\r\n                const signatureLine = `\\n\\nDigitally Signed by Tenant: ${signedName} on ${new Date().toLocaleString()}`;\r\n                updatedLeaseText = updatedLeaseText + signatureLine;\r\n            }\r\n\r\n            await updateDoc(leaseRef, {\r\n                tenantSigned: true,\r\n                leaseText: updatedLeaseText\r\n                // Do NOT set status 'active' yet. Wait for payment.\r\n            });\r\n\r\n            toast({\r\n                title: \"Lease Signed Successfully!\",\r\n                description: \"Signature recorded. Please proceed to payment.\"\r\n            });\r\n            // Open payment modal immediately\r\n            setIsPaymentOpen(true);\r\n        } catch (error: unknown) {\r\n            console.error(\"Error signing lease:\", error);\r\n            toast({\r\n                variant: \"destructive\",\r\n                title: \"Error\",\r\n                description: \"Could not sign the lease. Please try again.\"\r\n            })\r\n        }\r\n    };\r\n\r\n    const handleDownloadLease = () => {\r\n        if (!lease) return;\r\n        // Create a blob from the lease text\r\n        const element = document.createElement(\"a\");\r\n        const file = new Blob([lease.leaseText], { type: 'text/plain' });\r\n        element.href = URL.createObjectURL(file);\r\n        element.download = `Lease_Agreement_${property?.title.replace(/\\s+/g, '_')}_${format(new Date(), 'yyyy-MM-dd')}.txt`;\r\n        document.body.appendChild(element); // Required for this to work in FireFox\r\n        element.click();\r\n        document.body.removeChild(element);\r\n    };\r\n\r\n\r\n    const getStatusVariant = (status: 'active' | 'expired' | 'pending' | 'terminating') => {\r\n        switch (status) {\r\n            case 'active': return 'secondary';\r\n            case 'expired': return 'outline';\r\n            case 'pending': return 'default';\r\n            case 'terminating': return 'destructive';\r\n        }\r\n    };\r\n    const getStatusIcon = (status: 'active' | 'expired' | 'pending' | 'terminating') => {\r\n        switch (status) {\r\n            case 'active': return <CheckCircle2 className=\"h-5 w-5 text-green-600\" />;\r\n            case 'expired': return <FileClock className=\"h-5 w-5 text-muted-foreground\" />;\r\n            case 'pending': return <Hourglass className=\"h-5 w-5 text-primary\" />;\r\n            case 'terminating': return <ShieldAlert className=\"h-5 w-5 text-destructive\" />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-5xl mx-auto space-y-12 pb-32 animate-in fade-in duration-700\">\r\n            <style jsx global>{`\r\n                @media print {\r\n                    @page { margin: 2cm; }\r\n                    body * {\r\n                        visibility: hidden;\r\n                    }\r\n                    #lease-document, #lease-document * {\r\n                        visibility: visible;\r\n                    }\r\n                    #lease-document {\r\n                        position: absolute;\r\n                        left: 0;\r\n                        top: 0;\r\n                        width: 100%;\r\n                    }\r\n                }\r\n            `}</style>\r\n\r\n            {/* Premium Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-8 pb-8 border-b-4 border-foreground/5\">\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <div className={cn(\r\n                            \"p-2 rounded-xl bg-white shadow-lg border-2\",\r\n                            lease.status === 'active' ? \"border-green-500/20\" :\r\n                                lease.status === 'pending' ? \"border-primary/20\" : \"border-muted/20\"\r\n                        )}>\r\n                            {getStatusIcon(lease.status)}\r\n                        </div>\r\n                        <Badge variant={getStatusVariant(lease.status)} className=\"px-4 py-1 rounded-full text-[10px] font-black uppercase tracking-widest\">\r\n                            {lease.status}\r\n                        </Badge>\r\n                    </div>\r\n                    <h1 className=\"font-headline text-3xl md:text-5xl font-black tracking-tight text-foreground uppercase\">\r\n                        LEASE AGREEMENT\r\n                    </h1>\r\n                    <p className=\"text-lg text-muted-foreground font-medium\">\r\n                        Lease Agreement for <Link href={`/student/properties/${property?.id}`} className=\"text-primary hover:underline\">#{property?.title}</Link>\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex flex-wrap gap-3\">\r\n                    <Button variant=\"outline\" className=\"h-14 rounded-2xl px-6 font-black text-xs uppercase tracking-widest gap-2 bg-white hover:bg-muted/50 transition-all border-2\" onClick={handleDownloadLease}>\r\n                        <Download className=\"h-4 w-4\" /> DOWNLOAD\r\n                    </Button>\r\n                    <Button variant=\"outline\" className=\"h-14 rounded-2xl px-6 font-black text-xs uppercase tracking-widest gap-2 bg-white hover:bg-muted/50 transition-all border-2\" onClick={() => window.print()}>\r\n                        <Printer className=\"h-4 w-4\" /> PRINT\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-10\">\r\n                {/* Main Content: The Document */}\r\n                <div className=\"lg:col-span-2 space-y-10\">\r\n                    <div className=\"relative group\">\r\n                        {/* Decorative Background for \"Paper\" effect */}\r\n                        <div className=\"absolute inset-0 bg-muted/20 -rotate-1 rounded-[3rem] -z-10 transition-transform group-hover:rotate-0\" />\r\n                        <div className=\"absolute inset-0 bg-primary/5 rotate-1 rounded-[3rem] -z-10 transition-transform group-hover:rotate-0\" />\r\n\r\n                        <div className=\"relative bg-white border-2 border-foreground/5 shadow-2xl rounded-[3rem] p-8 md:p-12 min-h-[600px] flex flex-col\">\r\n                            <div className=\"flex justify-between items-start mb-12\">\r\n                                <div className=\"space-y-1\">\r\n                                    <p className=\"text-[10px] font-black text-muted-foreground/40 uppercase tracking-[0.2em]\">AGREEMENT TYPE</p>\r\n                                    <p className=\"font-mono text-xs opacity-60\">Fixed Term Residential Lease</p>\r\n                                </div>\r\n                                <div className=\"text-right\">\r\n                                    <p className=\"text-[10px] font-black text-muted-foreground/40 uppercase tracking-[0.2em]\">DATE</p>\r\n                                    <p className=\"font-bold text-sm\">{format(new Date(lease.startDate), 'MMMM dd, yyyy')}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <Separator className=\"mb-10 opacity-10\" />\r\n\r\n                            <h2 className=\"text-xl font-black uppercase tracking-widest mb-8 text-center decoration-primary/20 underline underline-offset-8 decoration-4\">\r\n                                LEASE TERMS & CONDITIONS\r\n                            </h2>\r\n\r\n                            <div id=\"lease-document\" className=\"prose prose-sm md:prose-base max-w-none whitespace-pre-wrap leading-relaxed text-foreground/80 flex-grow\">\r\n                                {lease.leaseText}\r\n                            </div>\r\n\r\n                            <Separator className=\"my-12 opacity-10\" />\r\n\r\n                            {/* Formal Signature Section */}\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-12 mt-auto pt-8 border-t-2 border-dotted border-muted/30\">\r\n                                <div className=\"space-y-4\">\r\n                                    <p className=\"text-[10px] font-black text-muted-foreground/60 uppercase tracking-widest\">LANDLORD SIGNATURE</p>\r\n                                    <div className=\"h-24 bg-muted/10 rounded-3xl border-2 border-dashed border-muted/30 flex items-center justify-center relative overflow-hidden\">\r\n                                        {lease.landlordSigned ? (\r\n                                            <div className=\"text-center animate-in zoom-in duration-500\">\r\n                                                <p className=\"text-2xl text-primary font-bold opacity-80 -rotate-3\">{landlord?.name}</p>\r\n                                                <Badge variant=\"secondary\" className=\"mt-2 text-[9px] font-black uppercase tracking-tighter bg-green-500/10 text-green-600 border-none\">VERIFIED SIGNATURE</Badge>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"flex flex-col items-center gap-1 opacity-20\">\r\n                                                <Hourglass className=\"h-6 w-6\" />\r\n                                                <p className=\"text-[8px] font-black uppercase tracking-widest\">PENDING APPROVAL</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    <p className=\"text-center text-xs font-bold text-muted-foreground/40\">Executed by: {landlord?.name || 'Authorized Representative'}</p>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-4\">\r\n                                    <p className=\"text-[10px] font-black text-muted-foreground/60 uppercase tracking-widest\">TENANT SIGNATURE</p>\r\n                                    <div className=\"h-24 bg-muted/10 rounded-3xl border-2 border-dashed border-muted/30 flex items-center justify-center relative overflow-hidden\">\r\n                                        {lease.tenantSigned ? (\r\n                                            <div className=\"text-center animate-in zoom-in duration-500\">\r\n                                                <p className=\"text-2xl text-primary font-bold opacity-80 -rotate-3\">{tenant?.name}</p>\r\n                                                <Badge variant=\"secondary\" className=\"mt-2 text-[9px] font-black uppercase tracking-tighter bg-green-500/10 text-green-600 border-none\">VERIFIED SIGNATURE</Badge>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <div className=\"flex flex-col items-center gap-1 opacity-20\">\r\n                                                <Hourglass className=\"h-6 w-6\" />\r\n                                                <p className=\"text-[8px] font-black uppercase tracking-widest\">AWAITING EXECUTION</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                    <p className=\"text-center text-xs font-bold text-muted-foreground/40\">Executed by: {tenant?.name || 'Prospective Tenant'}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Sidebar: Metadata & Actions */}\r\n                <div className=\"space-y-10\">\r\n                    {/* Metadata Card */}\r\n                    <Card className=\"rounded-[2.5rem] border-2 border-foreground/5 shadow-xl bg-white overflow-hidden\">\r\n                        <CardHeader className=\"bg-primary/5 border-b-2 border-primary/10\">\r\n                            <CardTitle className=\"text-xs font-black uppercase tracking-widest flex items-center gap-2\">\r\n                                <FileText className=\"h-4 w-4\" /> LEASE DETAILS\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent className=\"p-8 space-y-8\">\r\n                            <div className=\"space-y-6\">\r\n                                <div className=\"flex justify-between items-center group\">\r\n                                    <div>\r\n                                        <p className=\"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1\">PROPERTY</p>\r\n                                        <p className=\"font-black text-sm uppercase group-hover:text-primary transition-colors truncate max-w-[150px]\">{property?.title}</p>\r\n                                    </div>\r\n                                    <div className=\"h-10 w-10 rounded-xl bg-muted/20 flex items-center justify-center\">\r\n                                        <CheckCircle2 className=\"h-5 w-5 opacity-20\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center group\">\r\n                                    <div>\r\n                                        <p className=\"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1\">LEASE TERM</p>\r\n                                        <p className=\"font-black text-sm uppercase truncate max-w-[150px]\">\r\n                                            {format(new Date(lease.startDate), 'MMM yy')} - {format(new Date(lease.endDate), 'MMM yy')}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"h-10 w-10 rounded-xl bg-muted/20 flex items-center justify-center\">\r\n                                        <FileClock className=\"h-5 w-5 opacity-20\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center group\">\r\n                                    <div>\r\n                                        <p className=\"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1\">MONTHLY RATE</p>\r\n                                        <p className=\"font-black text-2xl text-primary\">{formatPrice(property?.price || 0, property?.currency)}</p>\r\n                                    </div>\r\n                                    <div className=\"h-10 w-10 rounded-xl bg-green-500/10 flex items-center justify-center\">\r\n                                        <DollarSign className=\"h-5 w-5 text-green-600\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Action Card: Sign/Pay */}\r\n                    <div className=\"space-y-6\">\r\n                        {lease.status === 'pending' && !lease.tenantSigned ? (\r\n                            <div className=\"relative group overflow-hidden rounded-[2.5rem] bg-foreground text-white p-8 md:p-10 shadow-2xl space-y-8 animate-in slide-in-from-right duration-700\">\r\n                                <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-bl-[5rem] -mr-8 -mt-8 transition-all group-hover:scale-110\" />\r\n                                <div className=\"relative z-10 space-y-4\">\r\n                                    <h3 className=\"text-2xl font-black uppercase tracking-tight\">SIGN AGREEMENT</h3>\r\n                                    <p className=\"text-white/60 text-sm leading-relaxed\">\r\n                                        &quot;Your signature acknowledges full acceptance of the terms outlined in this agreement.&quot;\r\n                                    </p>\r\n                                    <Button className=\"w-full h-16 rounded-2xl bg-white text-foreground hover:bg-white/90 font-black text-sm uppercase tracking-widest gap-3 shadow-2xl transition-all hover:scale-105 active:scale-95\" onClick={handleSignLease}>\r\n                                        <Signature className=\"h-5 w-5\" /> SIGN DIGITALLY\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        ) : null}\r\n\r\n                        {lease.tenantSigned && lease.status === 'pending' && !lease.paymentMethod && (\r\n                            <div className=\"relative group overflow-hidden rounded-[2.5rem] bg-green-600 text-white p-8 md:p-10 shadow-2xl space-y-8 animate-in slide-in-from-right duration-700\">\r\n                                <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-bl-[5rem] -mr-8 -mt-8 transition-all group-hover:scale-110\" />\r\n                                <div className=\"relative z-10 space-y-6\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <h3 className=\"text-2xl font-black uppercase tracking-tight\">INITIAL PAYMENT</h3>\r\n                                        <p className=\"text-white/60 text-sm leading-relaxed\">\r\n                                            &quot;Finalize your status by securing the property through an initial payment.&quot;\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-6\">\r\n                                        <div className=\"space-y-2\">\r\n                                            <h3 className=\"text-xl font-black uppercase tracking-tight\">Activate Tenancy</h3>\r\n                                            <p className=\"text-white/60 text-sm leading-relaxed\">\r\n                                                &quot;Complete your payment to activate the lease agreement and receive your move-in instructions.&quot;\r\n                                            </p>\r\n                                        </div>\r\n\r\n                                        <Button className=\"w-full h-16 rounded-2xl bg-white text-primary hover:bg-white/90 font-black text-lg gap-3 shadow-2xl transition-all hover:scale-[1.02]\" onClick={() => setIsPaymentOpen(true)}>\r\n                                            <DollarSign className=\"h-6 w-6\" /> Pay\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {lease.paymentMethod === 'offline' && !lease.paymentConfirmed && (\r\n                            <div className=\"relative group overflow-hidden rounded-[2.5rem] bg-blue-600 text-white p-8 md:p-10 shadow-2xl space-y-8 animate-in slide-in-from-right duration-700\">\r\n                                <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-bl-[5rem] -mr-8 -mt-8 transition-all group-hover:scale-110\" />\r\n                                <div className=\"relative z-10 space-y-6 text-center\">\r\n                                    <div className=\"relative inline-block mx-auto\">\r\n                                        <div className=\"absolute inset-0 bg-white/20 blur-2xl rounded-full scale-150 animate-pulse\" />\r\n                                        <Hourglass className=\"h-14 w-14 text-white relative animate-bounce\" />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <h3 className=\"text-xl font-black uppercase tracking-tight\">MANUAL VERIFICATION</h3>\r\n                                        <p className=\"text-white/60 text-sm leading-relaxed\">\r\n                                            &quot;We are verifying your payment. Your lease will be activated shortly.&quot;\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {lease.status === 'active' && (\r\n                            <div className=\"relative group overflow-hidden rounded-[2.5rem] bg-white border-2 border-foreground/5 p-8 md:p-10 shadow-lg space-y-8 animate-in slide-in-from-right duration-700\">\r\n                                <div className=\"space-y-6\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <h3 className=\"text-xl font-black uppercase tracking-tight flex items-center gap-2\">\r\n                                            <DollarSign className=\"h-5 w-5 text-green-600\" /> Pay Rent\r\n                                        </h3>\r\n                                        <p className=\"text-muted-foreground text-sm leading-relaxed\">\r\n                                            Manage your monthly rental payments securely.\r\n                                        </p>\r\n                                    </div>\r\n                                    <Button className=\"w-full h-16 rounded-2xl bg-foreground text-white hover:bg-foreground/90 font-black text-lg gap-3 shadow-xl transition-all hover:scale-[1.02]\" onClick={() => setIsPaymentOpen(true)}>\r\n                                        Pay\r\n                                    </Button>\r\n                                    <p className=\"text-[10px] text-center font-bold text-muted-foreground/40 uppercase tracking-widest\">\r\n                                        Next Due Date: {format(new Date(), 'MMM dd, yyyy')}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <Link href=\"/student/leases\" className=\"block text-center\">\r\n                        <Button variant=\"ghost\" className=\"font-black text-[10px] uppercase tracking-[0.3em] hover:tracking-[0.4em] transition-all opacity-40 hover:opacity-100\">\r\n                            ‚Üê BACK TO LEASES\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            {property && currentUser && (\r\n                <PaymentDialog\r\n                    isOpen={isPaymentOpen}\r\n                    onClose={() => setIsPaymentOpen(false)}\r\n                    onPaymentSuccess={handlePaymentSuccess}\r\n                    amount={property.price}\r\n                    tenantName={currentUser.displayName || currentUser.email || ''}\r\n                    tenantId={currentUser.uid}\r\n                    landlordId={lease.landlordId}\r\n                    propertyId={lease.propertyId}\r\n                    currency={property.currency}\r\n                    destinationAccountId={landlord?.stripeAccountId}\r\n                    metadata={{ type: 'Lease Activation', leaseId: lease.id }}\r\n                />\r\n            )}\r\n        </div >\r\n    );\r\n}\r\n\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ShieldAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMTNjMCA1LTMuNSA3LjUtNy42NiA4Ljk1YTEgMSAwIDAgMS0uNjctLjAxQzcuNSAyMC41IDQgMTggNCAxM1Y2YTEgMSAwIDAgMSAxLTFjMiAwIDQuNS0xLjIgNi4yNC0yLjcyYTEuMTcgMS4xNyAwIDAgMSAxLjUyIDBDMTQuNTEgMy44MSAxNyA1IDE5IDVhMSAxIDAgMCAxIDEgMXoiIC8+CiAgPHBhdGggZD0iTTEyIDh2NCIgLz4KICA8cGF0aCBkPSJNMTIgMTZoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/shield-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ShieldAlert = createLucideIcon('ShieldAlert', [\n  [\n    'path',\n    {\n      d: 'M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z',\n      key: 'oel41y',\n    },\n  ],\n  ['path', { d: 'M12 8v4', key: '1got3b' }],\n  ['path', { d: 'M12 16h.01', key: '1drbdi' }],\n]);\n\nexport default ShieldAlert;\n"],"names":[],"mappings":"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","ignoreList":[1]}