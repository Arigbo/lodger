module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23690);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},63910,a=>{"use strict";let b=(0,a.i(70106).default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);a.s(["Building",()=>b],63910)},67453,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},52495,a=>{"use strict";let b=(0,a.i(70106).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],52495)},17755,a=>{"use strict";let b=(0,a.i(70106).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);a.s(["MoreHorizontal",()=>b],17755)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},62722,a=>{"use strict";let b=(0,a.i(70106).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],62722)},70977,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(35732),f=a.i(99570),g=a.i(86304),h=a.i(17755),i=a.i(79808),j=a.i(41710),k=a.i(92e3),l=a.i(67453),m=a.i(62722),n=a.i(63910),o=a.i(46842),p=a.i(41675),q=a.i(32860),r=a.i(52495),s=a.i(38246);a.i(79597);var t=a.i(36505),u=a.i(54614);a.i(69387);var v=a.i(60574),w=a.i(42816);function x(a,b){if(!a||0===a.length)return[];let c=[];for(let d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c}function y(){let{user:a,isUserLoading:y}=(0,t.useUser)(),z=(0,t.useFirestore)(),{toast:A}=(0,u.useToast)(),[B,C]=c.useState([]),[D,E]=c.useState(!0),F=async()=>{if(!a||!z)return;E(!0);let b=(0,v.query)((0,v.collection)(z,"maintenanceRequests"),(0,v.where)("landlordId","==",a.uid)),c=(await (0,v.getDocs)(b)).docs.map(a=>({id:a.id,...a.data()}));if(0===c.length){C([]),E(!1);return}let d=[...new Set(c.map(a=>a.tenantId))],e=[...new Set(c.map(a=>a.propertyId))],f=new Map,g=new Map;if(d.length>0)for(let a of x(d,30)){let b=(0,v.query)((0,v.collection)(z,"users"),(0,v.where)((0,v.documentId)(),"in",a));(await (0,v.getDocs)(b)).forEach(a=>f.set(a.id,{id:a.id,...a.data()}))}if(e.length>0)for(let a of x(e,30)){let b=(0,v.query)((0,v.collection)(z,"properties"),(0,v.where)((0,v.documentId)(),"in",a));(await (0,v.getDocs)(b)).forEach(a=>g.set(a.id,{id:a.id,...a.data()}))}C(c.map(a=>({...a,tenantName:f.get(a.tenantId)?.name||"Unknown Tenant",propertyName:g.get(a.propertyId)?.title||"Unknown Property"})).sort((a,b)=>new Date(b.requestDate).getTime()-new Date(a.requestDate).getTime())),E(!1)};c.useEffect(()=>{F()},[a,z]);let G=async(a,b)=>{try{let c=(0,v.doc)(z,"maintenanceRequests",a);await (0,v.updateDoc)(c,{status:b}),C(c=>c.map(c=>c.id===a?{...c,status:b}:c)),A({title:"Status Synchronized",description:`Request has been transitioned to ${b}.`})}catch(a){console.error("Error updating status:",a),A({variant:"destructive",title:"Protocol Failure",description:"Failed to update service status."})}};return y||D?(0,b.jsx)(w.default,{}):(0,b.jsxs)("div",{className:"space-y-16 pb-32 animate-in fade-in duration-1000",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-8 pb-8 border-b-4 border-foreground/5 px-2",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary animate-pulse"}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-muted-foreground/60",children:"Property Care"})]}),(0,b.jsxs)("h1",{className:"font-headline text-5xl md:text-7xl font-black tracking-tighter text-foreground uppercase leading-[0.9]",children:["MAINTENANCE ",(0,b.jsx)("br",{})," ",(0,b.jsx)("span",{className:"text-primary",children:"LOGISTICS"})]}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground font-medium mt-4",children:"Manage service requests and property upkeep."})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"bg-white px-8 py-5 rounded-[2rem] border-2 border-muted/10 shadow-sm flex flex-col justify-center min-w-[160px]",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-muted-foreground/60 mb-1",children:"Total Requests"}),(0,b.jsx)("p",{className:"text-3xl font-black tracking-tighter",children:B.length})]}),(0,b.jsxs)("div",{className:"bg-orange-600 text-white px-8 py-5 rounded-[2rem] shadow-xl shadow-orange-600/20 flex flex-col justify-center min-w-[160px]",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/60 mb-1",children:"Pending Tasks"}),(0,b.jsx)("p",{className:"text-3xl font-black tracking-tighter",children:B.filter(a=>"Pending"===a.status).length})]})]})]}),(0,b.jsxs)("div",{className:"space-y-10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 px-2",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(i.Wrench,{className:"h-5 w-5 text-primary"})}),(0,b.jsx)("h2",{className:"text-3xl font-black uppercase tracking-tight",children:"Active Maintenance"})]}),B.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 gap-8",children:B.map(a=>(0,b.jsx)(d.Card,{className:"group relative overflow-hidden rounded-[3rem] bg-white border-2 border-foreground/5 shadow-xl hover:shadow-3xl transition-all duration-500 p-8 md:p-10",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-10",children:[(0,b.jsxs)("div",{className:"lg:w-1/4 border-r-2 border-muted/5 pr-10 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(a=>{switch(a){case"Completed":return(0,b.jsx)(l.CheckCircle2,{className:"h-4 w-4 text-emerald-500"});case"In Progress":return(0,b.jsx)(j.Clock,{className:"h-4 w-4 text-primary animate-pulse"});case"Pending":return(0,b.jsx)(k.AlertCircle,{className:"h-4 w-4 text-orange-500"});case"Cancelled":return(0,b.jsx)(m.XCircle,{className:"h-4 w-4 text-muted-foreground"});default:return(0,b.jsx)(k.AlertCircle,{className:"h-4 w-4"})}})(a.status),(0,b.jsx)(g.Badge,{variant:"outline",className:"px-3 py-0.5 rounded-full text-[9px] font-black uppercase tracking-widest border-muted/20",children:a.status})]}),(0,b.jsx)("h3",{className:"text-2xl font-black uppercase tracking-tight group-hover:text-primary transition-colors leading-tight",children:a.title})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-lg bg-muted/20 flex items-center justify-center",children:(0,b.jsx)(p.Calendar,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[9px] font-black text-muted-foreground/40 uppercase tracking-widest",children:"Logged On"}),(0,b.jsx)("p",{className:"text-xs font-bold",children:new Date(a.requestDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-lg bg-muted/20 flex items-center justify-center",children:(0,b.jsx)(k.AlertCircle,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[9px] font-black text-muted-foreground/40 uppercase tracking-widest",children:"Priority Level"}),(0,b.jsx)(g.Badge,{variant:(a=>{switch(a){case"High":return"destructive";case"Medium":return"default";case"Low":return"secondary";default:return"outline"}})(a.priority),className:"h-4 px-2 text-[8px] font-black uppercase",children:a.priority})]})]})]})]}),(0,b.jsxs)("div",{className:"flex-1 space-y-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40",children:"Property"}),(0,b.jsxs)(s.default,{href:`/landlord/properties/${a.propertyId}`,className:"group/link flex items-center gap-2 text-xl font-black uppercase tracking-tight hover:text-primary transition-colors",children:[(0,b.jsx)(n.Building,{className:"h-5 w-5 opacity-40"})," ",a.propertyName," ",(0,b.jsx)(r.ExternalLink,{className:"h-3 w-3 opacity-0 group-hover/link:opacity-100 transition-opacity"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40",children:"Tenant"}),(0,b.jsxs)(s.default,{href:`/landlord/tenants/${a.tenantId}`,className:"group/link flex items-center gap-2 text-xl font-black uppercase tracking-tight hover:text-primary transition-colors",children:[(0,b.jsx)(o.User,{className:"h-5 w-5 opacity-40"})," ",a.tenantName," ",(0,b.jsx)(r.ExternalLink,{className:"h-3 w-3 opacity-0 group-hover/link:opacity-100 transition-opacity"})]})]})]}),(0,b.jsxs)("div",{className:"p-6 rounded-2xl bg-muted/10 border-2 border-muted/5 min-h-[100px]",children:[(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40 mb-3",children:"Service Details"}),(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground leading-relaxed",children:a.description||"No tactical details provided by the tenant."})]})]}),(0,b.jsxs)("div",{className:"lg:w-1/5 flex lg:flex-col gap-3 justify-center",children:[(0,b.jsx)("p",{className:"text-[9px] font-black uppercase tracking-widest text-center text-muted-foreground/40 hidden lg:block mb-2",children:"Manage Request"}),(0,b.jsxs)(e.DropdownMenu,{children:[(0,b.jsx)(e.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{className:"h-14 rounded-xl bg-foreground text-white hover:bg-primary transition-all font-black text-[10px] uppercase tracking-widest gap-2 shadow-lg",children:["UPDATE STATUS ",(0,b.jsx)(h.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,b.jsxs)(e.DropdownMenuContent,{align:"end",className:"rounded-2xl p-2 border-2 border-foreground/5 shadow-2xl",children:[(0,b.jsx)(e.DropdownMenuItem,{onClick:()=>G(a.id,"In Progress"),className:"rounded-xl focus:bg-primary focus:text-white cursor-pointer py-3 px-4 font-black text-[10px] uppercase tracking-widest",children:"MARK IN PROGRESS"}),(0,b.jsx)(e.DropdownMenuItem,{onClick:()=>G(a.id,"Completed"),className:"rounded-xl focus:bg-emerald-500 focus:text-white cursor-pointer py-3 px-4 font-black text-[10px] uppercase tracking-widest",children:"MARK COMPLETED"}),(0,b.jsx)(e.DropdownMenuItem,{onClick:()=>G(a.id,"Cancelled"),className:"rounded-xl focus:bg-destructive focus:text-white cursor-pointer py-3 px-4 font-black text-[10px] uppercase tracking-widest text-destructive",children:"CANCEL REQUEST"})]})]}),(0,b.jsx)(s.default,{href:`/landlord/messages?conversationId=${a.tenantId}`,className:"w-full",children:(0,b.jsxs)(f.Button,{variant:"outline",className:"w-full h-14 rounded-xl border-2 hover:bg-muted font-black text-[10px] uppercase tracking-widest gap-2",children:["CONTACT ",(0,b.jsx)(q.ArrowRight,{className:"h-4 w-4"})]})})]})]})},a.id))}):(0,b.jsxs)(d.Card,{className:"rounded-[3.5rem] border-2 border-dashed border-foreground/10 bg-muted/5 p-24 text-center space-y-8",children:[(0,b.jsxs)("div",{className:"h-32 w-32 rounded-[2.5rem] bg-white shadow-2xl flex items-center justify-center mx-auto relative group overflow-hidden",children:[(0,b.jsx)(i.Wrench,{className:"h-14 w-14 text-muted-foreground/20 group-hover:rotate-12 transition-transform"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/5 rounded-[2.5rem]"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-2xl font-black uppercase tracking-tight",children:"Systems Clear"}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground max-w-sm mx-auto",children:"No active maintenance requests found at this time."})]})]})]})]})}a.s(["default",()=>y])}];

//# sourceMappingURL=_dc2ad126._.js.map