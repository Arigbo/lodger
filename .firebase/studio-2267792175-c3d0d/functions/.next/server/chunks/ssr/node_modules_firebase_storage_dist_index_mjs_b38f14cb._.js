module.exports=[60121,5420,a=>{"use strict";var b,c,d,e,f=a.i(11243);let g=function(a){let b=[],c=0;for(let d=0;d<a.length;d++){let e=a.charCodeAt(d);e<128?b[c++]=e:(e<2048?b[c++]=e>>6|192:((64512&e)==55296&&d+1<a.length&&(64512&a.charCodeAt(d+1))==56320?(e=65536+((1023&e)<<10)+(1023&a.charCodeAt(++d)),b[c++]=e>>18|240,b[c++]=e>>12&63|128):b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=63&e|128)}return b},h=function(a){let b=[],c=0,d=0;for(;c<a.length;){let e=a[c++];if(e<128)b[d++]=String.fromCharCode(e);else if(e>191&&e<224){let f=a[c++];b[d++]=String.fromCharCode((31&e)<<6|63&f)}else if(e>239&&e<365){let f=((7&e)<<18|(63&a[c++])<<12|(63&a[c++])<<6|63&a[c++])-65536;b[d++]=String.fromCharCode(55296+(f>>10)),b[d++]=String.fromCharCode(56320+(1023&f))}else{let f=a[c++],g=a[c++];b[d++]=String.fromCharCode((15&e)<<12|(63&f)<<6|63&g)}}return b.join("")},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(a,b){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();let c=b?this.byteToCharMapWebSafe_:this.byteToCharMap_,d=[];for(let b=0;b<a.length;b+=3){let e=a[b],f=b+1<a.length,g=f?a[b+1]:0,h=b+2<a.length,i=h?a[b+2]:0,j=e>>2,k=(3&e)<<4|g>>4,l=(15&g)<<2|i>>6,m=63&i;!h&&(m=64,f||(l=64)),d.push(c[j],c[k],c[l],c[m])}return d.join("")},encodeString(a,b){return this.HAS_NATIVE_SUPPORT&&!b?btoa(a):this.encodeByteArray(g(a),b)},decodeString(a,b){return this.HAS_NATIVE_SUPPORT&&!b?atob(a):h(this.decodeStringToByteArray(a,b))},decodeStringToByteArray(a,b){this.init_();let c=b?this.charToByteMapWebSafe_:this.charToByteMap_,d=[];for(let b=0;b<a.length;){let e=c[a.charAt(b++)],f=b<a.length?c[a.charAt(b)]:0,g=++b<a.length?c[a.charAt(b)]:64,h=++b<a.length?c[a.charAt(b)]:64;if(++b,null==e||null==f||null==g||null==h)throw new j;let i=e<<2|f>>4;if(d.push(i),64!==g){let a=f<<4&240|g>>2;if(d.push(a),64!==h){let a=g<<6&192|h;d.push(a)}}}return d},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class j extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let k=function(a){let b=g(a);return i.encodeByteArray(b,!0)},l=function(a){return k(a).replace(/\./g,"")},m=function(a){try{return i.decodeString(a,!0)}catch(a){console.error("base64Decode failed: ",a)}return null};function n(a){return a.endsWith(".cloudworkstations.dev")}async function o(a){return(await fetch(a,{credentials:"include"})).ok}function p(a,b){}class q extends Error{constructor(a,b,c){super(b),this.code=a,this.customData=c,this.name="FirebaseError",Object.setPrototypeOf(this,q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,r.prototype.create)}}class r{constructor(a,b,c){this.service=a,this.serviceName=b,this.errors=c}create(a,...b){var c,d;let e=b[0]||{},f=`${this.service}/${a}`,g=this.errors[a],h=g?(c=g,d=e,c.replace(s,(a,b)=>{let c=d[b];return null!=c?String(c):`<${b}?>`})):"Error",i=`${this.serviceName}: ${h} (${f}).`;return new q(f,i,e)}}let s=/\{\$([^}]+)}/g;function t(a){return a&&a._delegate?a._delegate:a}let u="firebasestorage.googleapis.com",v="storageBucket";class w extends q{constructor(a,b,c=0){super(x(a),`Firebase Storage: ${b} (${x(a)})`),this.status_=c,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,w.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return x(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function x(a){return"storage/"+a}function y(){return new w(d.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function z(a){return new w(d.INVALID_ARGUMENT,a)}function A(){return new w(d.APP_DELETED,"The Firebase app was deleted.")}function B(a,b){return new w(d.INVALID_FORMAT,"String does not match format '"+a+"': "+b)}function C(a){throw new w(d.INTERNAL_ERROR,"Internal error: "+a)}(b=d||(d={})).UNKNOWN="unknown",b.OBJECT_NOT_FOUND="object-not-found",b.BUCKET_NOT_FOUND="bucket-not-found",b.PROJECT_NOT_FOUND="project-not-found",b.QUOTA_EXCEEDED="quota-exceeded",b.UNAUTHENTICATED="unauthenticated",b.UNAUTHORIZED="unauthorized",b.UNAUTHORIZED_APP="unauthorized-app",b.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",b.INVALID_CHECKSUM="invalid-checksum",b.CANCELED="canceled",b.INVALID_EVENT_NAME="invalid-event-name",b.INVALID_URL="invalid-url",b.INVALID_DEFAULT_BUCKET="invalid-default-bucket",b.NO_DEFAULT_BUCKET="no-default-bucket",b.CANNOT_SLICE_BLOB="cannot-slice-blob",b.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",b.NO_DOWNLOAD_URL="no-download-url",b.INVALID_ARGUMENT="invalid-argument",b.INVALID_ARGUMENT_COUNT="invalid-argument-count",b.APP_DELETED="app-deleted",b.INVALID_ROOT_OPERATION="invalid-root-operation",b.INVALID_FORMAT="invalid-format",b.INTERNAL_ERROR="internal-error",b.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class D{constructor(a,b){this.bucket=a,this.path_=b}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){let a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,b){let c;try{c=D.makeFromUrl(a,b)}catch(b){return new D(a,"")}if(""===c.path)return c;throw new w(d.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+a+"'.")}static makeFromUrl(a,b){let c=null,e="([A-Za-z0-9.\\-_]+)",f=RegExp("^gs://"+e+"(/(.*))?$","i");function g(a){a.path_=decodeURIComponent(a.path)}let h=b.replace(/[.]/g,"\\."),i=RegExp(`^https?://${h}/v[A-Za-z0-9_]+/b/${e}/o(/([^?#]*).*)?$`,"i"),j=b===u?"(?:storage.googleapis.com|storage.cloud.google.com)":b,k=[{regex:f,indices:{bucket:1,path:3},postModify:function(a){"/"===a.path.charAt(a.path.length-1)&&(a.path_=a.path_.slice(0,-1))}},{regex:i,indices:{bucket:1,path:3},postModify:g},{regex:RegExp(`^https?://${j}/${e}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:g}];for(let b=0;b<k.length;b++){let d=k[b],e=d.regex.exec(a);if(e){let a=e[d.indices.bucket],b=e[d.indices.path];b||(b=""),c=new D(a,b),d.postModify(c);break}}if(null==c)throw new w(d.INVALID_URL,"Invalid URL '"+a+"'.");return c}}class E{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function F(a){return"string"==typeof a||a instanceof String}function G(a){return H()&&a instanceof Blob}function H(){return"undefined"!=typeof Blob}function I(a,b,c,d){if(d<b)throw z(`Invalid value for '${a}'. Expected ${b} or greater.`);if(d>c)throw z(`Invalid value for '${a}'. Expected ${c} or less.`)}function J(a,b,c){let d=b;return null==c&&(d=`https://${b}`),`${c}://${d}/v0${a}`}function K(a){let b=encodeURIComponent,c="?";for(let d in a)a.hasOwnProperty(d)&&(c=c+(b(d)+"=")+b(a[d])+"&");return c.slice(0,-1)}(c=e||(e={}))[c.NO_ERROR=0]="NO_ERROR",c[c.NETWORK_ERROR=1]="NETWORK_ERROR",c[c.ABORT=2]="ABORT";class L{constructor(a,b,c,d,e,f,g,h,i,j,k,l=!0,m=!1){this.url_=a,this.method_=b,this.headers_=c,this.body_=d,this.successCodes_=e,this.additionalRetryCodes_=f,this.callback_=g,this.errorCallback_=h,this.timeout_=i,this.progressCallback_=j,this.connectionFactory_=k,this.retry=l,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((a,b)=>{this.resolve_=a,this.reject_=b,this.start_()})}start_(){let a=(a,b)=>{if(b)return void a(!1,new M(!1,null,!0));let c=this.connectionFactory_();this.pendingConnection_=c;let d=a=>{let b=a.loaded,c=a.lengthComputable?a.total:-1;null!==this.progressCallback_&&this.progressCallback_(b,c)};null!==this.progressCallback_&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{var b;let f,g,h;null!==this.progressCallback_&&c.removeUploadProgressListener(d),this.pendingConnection_=null;let i=c.getErrorCode()===e.NO_ERROR,j=c.getStatus();!i||(b=this.additionalRetryCodes_,f=j>=500&&j<600,g=-1!==[408,429].indexOf(j),h=-1!==b.indexOf(j),(f||g||h)&&this.retry)?a(!1,new M(!1,null,c.getErrorCode()===e.ABORT)):a(!0,new M(-1!==this.successCodes_.indexOf(j),c))})},b=(a,b)=>{let c=this.resolve_,e=this.reject_,f=b.connection;if(b.wasSuccessCode)try{let a=this.callback_(f,f.getResponse());void 0!==a?c(a):c()}catch(a){e(a)}else if(null!==f){let a=y();a.serverResponse=f.getErrorText(),e(this.errorCallback_?this.errorCallback_(f,a):a)}else e(b.canceled?this.appDelete_?A():new w(d.CANCELED,"User canceled the upload/download."):new w(d.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?b(!1,new M(!1,null,!0)):this.backoffId_=function(a,b,c){let d=1,e=null,f=null,g=!1,h=0,i=!1;function j(...a){i||(i=!0,b.apply(null,a))}function k(b){e=setTimeout(()=>{e=null,a(m,2===h)},b)}function l(){f&&clearTimeout(f)}function m(a,...b){let c;if(i)return void l();if(a||2===h||g){l(),j.call(null,a,...b);return}d<64&&(d*=2),1===h?(h=2,c=0):c=(d+Math.random())*1e3,k(c)}let n=!1;function o(a){n||(n=!0,l(),!i&&(null!==e?(a||(h=2),clearTimeout(e),k(0)):a||(h=1)))}return k(0),f=setTimeout(()=>{g=!0,o(!0)},c),o}(a,b,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class M{constructor(a,b,c){this.wasSuccessCode=a,this.connection=b,this.canceled=!!c}}function N(...a){let b="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==b){let c=new b;for(let b=0;b<a.length;b++)c.append(a[b]);return c.getBlob()}if(H())return new Blob(a);throw new w(d.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}let O="base64",P="base64url",Q="data_url";class R{constructor(a,b){this.data=a,this.contentType=b||null}}function S(a){let b=[];for(let c=0;c<a.length;c++){let d=a.charCodeAt(c);d<=127?b.push(d):d<=2047?b.push(192|d>>6,128|63&d):(64512&d)==55296?c<a.length-1&&(64512&a.charCodeAt(c+1))==56320?(d=65536|(1023&d)<<10|1023&a.charCodeAt(++c),b.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|63&d)):b.push(239,191,189):(64512&d)==56320?b.push(239,191,189):b.push(224|d>>12,128|d>>6&63,128|63&d)}return new Uint8Array(b)}function T(a,b){let c;switch(a){case O:{let c=-1!==b.indexOf("-"),d=-1!==b.indexOf("_");if(c||d)throw B(a,"Invalid character '"+(c?"-":"_")+"' found: is it base64url encoded?");break}case P:{let c=-1!==b.indexOf("+"),d=-1!==b.indexOf("/");if(c||d)throw B(a,"Invalid character '"+(c?"+":"/")+"' found: is it base64 encoded?");b=b.replace(/-/g,"+").replace(/_/g,"/")}}try{c=function(a){if(/[^-A-Za-z0-9+/=]/.test(a))throw B("base64","Invalid character found");return Buffer.from(a,"base64").toString("binary")}(b)}catch(b){if(b.message.includes("polyfill"))throw b;throw B(a,"Invalid character found")}let d=new Uint8Array(c.length);for(let a=0;a<c.length;a++)d[a]=c.charCodeAt(a);return d}class U{constructor(a){this.base64=!1,this.contentType=null;const b=a.match(/^data:([^,]+)?,/);if(null===b)throw B(Q,"Must be formatted 'data:[<mediatype>][;base64],<data>");const c=b[1]||null;null!=c&&(this.base64=function(a,b){return a.length>=b.length&&a.substring(a.length-b.length)===b}(c,";base64"),this.contentType=this.base64?c.substring(0,c.length-7):c),this.rest=a.substring(a.indexOf(",")+1)}}class V{constructor(a,b){let c=0,d="";G(a)?(this.data_=a,c=a.size,d=a.type):a instanceof ArrayBuffer?(b?this.data_=new Uint8Array(a):(this.data_=new Uint8Array(a.byteLength),this.data_.set(new Uint8Array(a))),c=this.data_.length):a instanceof Uint8Array&&(b?this.data_=a:(this.data_=new Uint8Array(a.length),this.data_.set(a)),c=a.length),this.size_=c,this.type_=d}size(){return this.size_}type(){return this.type_}slice(a,b){if(!G(this.data_))return new V(new Uint8Array(this.data_.buffer,a,b-a),!0);{var c,d,e;let f=(c=this.data_,d=a,e=b,c.webkitSlice?c.webkitSlice(d,e):c.mozSlice?c.mozSlice(d,e):c.slice?c.slice(d,e):null);return null===f?null:new V(f)}}static getBlob(...a){if(H()){let b=a.map(a=>a instanceof V?a.data_:a);return new V(N.apply(null,b))}{let b=a.map(a=>F(a)?function(a,b){return new R(S(b))}("raw",a).data:a.data_),c=0;b.forEach(a=>{c+=a.byteLength});let d=new Uint8Array(c),e=0;return b.forEach(a=>{for(let b=0;b<a.length;b++)d[e++]=a[b]}),new V(d,!0)}}uploadData(){return this.data_}}function W(a){var b;let c;try{c=JSON.parse(a)}catch(a){return null}return"object"!=typeof(b=c)||Array.isArray(b)?null:c}function X(a){let b=a.lastIndexOf("/",a.length-2);return -1===b?a:a.slice(b+1)}function Y(a,b){return b}class Z{constructor(a,b,c,d){this.server=a,this.local=b||a,this.writable=!!c,this.xform=d||Y}}let $=null;function _(){if($)return $;let a=[];a.push(new Z("bucket")),a.push(new Z("generation")),a.push(new Z("metageneration")),a.push(new Z("name","fullPath",!0));let b=new Z("name");b.xform=function(a,b){return!F(b)||b.length<2?b:X(b)},a.push(b);let c=new Z("size");return c.xform=function(a,b){return void 0!==b?Number(b):b},a.push(c),a.push(new Z("timeCreated")),a.push(new Z("updated")),a.push(new Z("md5Hash",null,!0)),a.push(new Z("cacheControl",null,!0)),a.push(new Z("contentDisposition",null,!0)),a.push(new Z("contentEncoding",null,!0)),a.push(new Z("contentLanguage",null,!0)),a.push(new Z("contentType",null,!0)),a.push(new Z("metadata","customMetadata",!0)),$=a}function aa(a,b,c){let d=W(b);return null===d?null:function(a,b,c){let d={};d.type="file";let e=c.length;for(let a=0;a<e;a++){let e=c[a];d[e.local]=e.xform(d,b[e.server])}return Object.defineProperty(d,"ref",{get:function(){let b=new D(d.bucket,d.fullPath);return a._makeStorageReference(b)}}),d}(a,d,c)}class ab{constructor(a,b,c,d){this.url=a,this.method=b,this.handler=c,this.timeout=d,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ac(a){if(!a)throw y()}function ad(a){return function(b,c){var e,f;let g;return 401===b.getStatus()?g=b.getErrorText().includes("Firebase App Check token is invalid")?new w(d.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new w(d.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===b.getStatus()?(e=a.bucket,g=new w(d.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===b.getStatus()?(f=a.path,g=new w(d.UNAUTHORIZED,"User does not have permission to access '"+f+"'.")):g=c,g.status=b.getStatus(),g.serverResponse=c.serverResponse,g}}function ae(a){let b=ad(a);return function(c,e){var f;let g=b(c,e);return 404===c.getStatus()&&(f=a.path,g=new w(d.OBJECT_NOT_FOUND,"Object '"+f+"' does not exist.")),g.serverResponse=e.serverResponse,g}}class af{constructor(){this.errorText_="",this.sent_=!1,this.errorCode_=e.NO_ERROR}async send(a,b,c,d,f){if(this.sent_)throw C("cannot .send() more than once");this.sent_=!0;try{var g,h,i,j,k;let l,m=await (g=a,h=b,i=c,j=f,k=d,l={method:h,headers:j||{},body:k},n(g)&&i&&(l.credentials="include"),fetch(g,l));this.headers_=m.headers,this.statusCode_=m.status,this.errorCode_=e.NO_ERROR,this.body_=await m.arrayBuffer()}catch(a){this.errorText_=null==a?void 0:a.message,this.statusCode_=0,this.errorCode_=e.NETWORK_ERROR}}getErrorCode(){if(void 0===this.errorCode_)throw C("cannot .getErrorCode() before receiving response");return this.errorCode_}getStatus(){if(void 0===this.statusCode_)throw C("cannot .getStatus() before receiving response");return this.statusCode_}getErrorText(){return this.errorText_}abort(){}getResponseHeader(a){if(!this.headers_)throw C("cannot .getResponseHeader() before receiving response");return this.headers_.get(a)}addUploadProgressListener(a){}removeUploadProgressListener(a){}}class ag extends af{getResponse(){if(!this.body_)throw C("cannot .getResponse() before receiving response");return Buffer.from(this.body_).toString("utf-8")}}function ah(){return new ag}class ai{constructor(a,b){this._service=a,b instanceof D?this._location=b:this._location=D.makeFromUrl(b,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,b){return new ai(a,b)}get root(){let a=new D(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return X(this._location.path)}get storage(){return this._service}get parent(){let a=function(a){if(0===a.length)return null;let b=a.lastIndexOf("/");return -1===b?"":a.slice(0,b)}(this._location.path);if(null===a)return null;let b=new D(this._location.bucket,a);return new ai(this._service,b)}_throwIfRoot(a){if(""===this._location.path)throw new w(d.INVALID_ROOT_OPERATION,"The operation '"+a+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}}function aj(a,b){let c=null==b?void 0:b[v];return null==c?null:D.makeFromBucketSpec(c,a)}class ak{constructor(a,b,c,d,e,f=!1){this.app=a,this._authProvider=b,this._appCheckProvider=c,this._url=d,this._firebaseVersion=e,this._isUsingEmulator=f,this._bucket=null,this._host=u,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=d?this._bucket=D.makeFromBucketSpec(d,this._host):this._bucket=aj(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,null!=this._url?this._bucket=D.makeFromBucketSpec(this._url,a):this._bucket=aj(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){I("time",0,1/0,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){I("time",0,1/0,a),this._maxOperationRetryTime=a}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let a=this._authProvider.getImmediate({optional:!0});if(a){let b=await a.getToken();if(null!==b)return b.accessToken}return null}async _getAppCheckToken(){if((0,f._isFirebaseServerApp)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let a=this._appCheckProvider.getImmediate({optional:!0});return a?(await a.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new ai(this,a)}_makeRequest(a,b,c,d,e=!0){if(this._deleted)return new E(A());{let f=function(a,b,c,d,e,f,g=!0,h=!1){let i=K(a.urlParams),j=a.url+i,k=Object.assign({},a.headers);return b&&(k["X-Firebase-GMPID"]=b),null!==c&&c.length>0&&(k.Authorization="Firebase "+c),k["X-Firebase-Storage-Version"]="webjs/"+(null!=f?f:"AppManager"),null!==d&&(k["X-Firebase-AppCheck"]=d),new L(j,a.method,k,a.body,a.successCodes,a.additionalRetryCodes,a.handler,a.errorHandler,a.timeout,a.progressCallback,e,g,h)}(a,this._appId,c,d,b,this._firebaseVersion,e,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(a,b){let[c,d]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(a,b,c,d).getPromise()}}let al="storage";function am(a,b,c){var e;let f;return e=a=t(a),e._throwIfRoot("uploadBytes"),f=function(a,b,c,e,f){let g,h=b.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"},j=function(){let a="";for(let b=0;b<2;b++)a+=Math.random().toString().slice(2);return a}();i["Content-Type"]="multipart/related; boundary="+j;let k=((g=Object.assign({},f)).fullPath=b.path,g.size=e.size(),g.contentType||(g.contentType=e&&e.type()||"application/octet-stream"),g),l="--"+j+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+function(a,b){let c={},d=b.length;for(let e=0;e<d;e++){let d=b[e];d.writable&&(c[d.server]=a[d.local])}return JSON.stringify(c)}(k,c)+"\r\n--"+j+"\r\nContent-Type: "+k.contentType+"\r\n\r\n",m=V.getBlob(l,e,"\r\n--"+j+"--");if(null===m)throw new w(d.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");let n={name:k.fullPath},o=J(h,a.host,a._protocol),p=a.maxUploadRetryTime,q=new ab(o,"POST",function(b,d){let e=aa(a,d,c);return ac(null!==e),e},p);return q.urlParams=n,q.headers=i,q.body=m.uploadData(),q.errorHandler=ad(b),q}(e.storage,e._location,_(),new V(b,!0),c),e.storage.makeRequestWithTokens(f,ah).then(a=>({metadata:a,ref:e}))}function an(a){var b,c,e,f;let g,h,i,j;return(b=a=t(a))._throwIfRoot("getDownloadURL"),c=b.storage,e=b._location,f=_(),g=J(e.fullServerUrl(),c.host,c._protocol),h=c.maxOperationRetryTime,(i=new ab(g,"GET",function(a,b){let d=aa(c,b,f);return ac(null!==d),function(a,b,c,d){let e=W(b);if(null===e||!F(e.downloadTokens))return null;let f=e.downloadTokens;if(0===f.length)return null;let g=encodeURIComponent;return f.split(",").map(b=>{let e=a.bucket,f=a.fullPath;return J("/b/"+g(e)+"/o/"+g(f),c,d)+K({alt:"media",token:b})})[0]}(d,b,c.host,c._protocol)},h)).errorHandler=ae(e),j=i,b.storage.makeRequestWithTokens(j,ah).then(a=>{if(null===a)throw new w(d.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return a})}function ao(a){var b,c,d;let e,f;return(b=a=t(a))._throwIfRoot("deleteObject"),c=b.storage,(e=new ab(J((d=b._location).fullServerUrl(),c.host,c._protocol),"DELETE",function(a,b){},c.maxOperationRetryTime)).successCodes=[200,204],e.errorHandler=ae(d),f=e,b.storage.makeRequestWithTokens(f,ah)}function ap(a,b){var c=a=t(a);if(!(b&&/^[A-Za-z]+:\/\//.test(b)))return function a(b,c){var e;let f,g,h;if(b instanceof ak){if(null==b._bucket)throw new w(d.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+v+"' property when initializing the app?");let e=new ai(b,b._bucket);return null!=c?a(e,c):e}if(void 0===c)return b;return e=b._location.path,f=c.split("/").filter(a=>a.length>0).join("/"),g=0===e.length?f:e+"/"+f,h=new D(b._location.bucket,g),new ai(b.storage,h)}(c,b);if(c instanceof ak)return new ai(c,b);throw z("To use ref(service, url), the first argument must be a Storage instance.")}function aq(b=(0,f.getApp)(),c){b=t(b),p("Storage",!1);let d=(0,f._getProvider)(b,al).getImmediate({identifier:c}),e=(b=>{var c,d;let e=null==(d=null==(c=(()=>{try{return("undefined"!=typeof self?self:a.g).__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;let a=process.env.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)})()||(()=>{let a;if("undefined"==typeof document)return;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(a){return}let b=a&&m(a[1]);return b&&JSON.parse(b)})()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}})())?void 0:c.emulatorHosts)?void 0:d[b];if(!e)return;let f=e.lastIndexOf(":");if(f<=0||f+1===e.length)throw Error(`Invalid host ${e} with no separate hostname and port!`);let g=parseInt(e.substring(f+1),10);return"["===e[0]?[e.substring(1,f-1),g]:[e.substring(0,f),g]})("storage");return e&&function(a,b,c,d={}){!function(a,b,c,d={}){a.host=`${b}:${c}`;let e=n(b);e&&(o(`https://${a.host}`),p("Storage",!0)),a._isUsingEmulator=!0,a._protocol=e?"https":"http";let{mockUserToken:f}=d;f&&(a._overrideAuthToken="string"==typeof f?f:function(a,b){if(a.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let c=b||"demo-project",d=a.iat||0,e=a.sub||a.user_id;if(!e)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let f=Object.assign({iss:`https://securetoken.google.com/${c}`,aud:c,iat:d,exp:d+3600,auth_time:d,sub:e,user_id:e,firebase:{sign_in_provider:"custom",identities:{}}},a);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(f)),""].join(".")}(f,a.app.options.projectId))}(a,b,c,d)}(d,...e),d}(0,f._registerComponent)(new class a{constructor(a,b,c){this.name=a,this.instanceFactory=b,this.type=c,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(a){return this.instantiationMode=a,this}setMultipleInstances(a){return this.multipleInstances=a,this}setServiceProps(a){return this.serviceProps=a,this}setInstanceCreatedCallback(a){return this.onInstanceCreated=a,this}}(al,function(a,{instanceIdentifier:b}){return new ak(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),b,f.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,f.registerVersion)("@firebase/storage","0.13.11"),a.s(["deleteObject",()=>ao,"getDownloadURL",()=>an,"getStorage",()=>aq,"ref",()=>ap,"uploadBytes",()=>am],5420),a.s([],60121)}];

//# sourceMappingURL=node_modules_firebase_storage_dist_index_mjs_b38f14cb._.js.map