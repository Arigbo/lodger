module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23690);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23690);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},6015,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23690);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},25369,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(6015),e=a.i(91119),f=a.i(99570),g=a.i(86304),h=a.i(87532),i=a.i(38246);a.i(79597);var j=a.i(36505),k=a.i(73810);a.i(69387);var l=a.i(60574),m=a.i(42816),n=a.i(23690),o=a.i(86192),p=a.i(14574),q=a.i(29246),r=a.i(54614);function s(a,b){if(0===a.length)return[];let c=[];for(let d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c}function t(){let{user:a,isUserLoading:t}=(0,j.useUser)(),u=(0,j.useFirestore)(),[v,w]=c.useState([]),[x,y]=c.useState(!0),z=(0,j.useMemoFirebase)(()=>a?(0,l.query)((0,l.collection)(u,"rentalApplications"),(0,l.where)("tenantId","==",a.uid)):null,[a,u]),{data:A,isLoading:B}=(0,k.useCollection)(z);c.useEffect(()=>{if(!B){if(!A||!u){w([]),y(!1);return}(async()=>{if(y(!0),0===A.length){w([]),y(!1);return}let a=[...new Set(A.map(a=>a.landlordId))].filter(Boolean),b=[...new Set(A.map(a=>a.propertyId))].filter(Boolean),c=new Map,d=new Map;if(a.length>0)for(let b of s(a,30)){let a=(0,l.query)((0,l.collection)(u,"users"),(0,l.where)((0,l.documentId)(),"in",b));(await (0,l.getDocs)(a)).forEach(a=>c.set(a.id,{id:a.id,...a.data()}))}if(b.length>0)for(let a of s(b,30)){let b=(0,l.query)((0,l.collection)(u,"properties"),(0,l.where)((0,l.documentId)(),"in",a));(await (0,l.getDocs)(b)).forEach(a=>d.set(a.id,{id:a.id,...a.data()}))}w(A.map(a=>({request:a,landlord:c.get(a.landlordId)||null,property:d.get(a.propertyId)||null})).sort((a,b)=>new Date(b.request.applicationDate).getTime()-new Date(a.request.applicationDate).getTime())),y(!1)})()}},[A,B,u]);let[C,D]=c.useState(null),[E,F]=c.useState(null),[G,H]=c.useState(""),{toast:I}=(0,r.useToast)(),J=async()=>{if(C&&u)try{await (0,l.deleteDoc)((0,l.doc)(u,"rentalApplications",C)),I({title:"Request Deleted",description:"Your rental application has been cancelled."}),D(null)}catch(a){console.error("Error deleting request:",a),I({variant:"destructive",title:"Error",description:"Could not delete request. Please try again."})}},K=async()=>{if(E&&u)try{await (0,l.updateDoc)((0,l.doc)(u,"rentalApplications",E.id),{messageToLandlord:G}),I({title:"Request Updated",description:"Your application details have been updated."}),F(null)}catch(a){console.error("Error updating request:",a),I({variant:"destructive",title:"Error",description:"Could not update request. Please try again."})}};return t||B||x?(0,b.jsx)(m.default,{}):(0,b.jsxs)("div",{className:"space-y-10 animate-in fade-in duration-700",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h1",{className:"font-headline text-4xl font-black tracking-tight text-foreground underline decoration-primary/20 underline-offset-8 uppercase",children:"Rental Requests"}),(0,b.jsx)("p",{className:"text-lg text-muted-foreground font-medium",children:'"Track your active rental applications and inquiries."'})]}),v.length>0?(0,b.jsxs)(e.Card,{className:"overflow-hidden border-2 border-foreground/5 bg-white shadow-xl rounded-[2.5rem]",children:[(0,b.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,b.jsxs)(d.Table,{children:[(0,b.jsx)(d.TableHeader,{children:(0,b.jsxs)(d.TableRow,{className:"bg-muted/30 border-none",children:[(0,b.jsx)(d.TableHead,{className:"px-8 font-bold text-foreground",children:"Property"}),(0,b.jsx)(d.TableHead,{className:"font-bold text-foreground",children:"Landlord"}),(0,b.jsx)(d.TableHead,{className:"font-bold text-foreground",children:"Date Applied"}),(0,b.jsx)(d.TableHead,{className:"font-bold text-foreground",children:"Status"}),(0,b.jsx)(d.TableHead,{className:"text-right px-8 font-bold text-foreground",children:"Actions"})]})}),(0,b.jsx)(d.TableBody,{children:v.map(({request:a,landlord:c,property:e})=>(0,b.jsxs)(d.TableRow,{className:"border-muted/10 hover:bg-muted/5 transition-colors text-[10px] sm:text-xs md:text-sm",children:[(0,b.jsx)(d.TableCell,{className:"px-8 font-bold",children:(0,b.jsx)(i.default,{href:`/student/properties/${e?.id}`,className:"hover:text-primary transition-colors whitespace-nowrap",children:e?.title||"Unknown Property"})}),(0,b.jsx)(d.TableCell,{className:"font-medium whitespace-nowrap",children:c?.name||"N/A"}),(0,b.jsx)(d.TableCell,{className:"font-medium text-muted-foreground whitespace-nowrap",children:new Date(a.applicationDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),(0,b.jsx)(d.TableCell,{children:(0,b.jsx)(g.Badge,{className:(0,n.cn)("rounded-full px-4 py-1 text-[10px] font-black uppercase tracking-widest border-none","approved"===a.status?"bg-green-500/10 text-green-600":"declined"===a.status?"bg-red-500/10 text-red-600":"bg-primary/10 text-primary"),children:a.status})}),(0,b.jsxs)(d.TableCell,{className:"text-right px-8 space-x-2 whitespace-nowrap",children:["approved"===a.status&&(0,b.jsx)(f.Button,{size:"sm",className:"rounded-xl font-bold",asChild:!0,children:(0,b.jsx)(i.default,{href:"/student/leases",children:"View Lease"})}),"pending"===a.status&&(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"rounded-xl font-bold",onClick:()=>{F(a),H(a.messageToLandlord||"")},children:"Edit"}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"rounded-xl font-bold text-red-500 hover:bg-red-50",onClick:()=>D(a.id),children:"pending"===a.status?"Withdraw":"Clear"})]})]},a.id))})]})}),(0,b.jsx)("div",{className:"md:hidden divide-y divide-muted/10",children:v.map(({request:a,landlord:c,property:d})=>(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.default,{href:`/student/properties/${d?.id}`,className:"font-black text-sm uppercase tracking-tight hover:text-primary transition-colors block mb-1",children:d?.title||"Unknown Property"}),(0,b.jsxs)("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest",children:["Applied: ",new Date(a.applicationDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})]})]}),(0,b.jsx)(g.Badge,{className:(0,n.cn)("rounded-full px-3 py-1 text-[9px] font-black uppercase tracking-widest border-none","approved"===a.status?"bg-green-500/10 text-green-600":"declined"===a.status?"bg-red-500/10 text-red-600":"bg-primary/10 text-primary"),children:a.status})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-lg bg-muted/20 flex items-center justify-center text-[10px] font-black uppercase",children:c?.name?.[0]||"L"}),(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:c?.name||"Unknown Landlord"})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2",children:["approved"===a.status?(0,b.jsx)(f.Button,{size:"sm",className:"flex-1 rounded-xl font-black text-[9px] uppercase tracking-widest h-10",asChild:!0,children:(0,b.jsx)(i.default,{href:"/student/leases",children:"View Lease"})}):"pending"===a.status?(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"flex-1 rounded-xl font-black text-[9px] uppercase tracking-widest h-10 border-2",onClick:()=>{F(a),H(a.messageToLandlord||"")},children:"Edit"}):null,(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",className:"rounded-xl font-black text-[9px] uppercase tracking-widest text-red-500 h-10 px-4",onClick:()=>D(a.id),children:"pending"===a.status?"Withdraw":"Clear"})]})]},a.id))})]}):(0,b.jsx)(e.Card,{className:"overflow-hidden border-none bg-white shadow-xl shadow-black/[0.02]",children:(0,b.jsxs)(e.CardContent,{className:"flex flex-col items-center justify-center py-24 text-center",children:[(0,b.jsxs)("div",{className:"relative mb-8",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/10 blur-3xl rounded-full scale-150"}),(0,b.jsx)("div",{className:"relative flex h-24 w-24 items-center justify-center rounded-[2rem] bg-muted/30",children:(0,b.jsx)(h.Search,{className:"h-10 w-10 text-primary opacity-20"})})]}),(0,b.jsx)("h2",{className:"text-2xl font-black tracking-tight",children:"No Active Requests"}),(0,b.jsx)("p",{className:"mx-auto mt-2 max-w-sm text-muted-foreground font-medium",children:"You haven't submitted any rental applications yet."}),(0,b.jsx)(f.Button,{className:"mt-8 rounded-2xl px-8 font-bold",asChild:!0,children:(0,b.jsx)(i.default,{href:"/student/properties",children:"Explore Properties"})})]})}),(0,b.jsx)(o.AlertDialog,{open:!!C,onOpenChange:a=>!a&&D(null),children:(0,b.jsxs)(o.AlertDialogContent,{className:"w-[95vw] sm:max-w-md rounded-[2.5rem] border-none shadow-3xl p-10",children:[(0,b.jsxs)(o.AlertDialogHeader,{className:"space-y-4",children:[(0,b.jsx)(o.AlertDialogTitle,{className:"text-3xl font-black",children:"Archive Inquiry?"}),(0,b.jsx)(o.AlertDialogDescription,{className:"text-lg font-medium text-muted-foreground",children:"Are you sure you want to withdraw this application? This action cannot be reversed."})]}),(0,b.jsxs)(o.AlertDialogFooter,{className:"gap-4 mt-8",children:[(0,b.jsx)(o.AlertDialogCancel,{className:"h-14 rounded-2xl border-2 font-black text-xs uppercase tracking-widest",children:"RETAIN"}),(0,b.jsx)(o.AlertDialogAction,{onClick:J,className:"h-14 rounded-2xl bg-red-500 text-white hover:bg-red-600 font-black text-xs uppercase tracking-widest shadow-xl shadow-red-500/20",children:"WITHDRAW APPLICATION"})]})]})}),(0,b.jsx)(p.Dialog,{open:!!E,onOpenChange:a=>!a&&F(null),children:(0,b.jsxs)(p.DialogContent,{className:"sm:max-w-md w-[95vw] rounded-[2.5rem] border-none shadow-3xl p-10",children:[(0,b.jsxs)(p.DialogHeader,{className:"space-y-4",children:[(0,b.jsx)(p.DialogTitle,{className:"text-3xl font-black",children:"Edit Application"}),(0,b.jsx)(p.DialogDescription,{className:"text-lg font-medium text-muted-foreground",children:"Update your message to the landlord."})]}),(0,b.jsxs)("div",{className:"py-8 space-y-3",children:[(0,b.jsx)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-muted-foreground/40 ml-1",children:"MESSAGE"}),(0,b.jsx)(q.Textarea,{value:G,onChange:a=>H(a.target.value),placeholder:"Introduce yourself and explain why you're a good fit...",className:"min-h-[200px] rounded-[2rem] border-2 bg-muted/5 focus:bg-white transition-all p-6 text-lg font-medium leading-relaxed"})]}),(0,b.jsxs)(p.DialogFooter,{className:"gap-4",children:[(0,b.jsx)(f.Button,{variant:"ghost",className:"h-14 rounded-2xl font-black text-xs uppercase tracking-widest",onClick:()=>F(null),children:"CANCEL"}),(0,b.jsx)(f.Button,{onClick:K,className:"h-14 rounded-2xl px-10 font-black text-xs uppercase tracking-widest shadow-2xl shadow-primary/20",children:"SAVE CHANGES"})]})]})})]})}a.s(["default",()=>t])}];

//# sourceMappingURL=src_71852ece._.js.map