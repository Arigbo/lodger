module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23690);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},63910,a=>{"use strict";let b=(0,a.i(70106).default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);a.s(["Building",()=>b],63910)},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},5084,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f="horizontal",g=["horizontal","vertical"],h=c.forwardRef((a,c)=>{var d;let{decorative:h,orientation:i=f,...j}=a,k=(d=i,g.includes(d))?i:f;return(0,b.jsx)(e.div,{"data-orientation":k,...h?{role:"none"}:{"aria-orientation":"vertical"===k?k:void 0,role:"separator"},...j,ref:c})});h.displayName="Separator";var i=a.i(23690);let j=c.forwardRef(({className:a,orientation:c="horizontal",decorative:d=!0,...e},f)=>(0,b.jsx)(h,{ref:f,decorative:d,orientation:c,className:(0,i.cn)("shrink-0 bg-border","horizontal"===c?"h-[1px] w-full":"h-full w-[1px]",a),...e}));j.displayName=h.displayName,a.s(["Separator",()=>j],5084)},48711,a=>{"use strict";a.i(69387);var b=a.i(60574);let c=async({toUserId:a,type:c,firestore:d,senderName:e,propertyName:f,propertyTitle:g,tenantName:h,link:i,transactionId:j,customMessage:k})=>{let l="New Notification",m="",n="info",o=i||"#";"OFFLINE_PAYMENT_PENDING"===c&&(l="Offline Payment Submitted",m=`${h||"A tenant"} has submitted an offline payment for ${g||"a property"}. Please verify and accept the transfer in Lease Requests.`,n="warning",o="/landlord/requests");try{let c=(0,b.collection)(d,"notifications");await (0,b.addDoc)(c,{userId:a,title:l,message:m,type:n,read:!1,createdAt:new Date().toISOString(),link:o})}catch(a){console.error("Failed to send notification:",a)}};a.s(["sendNotification",0,c])},4416,a=>{"use strict";let b=(0,a.i(70106).default)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["ShieldCheck",()=>b],4416)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},52495,a=>{"use strict";let b=(0,a.i(70106).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);a.s(["ExternalLink",()=>b],52495)},84505,a=>{"use strict";let b=(0,a.i(70106).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);a.s(["Download",()=>b],84505)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},62722,a=>{"use strict";let b=(0,a.i(70106).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],62722)},66593,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(72131),e=a.i(91119),f=a.i(99570),g=a.i(86304),h=a.i(5084);a.i(79597);var i=a.i(36505);a.i(69387);var j=a.i(60574),k=a.i(48711),l=a.i(23690),m=a.i(72228),n=a.i(210),o=a.i(41675),p=a.i(90166),q=a.i(63910),r=a.i(84505),s=a.i(52495),t=a.i(4416),u=a.i(16201),v=a.i(96221),w=a.i(62722),x=a.i(42816),y=a.i(38246);function z(){let a=(0,c.useParams)(),z=(0,c.useRouter)(),A=(0,i.useFirestore)(),B=a.id,[C,D]=(0,d.useState)(null),[E,F]=(0,d.useState)(null),[G,H]=(0,d.useState)(null),[I,J]=(0,d.useState)(!0),[K,L]=(0,d.useState)(!1),[M,N]=(0,d.useState)(!1),O=async()=>{if(B&&A&&C){L(!0);try{let a=(0,j.doc)(A,"transactions",B);await (0,j.updateDoc)(a,{status:"Completed",date:C.date||new Date().toISOString()}),await (0,k.sendNotification)({toUserId:C.tenantId,type:"OFFLINE_PAYMENT_APPROVED",firestore:A,propertyTitle:G?.title||"Property",link:"/student/leases"}),D(a=>a?{...a,status:"Completed",date:a.date||new Date().toISOString()}:null),alert("Payment confirmed successfully!")}catch(a){console.error("Error confirming payment:",a),alert("Failed to confirm payment. Please try again.")}finally{L(!1)}}},P=async()=>{if(B&&A&&C&&confirm("Are you sure you want to deny this payment? This action cannot be undone.")){N(!0);try{let a=(0,j.doc)(A,"transactions",B);await (0,j.updateDoc)(a,{status:"Failed"}),await (0,k.sendNotification)({toUserId:C.tenantId,type:"OFFLINE_PAYMENT_REJECTED",firestore:A,propertyTitle:G?.title||"Property",link:"/student/leases"}),D(a=>a?{...a,status:"Failed"}:null),alert("Payment denied.")}catch(a){console.error("Error denying payment:",a),alert("Failed to deny payment.")}finally{N(!1)}}};return((0,d.useEffect)(()=>{(async()=>{if(B&&A){J(!0);try{let a=await (0,j.getDoc)((0,j.doc)(A,"transactions",B));if(a.exists()){let b={id:a.id,...a.data()};D(b);let c=await (0,j.getDoc)((0,j.doc)(A,"users",b.tenantId));c.exists()&&F({id:c.id,...c.data()});let d=await (0,j.getDoc)((0,j.doc)(A,"properties",b.propertyId));d.exists()&&H({id:d.id,...d.data()})}}catch(a){console.error("Error fetching transaction details:",a)}finally{J(!1)}}})()},[B,A]),I)?(0,b.jsx)(x.default,{}):C?(0,b.jsxs)("div",{className:"space-y-12 pb-32 animate-in fade-in duration-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-2xl hover:bg-white shadow-sm border border-transparent hover:border-muted-foreground/10 transition-all",onClick:()=>z.back(),children:(0,b.jsx)(n.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl md:text-3xl font-black uppercase tracking-tight",children:["Transaction",(0,b.jsx)("span",{className:"text-primary",children:" Details."})]}),(0,b.jsxs)("p",{className:"text-[10px] md:text-sm font-medium text-muted-foreground",children:["Detailed financial record for ID: ",C.id]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,b.jsxs)(e.Card,{className:"rounded-[3rem] border-2 border-white/40 shadow-xl shadow-black/[0.02] bg-white overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-10 border-b border-muted/20 bg-muted/5 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-muted-foreground/40 uppercase tracking-[0.2em]",children:"Transaction Amount"}),(0,b.jsx)("h2",{className:"text-5xl font-black tracking-tighter",children:(0,l.formatPrice)(C.amount,C.currency)})]}),(0,b.jsx)(g.Badge,{className:(0,l.cn)("rounded-full px-6 py-2 text-xs font-black uppercase tracking-widest border-none h-fit","Completed"===C.status?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"Pending"===C.status?"bg-amber-500 text-white shadow-lg shadow-amber-500/20":"bg-red-500 text-white shadow-lg shadow-red-500/20"),children:C.status})]}),(0,b.jsxs)(e.CardContent,{className:"p-10",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-2xl bg-primary/5 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(o.Calendar,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1",children:"Payment Date"}),(0,b.jsx)("p",{className:"text-lg font-bold",children:C.date?(0,m.format)(new Date(C.date),"MMMM dd, yyyy"):"Processing"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:C.date?(0,m.format)(new Date(C.date),"HH:mm:ss"):""})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-2xl bg-primary/5 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(p.DollarSign,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1",children:"Transaction Type"}),(0,b.jsx)("p",{className:"text-lg font-bold",children:C.type}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground font-medium",children:["Recorded via ",C.paymentMethod||C.method||"System"]})]})]})]}),(0,b.jsx)("div",{className:"space-y-8",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-2xl bg-primary/5 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(t.ShieldCheck,{className:"h-6 w-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1",children:"Reference ID"}),(0,b.jsx)("p",{className:"text-lg font-bold break-all",children:C.paymentIntentId||C.paymentIntentId||C.id}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Stripe/Internal Mapping"})]})]})})]}),(0,b.jsx)(h.Separator,{className:"my-10"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h3",{className:"text-sm font-black uppercase tracking-widest",children:"Digital Audit Trail"}),(0,b.jsxs)("div",{className:"p-6 rounded-2xl bg-muted/5 border border-muted/10 font-mono text-xs space-y-2 opacity-60",children:[(0,b.jsxs)("p",{children:["LANDLORD_ID: ",C.landlordId]}),(0,b.jsxs)("p",{children:["TENANT_ID: ",C.tenantId]}),(0,b.jsxs)("p",{children:["PROPERTY_ID: ",C.propertyId]}),(0,b.jsxs)("p",{children:["CURRENCY: ",C.currency||"USD"]}),(0,b.jsxs)("p",{children:["TIMESTAMP: ",new Date().toISOString()]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[("Pending"===C.status||"Pending Verification"===C.status)&&("Offline"===C.paymentMethod||"Offline"===C.method)&&(0,b.jsxs)("div",{className:"flex gap-4 flex-1",children:[(0,b.jsxs)(f.Button,{onClick:P,disabled:M||K,variant:"destructive",className:"h-14 rounded-2xl font-black text-xs uppercase tracking-widest gap-2 bg-red-500 hover:bg-red-600 shadow-lg shadow-red-500/20 px-8",children:[M?(0,b.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(w.XCircle,{className:"h-4 w-4"}),"Deny"]}),(0,b.jsxs)(f.Button,{onClick:O,disabled:K||M,className:"flex-1 h-14 rounded-2xl font-black text-xs uppercase tracking-widest gap-2 bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg shadow-emerald-500/20",children:[K?(0,b.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(u.CheckCircle,{className:"h-4 w-4"}),"Confirm Payment"]})]}),(0,b.jsxs)(f.Button,{className:"flex-1 h-14 rounded-2xl font-black text-xs uppercase tracking-widest gap-2",children:[(0,b.jsx)(r.Download,{className:"h-4 w-4"})," Download Receipt"]}),(0,b.jsx)(f.Button,{variant:"outline",className:"h-14 px-8 rounded-2xl border-2 font-black text-xs uppercase tracking-widest gap-2",children:"Print Data"})]})]}),(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)(e.Card,{className:"rounded-[2.5rem] border-2 border-white/40 shadow-xl shadow-black/[0.02] bg-white overflow-hidden",children:[(0,b.jsx)(e.CardHeader,{className:"p-8 border-b border-muted/20",children:(0,b.jsx)(e.CardTitle,{className:"text-sm font-black uppercase tracking-widest",children:"Parties Involved"})}),(0,b.jsxs)(e.CardContent,{className:"p-8 space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-14 w-14 rounded-2xl bg-primary/10 flex items-center justify-center text-primary font-black text-xl uppercase",children:E?.name?.[0]||"U"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-0.5",children:"Tenant"}),(0,b.jsx)("p",{className:"text-base font-black truncate",children:E?.name||"Unknown User"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-medium truncate",children:E?.email})]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-xl",asChild:!0,children:(0,b.jsx)(y.default,{href:`/landlord/messages?conversationId=${E?.id}`,children:(0,b.jsx)(s.ExternalLink,{className:"h-4 w-4"})})})]}),(0,b.jsx)(h.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-14 w-14 rounded-2xl bg-muted/20 flex items-center justify-center text-muted-foreground",children:(0,b.jsx)(q.Building,{className:"h-7 w-7"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-0.5",children:"Property"}),(0,b.jsx)("p",{className:"text-base font-black truncate",children:G?.title||"Deleted Property"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-medium truncate",children:G?.location.address})]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-xl",asChild:!0,children:(0,b.jsx)(y.default,{href:`/landlord/properties/${G?.id}`,children:(0,b.jsx)(s.ExternalLink,{className:"h-4 w-4"})})})]})]})]}),(0,b.jsxs)(e.Card,{className:"rounded-[2.5rem] border-2 border-primary/10 bg-primary/[0.02] p-8 text-center space-y-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center mx-auto",children:(0,b.jsx)(t.ShieldCheck,{className:"h-6 w-6 text-primary"})}),(0,b.jsx)("h4",{className:"font-black uppercase tracking-tight",children:"Verified Archive"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground font-medium leading-relaxed",children:"This transaction record is cryptographically signed and archived for legal audit compliance."})]})]})]})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,b.jsx)("h2",{className:"text-2xl font-black uppercase tracking-tight",children:"Transaction Not Found"}),(0,b.jsx)(f.Button,{variant:"ghost",className:"mt-4",onClick:()=>z.back(),children:"Back to Transactions"})]})}a.s(["default",()=>z])}];

//# sourceMappingURL=_e4c98637._.js.map