module.exports=[19398,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(66351),e=a.i(91119),f=a.i(70430),g=a.i(30656),h=a.i(7554),i=a.i(70121),j=a.i(50104),k=a.i(25152),l=a.i(7827),m=a.i(77994),n=a.i(3688),o=a.i(30553),p=a.i(37738),q=["PageUp","PageDown"],r=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],s={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},t="Slider",[u,v,w]=(0,p.createCollection)(t),[x,y]=(0,j.createContextScope)(t,[w]),[z,A]=x(t),B=c.forwardRef((a,d)=>{let{name:e,min:f=0,max:i=100,step:j=1,orientation:l="horizontal",disabled:m=!1,minStepsBetweenThumbs:n=0,defaultValue:o=[f],value:p,onValueChange:s=()=>{},onValueCommit:t=()=>{},inverted:v=!1,form:w,...x}=a,y=c.useRef(new Set),A=c.useRef(0),B="horizontal"===l,[C=[],D]=(0,k.useControllableState)({prop:p,defaultProp:o,onChange:a=>{let b=[...y.current];b[A.current]?.focus(),s(a)}}),G=c.useRef(C);function H(a,b,{commit:c}={commit:!1}){let d,e=(String(j).split(".")[1]||"").length,h=Math.round((Math.round((a-f)/j)*j+f)*(d=Math.pow(10,e)))/d,k=(0,g.clamp)(h,[f,i]);D((a=[])=>{let d=function(a=[],b,c){let d=[...a];return d[c]=b,d.sort((a,b)=>a-b)}(a,k,b);if(!function(a,b){if(b>0)return Math.min(...a.slice(0,-1).map((b,c)=>a[c+1]-b))>=b;return!0}(d,n*j))return a;{A.current=d.indexOf(k);let b=String(d)!==String(a);return b&&c&&t(d),b?d:a}})}return(0,b.jsx)(z,{scope:a.__scopeSlider,name:e,disabled:m,min:f,max:i,valueIndexToChangeRef:A,thumbs:y.current,values:C,orientation:l,form:w,children:(0,b.jsx)(u.Provider,{scope:a.__scopeSlider,children:(0,b.jsx)(u.Slot,{scope:a.__scopeSlider,children:(0,b.jsx)(B?E:F,{"aria-disabled":m,"data-disabled":m?"":void 0,...x,ref:d,onPointerDown:(0,h.composeEventHandlers)(x.onPointerDown,()=>{m||(G.current=C)}),min:f,max:i,inverted:v,onSlideStart:m?void 0:function(a){let b=function(a,b){if(1===a.length)return 0;let c=a.map(a=>Math.abs(a-b)),d=Math.min(...c);return c.indexOf(d)}(C,a);H(a,b)},onSlideMove:m?void 0:function(a){H(a,A.current)},onSlideEnd:m?void 0:function(){let a=G.current[A.current];C[A.current]!==a&&t(C)},onHomeKeyDown:()=>!m&&H(f,0,{commit:!0}),onEndKeyDown:()=>!m&&H(i,C.length-1,{commit:!0}),onStepKeyDown:({event:a,direction:b})=>{if(!m){let c=q.includes(a.key)||a.shiftKey&&r.includes(a.key),d=A.current;H(C[d]+j*(c?10:1)*b,d,{commit:!0})}}})})})})});B.displayName=t;var[C,D]=x(t,{startEdge:"left",endEdge:"right",size:"width",direction:1}),E=c.forwardRef((a,d)=>{let{min:e,max:f,dir:g,inverted:h,onSlideStart:j,onSlideMove:k,onSlideEnd:m,onStepKeyDown:n,...o}=a,[p,q]=c.useState(null),r=(0,i.useComposedRefs)(d,a=>q(a)),t=c.useRef(void 0),u=(0,l.useDirection)(g),v="ltr"===u,w=v&&!h||!v&&h;function x(a){let b=t.current||p.getBoundingClientRect(),c=Q([0,b.width],w?[e,f]:[f,e]);return t.current=b,c(a-b.left)}return(0,b.jsx)(C,{scope:a.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:(0,b.jsx)(G,{dir:u,"data-orientation":"horizontal",...o,ref:r,style:{...o.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:a=>{let b=x(a.clientX);j?.(b)},onSlideMove:a=>{let b=x(a.clientX);k?.(b)},onSlideEnd:()=>{t.current=void 0,m?.()},onStepKeyDown:a=>{let b=s[w?"from-left":"from-right"].includes(a.key);n?.({event:a,direction:b?-1:1})}})})}),F=c.forwardRef((a,d)=>{let{min:e,max:f,inverted:g,onSlideStart:h,onSlideMove:j,onSlideEnd:k,onStepKeyDown:l,...m}=a,n=c.useRef(null),o=(0,i.useComposedRefs)(d,n),p=c.useRef(void 0),q=!g;function r(a){let b=p.current||n.current.getBoundingClientRect(),c=Q([0,b.height],q?[f,e]:[e,f]);return p.current=b,c(a-b.top)}return(0,b.jsx)(C,{scope:a.__scopeSlider,startEdge:q?"bottom":"top",endEdge:q?"top":"bottom",size:"height",direction:q?1:-1,children:(0,b.jsx)(G,{"data-orientation":"vertical",...m,ref:o,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:a=>{let b=r(a.clientY);h?.(b)},onSlideMove:a=>{let b=r(a.clientY);j?.(b)},onSlideEnd:()=>{p.current=void 0,k?.()},onStepKeyDown:a=>{let b=s[q?"from-bottom":"from-top"].includes(a.key);l?.({event:a,direction:b?-1:1})}})})}),G=c.forwardRef((a,c)=>{let{__scopeSlider:d,onSlideStart:e,onSlideMove:f,onSlideEnd:g,onHomeKeyDown:i,onEndKeyDown:j,onStepKeyDown:k,...l}=a,m=A(t,d);return(0,b.jsx)(o.Primitive.span,{...l,ref:c,onKeyDown:(0,h.composeEventHandlers)(a.onKeyDown,a=>{"Home"===a.key?(i(a),a.preventDefault()):"End"===a.key?(j(a),a.preventDefault()):q.concat(r).includes(a.key)&&(k(a),a.preventDefault())}),onPointerDown:(0,h.composeEventHandlers)(a.onPointerDown,a=>{let b=a.target;b.setPointerCapture(a.pointerId),a.preventDefault(),m.thumbs.has(b)?b.focus():e(a)}),onPointerMove:(0,h.composeEventHandlers)(a.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&f(a)}),onPointerUp:(0,h.composeEventHandlers)(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&(b.releasePointerCapture(a.pointerId),g(a))})})}),H="SliderTrack",I=c.forwardRef((a,c)=>{let{__scopeSlider:d,...e}=a,f=A(H,d);return(0,b.jsx)(o.Primitive.span,{"data-disabled":f.disabled?"":void 0,"data-orientation":f.orientation,...e,ref:c})});I.displayName=H;var J="SliderRange",K=c.forwardRef((a,d)=>{let{__scopeSlider:e,...f}=a,g=A(J,e),h=D(J,e),j=c.useRef(null),k=(0,i.useComposedRefs)(d,j),l=g.values.length,m=g.values.map(a=>P(a,g.min,g.max)),n=l>1?Math.min(...m):0,p=100-Math.max(...m);return(0,b.jsx)(o.Primitive.span,{"data-orientation":g.orientation,"data-disabled":g.disabled?"":void 0,...f,ref:k,style:{...a.style,[h.startEdge]:n+"%",[h.endEdge]:p+"%"}})});K.displayName=J;var L="SliderThumb",M=c.forwardRef((a,d)=>{let e=v(a.__scopeSlider),[f,g]=c.useState(null),h=(0,i.useComposedRefs)(d,a=>g(a)),j=c.useMemo(()=>f?e().findIndex(a=>a.ref.current===f):-1,[e,f]);return(0,b.jsx)(N,{...a,ref:h,index:j})}),N=c.forwardRef((a,d)=>{var e,f,g,j,k;let l,m,{__scopeSlider:p,index:q,name:r,...s}=a,t=A(L,p),v=D(L,p),[w,x]=c.useState(null),y=(0,i.useComposedRefs)(d,a=>x(a)),z=!w||t.form||!!w.closest("form"),B=(0,n.useSize)(w),C=t.values[q],E=void 0===C?0:P(C,t.min,t.max),F=(e=q,(f=t.values.length)>2?`Value ${e+1} of ${f}`:2===f?["Minimum","Maximum"][e]:void 0),G=B?.[v.size],H=G?(g=G,j=E,k=v.direction,m=Q([0,50],[0,l=g/2]),(l-m(j)*k)*k):0;return c.useEffect(()=>{if(w)return t.thumbs.add(w),()=>{t.thumbs.delete(w)}},[w,t.thumbs]),(0,b.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[v.startEdge]:`calc(${E}% + ${H}px)`},children:[(0,b.jsx)(u.ItemSlot,{scope:a.__scopeSlider,children:(0,b.jsx)(o.Primitive.span,{role:"slider","aria-label":a["aria-label"]||F,"aria-valuemin":t.min,"aria-valuenow":C,"aria-valuemax":t.max,"aria-orientation":t.orientation,"data-orientation":t.orientation,"data-disabled":t.disabled?"":void 0,tabIndex:t.disabled?void 0:0,...s,ref:y,style:void 0===C?{display:"none"}:a.style,onFocus:(0,h.composeEventHandlers)(a.onFocus,()=>{t.valueIndexToChangeRef.current=q})})}),z&&(0,b.jsx)(O,{name:r??(t.name?t.name+(t.values.length>1?"[]":""):void 0),form:t.form,value:C},q)]})});M.displayName=L;var O=c.forwardRef(({__scopeSlider:a,value:d,...e},f)=>{let g=c.useRef(null),h=(0,i.useComposedRefs)(g,f),j=(0,m.usePrevious)(d);return c.useEffect(()=>{let a=g.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(j!==d&&b){let c=new Event("input",{bubbles:!0});b.call(a,d),a.dispatchEvent(c)}},[j,d]),(0,b.jsx)(o.Primitive.input,{style:{display:"none"},...e,ref:h,defaultValue:d})});function P(a,b,c){return(0,g.clamp)(100/(c-b)*(a-b),[0,100])}function Q(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}O.displayName="RadioBubbleInput";var R=a.i(23690);let S=c.forwardRef(({className:a,...c},d)=>(0,b.jsxs)(B,{ref:d,className:(0,R.cn)("relative flex w-full touch-none select-none items-center",a),...c,children:[(0,b.jsx)(I,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,b.jsx)(K,{className:"absolute h-full bg-primary"})}),(0,b.jsx)(M,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));S.displayName=B.displayName;var T=a.i(80701),U=a.i(15055),V=a.i(99570);a.i(8467);var W=a.i(71111),X=a.i(24987),Y=a.i(97063),Z=a.i(66718),$=a.i(33937),_=a.i(11222),aa=a.i(54614),ab=a.i(5975),ac=a.i(54243);function ad({onFilterChange:a,onReset:d,initialFilters:g,onLocationSuccess:h,schoolsInArea:i,availableStates:j,userCurrency:k="USD",className:l}){let{toast:m}=(0,aa.useToast)(),[n,o]=(0,c.useState)(g||{}),[p,q]=(0,c.useState)(g?.price||3e3);(0,c.useEffect)(()=>{g&&(o(g),q(g.price||("NGN"===k?1e6:"GHS"===k?1e4:3e3)))},[g,k]);let r=(b,c)=>{let d={...n,[b]:c};["country","state","city","school"].includes(b)&&(d.useCurrentLocation=!1),o(d),a({...d,price:p})};return(0,b.jsxs)(e.Card,{className:(0,R.cn)("h-full",l),children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"font-headline",children:"Filter & Sort"})}),(0,b.jsxs)(e.CardContent,{className:"grid gap-6",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{htmlFor:"country",children:"Country"}),(0,b.jsx)(ab.Combobox,{options:$.countries.map(a=>({label:a.name,value:a.name})),value:n.country,onChange:a=>r("country",a),placeholder:"Select Country",disabled:n.useCurrentLocation})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{htmlFor:"state",children:"State"}),(0,b.jsx)(ab.Combobox,{options:n.country?$.countries.find(a=>a.name===n.country)?.states.map(a=>({label:a.name,value:a.name}))||[]:j.map(a=>({label:a,value:a})),value:n.state,onChange:a=>r("state",a),placeholder:"Select State",disabled:n.useCurrentLocation,emptyText:n.country?"No states found":"Select a country or use existing properties"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{htmlFor:"city",children:"City"}),(0,b.jsx)(Z.Input,{id:"city",placeholder:"Enter city",value:n.city||"",onChange:a=>r("city",a.target.value),disabled:n.useCurrentLocation})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{htmlFor:"school",children:"School"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{className:"flex-grow",children:null!==i?(0,b.jsx)(ab.Combobox,{options:(i||[]).map(a=>({label:a,value:a})),value:n.school,onChange:a=>r("school",a),placeholder:"Select School",disabled:n.useCurrentLocation&&0===(i?.length||0),emptyText:"No schools found in this area."}):(0,b.jsx)(ac.SchoolCombobox,{value:n.school,onChange:a=>r("school",a),placeholder:"Select School",disabled:n.useCurrentLocation})}),(0,b.jsxs)(V.Button,{variant:"outline",size:"icon",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{h({lat:a.coords.latitude,lng:a.coords.longitude})},b=>{console.error("Geolocation error:",b),alert("Could not get your location. Please ensure location services are enabled and try again.");let c={...n,useCurrentLocation:!1};o(c),a(c)}):alert("Geolocation is not supported by this browser.")},children:[(0,b.jsx)(X.MapPin,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Use current location"})]})]}),n.useCurrentLocation&&(0,b.jsx)("p",{className:"text-xs text-primary",children:"Showing properties near you."})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsxs)(f.Label,{children:["Max Price: ",(0,R.formatPrice)(p,k)]}),(0,b.jsx)(S,{value:[p],onValueChange:b=>{q(b[0]),a({...n,price:b[0]})},max:"NGN"===k?5e6:"GHS"===k?5e4:1e4,min:"NGN"===k?5e4:"GHS"===k?500:100,step:"NGN"===k?1e4:"GHS"===k?100:50})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{htmlFor:"property-type",children:"Property Type"}),(0,b.jsxs)(T.Select,{value:n.propertyType,onValueChange:a=>r("propertyType",a),children:[(0,b.jsx)(T.SelectTrigger,{id:"property-type",children:(0,b.jsx)(T.SelectValue,{placeholder:"Any"})}),(0,b.jsxs)(T.SelectContent,{children:[(0,b.jsx)(T.SelectItem,{value:"any",children:"Any"}),_.PROPERTY_TYPES.map(a=>(0,b.jsx)(T.SelectItem,{value:a.value,className:"group",children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full gap-2 min-w-[120px]",children:[(0,b.jsx)("span",{children:a.label}),(0,b.jsx)("div",{role:"button",className:"p-1 hover:bg-muted rounded-full transition-colors opacity-50 group-hover:opacity-100",onClick:b=>{b.preventDefault(),b.stopPropagation(),m({title:a.label,description:a.description})},children:(0,b.jsx)(Y.Info,{className:"h-3 w-3"})})]})},a.value))]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{htmlFor:"bedrooms",children:"Beds"}),(0,b.jsxs)(T.Select,{value:n.bedrooms,onValueChange:a=>r("bedrooms",a),children:[(0,b.jsx)(T.SelectTrigger,{id:"bedrooms",children:(0,b.jsx)(T.SelectValue,{placeholder:"Any"})}),(0,b.jsxs)(T.SelectContent,{children:[(0,b.jsx)(T.SelectItem,{value:"any",children:"Any"}),(0,b.jsx)(T.SelectItem,{value:"1",children:"1"}),(0,b.jsx)(T.SelectItem,{value:"2",children:"2"}),(0,b.jsx)(T.SelectItem,{value:"3",children:"3"}),(0,b.jsx)(T.SelectItem,{value:"4",children:"4+"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{htmlFor:"bathrooms",children:"Baths"}),(0,b.jsxs)(T.Select,{value:n.bathrooms,onValueChange:a=>r("bathrooms",a),children:[(0,b.jsx)(T.SelectTrigger,{id:"bathrooms",children:(0,b.jsx)(T.SelectValue,{placeholder:"Any"})}),(0,b.jsxs)(T.SelectContent,{children:[(0,b.jsx)(T.SelectItem,{value:"any",children:"Any"}),(0,b.jsx)(T.SelectItem,{value:"1",children:"1"}),(0,b.jsx)(T.SelectItem,{value:"2",children:"2"}),(0,b.jsx)(T.SelectItem,{value:"3",children:"3+"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(f.Label,{children:"Amenities"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:W.amenities.slice(0,6).map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(U.Checkbox,{id:a.toLowerCase().replace(/[\s-]/g,""),checked:!!n.amenities?.includes(a),onCheckedChange:b=>{var c;let d;return c=!!b,d=n.amenities||[],void r("amenities",c?[...d,a]:d.filter(b=>b!==a))}}),(0,b.jsx)(f.Label,{htmlFor:a.toLowerCase().replace(/[\s-]/g,""),className:"text-sm font-normal",children:a})]},a))})]})]}),(0,b.jsx)(e.CardFooter,{className:"flex-col gap-2",children:(0,b.jsx)(V.Button,{variant:"ghost",className:"w-full",onClick:()=>{q("NGN"===k?1e6:"GHS"===k?1e4:3e3),d()},children:"Reset All Filters"})})]})}var ae=a.i(87532),af=a.i(70106);let ag=(0,af.default)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var ah=a.i(81010),ai=a.i(59637);a.i(79597);var aj=a.i(36505),ak=a.i(73810),al=a.i(28137);a.i(69387);var am=a.i(60574),an=a.i(42816),ao=a.i(86304),ap=a.i(57061),aq=a.i(99209),ar=a.i(69769);let as=(0,af.default)("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);var at=a.i(8406),au=a.i(24669),av=a.i(21374);function aw({title:a,description:c,properties:e,icon:f,delay:g=0}){return 0===e.length?null:(0,b.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",style:{animationDelay:`${g}ms`},children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-primary font-bold uppercase tracking-wider text-[10px] md:text-xs",children:[(0,b.jsx)(f,{className:"h-3.5 w-3.5 md:h-4 w-4"}),(0,b.jsx)("span",{children:a})]}),(0,b.jsx)("div",{className:"flex items-end justify-between gap-4",children:(0,b.jsx)("h2",{className:"text-xl md:text-3xl font-black tracking-tight leading-tight",children:c||`Premium ${a}`})})]}),(0,b.jsx)("div",{className:"relative -mx-4 sm:-mx-6 lg:-mx-8",children:(0,b.jsxs)("div",{className:"flex gap-4 md:gap-6 overflow-x-auto pb-8 pt-2 px-4 sm:px-6 lg:px-8 no-scrollbar scroll-smooth snap-x snap-mandatory",children:[e.map((a,c)=>(0,b.jsx)("div",{className:"min-w-[85vw] sm:min-w-[380px] lg:min-w-[420px] snap-start",children:(0,b.jsx)(d.default,{property:a,className:"h-full shadow-lg shadow-black/[0.03]"})},a.id)),(0,b.jsx)("div",{className:"min-w-[20px] sm:min-w-[40px] shrink-0"})]})})]})}function ax(){let{user:a}=(0,aj.useUser)(),f=(0,aj.useFirestore)(),g=(0,aj.useMemoFirebase)(()=>a?(0,am.doc)(f,"users",a.uid):null,[a,f]),{data:h,isLoading:i}=(0,al.useDoc)(g),j=(0,aj.useMemoFirebase)(()=>(0,am.query)((0,am.collection)(f,"properties"),(0,am.where)("status","==","available")),[f]),{data:k,isLoading:l}=(0,ak.useCollection)(j),[m,n]=(0,c.useState)({useCurrentLocation:!1}),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)("newest"),A=(0,c.useMemo)(()=>h?.currency?h.currency:h?.country?(0,ai.getCurrencyByCountry)(h.country):"USD",[h]),B=(0,c.useMemo)(()=>{if(!k)return[];let a=k;return m.country&&(a=a.filter(a=>a.location.country===m.country)),[...new Set(a.map(a=>a.location.state))]},[k,m.country]);(0,c.useEffect)(()=>{h&&!u&&(n(a=>({...a,country:h.country||a.country,state:h.state||a.state,school:h.school||a.school})),v(!0))},[h,u]),(0,c.useEffect)(()=>{if(!k)return;let a=k;if(a=a.filter(a=>"available"===a.status),m.useCurrentLocation&&o?a=a.filter(a=>!!a.location.lat&&!!a.location.lng&&10>(0,R.haversineDistance)(o,{lat:a.location.lat,lng:a.location.lng})):(m.country&&(a=a.filter(a=>a.location.country===m.country)),m.state&&(a=a.filter(a=>a.location.state.toLowerCase().includes(m.state.toLowerCase()))),m.city&&(a=a.filter(a=>a.location.city.toLowerCase().includes(m.city.toLowerCase()))),m.school&&(a=a.filter(a=>a.location.school?.toLowerCase().includes(m.school.toLowerCase())))),m.price&&(a=a.filter(a=>(0,ai.convertCurrency)(a.price,a.currency,A)<=m.price)),m.propertyType&&"any"!==m.propertyType&&(a=a.filter(a=>a.type===m.propertyType)),m.bedrooms&&"any"!==m.bedrooms&&(a="4"===m.bedrooms?a.filter(a=>a.bedrooms>=4):a.filter(a=>a.bedrooms===parseInt(m.bedrooms))),m.bathrooms&&"any"!==m.bathrooms&&(a="3"===m.bathrooms?a.filter(a=>a.bathrooms>=3):a.filter(a=>a.bathrooms===parseInt(m.bathrooms))),m.amenities&&m.amenities.length>0&&(a=a.filter(a=>m.amenities.every(b=>a.amenities.includes(b)))),w){let b=w.toLowerCase().trim();a=a.filter(a=>a.title.toLowerCase().includes(b)||a.location.address.toLowerCase().includes(b)||a.location.city.toLowerCase().includes(b)||a.location.state.toLowerCase().includes(b)||a.location.school?.toLowerCase().includes(b)||a.type.toLowerCase().includes(b))}a.sort((a,b)=>{let c=(0,ai.convertCurrency)(a.price,a.currency,A),d=(0,ai.convertCurrency)(b.price,b.currency,A);switch(y){case"price-asc":return c-d;case"price-desc":return d-c;case"bedrooms-desc":return b.bedrooms-a.bedrooms;case"area-desc":return b.area-a.area;default:return b.id.localeCompare(a.id)}}),r(a)},[m,o,k,w,y,A]);let C=(0,c.useMemo)(()=>{if(!k||0===k.length)return[];let a=k.filter(a=>h?.school&&a.location.school?.toLowerCase()===h.school.toLowerCase()),b=k.filter(a=>h?.city&&a.location.city?.toLowerCase()===h.city.toLowerCase()),c=[...k].sort((a,b)=>(0,ai.convertCurrency)(a.price,a.currency,A)-(0,ai.convertCurrency)(b.price,b.currency,A)),d=[...k].sort((a,b)=>{let c=a=>{let b;return b=0+Math.min(5*(a.amenities?.length||0),50),h?.school&&a.location.school?.toLowerCase()===h.school.toLowerCase()&&(b+=50),b},d=c(a),e=c(b);return d!==e?e-d:b.id.localeCompare(a.id)}),e=[...k].sort((a,b)=>b.id.localeCompare(a.id));return[{id:"near-school",title:"Near Your School",description:`Apartments near ${h?.school||"University"}`,icon:ar.GraduationCap,properties:a},{id:"recommended",title:"Highly Recommended",description:"Curated premium homes for you",icon:av.Star,properties:d},{id:"in-city",title:"In Your City",description:`Best listings in ${h?.city||"your area"}`,icon:as,properties:b},{id:"budget",title:"Budget Friendly",description:"Premium homes within your reach",icon:au.TrendingUp,properties:c},{id:"recent",title:"Recently Added",description:"Freshly listed for you",icon:at.Sparkles,properties:e}]},[k,h,A]),D=(0,c.useMemo)(()=>w.trim().length>0||Object.keys(m).filter(a=>"useCurrentLocation"===a?m[a]:void 0!==m[a]&&("amenities"===a?m[a]&&m[a].length>0:!["country","state","school"].includes(a)||m[a]!==h?.[a])).length>0||"newest"!==y,[m,w,y,h]),E=a=>{!1===a.useCurrentLocation&&(p(null),t(null)),n(a)},F=a=>{if(!k||0===k.length)return;p(a);let b=null,c=1/0;for(let d of k)if(d.location.lat&&d.location.lng){let e=(0,R.haversineDistance)(a,{lat:d.location.lat,lng:d.location.lng});e<c&&(c=e,b=d)}if(b&&c<50){let a=b.location.state,c=b.location.country;t([...new Set(k.filter(b=>b.location.state===a&&b.location.school).map(a=>a.location.school))]),n(b=>({...b,useCurrentLocation:!0,country:c,state:a,school:void 0}))}else t([]),n(a=>({...a,useCurrentLocation:!0}))},G=()=>{n({country:void 0,state:void 0,city:void 0,school:void 0,useCurrentLocation:!1,price:void 0,propertyType:void 0,bedrooms:void 0,bathrooms:void 0,amenities:[]}),p(null),t(null),x(""),z("newest")};return i||l?(0,b.jsx)(an.default,{}):(0,b.jsxs)("div",{className:"w-full py-8 space-y-12 animate-in fade-in duration-700 overflow-x-visible",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("h1",{className:"font-headline text-3xl md:text-4xl font-black tracking-tight text-foreground uppercase",children:["Find ",(0,b.jsx)("span",{className:"text-primary",children:"Property."})]}),(0,b.jsx)("div",{className:"h-1 w-12 bg-primary rounded-full"})]}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative group flex-1 w-full",children:[(0,b.jsx)(ae.Search,{className:"absolute left-5 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground group-focus-within:text-primary transition-colors"}),(0,b.jsx)(Z.Input,{placeholder:"Search by name, city, or university...",className:"h-14 pl-14 pr-6 rounded-2xl border-muted/20 bg-white shadow-sm text-lg font-medium placeholder:text-muted-foreground/40 focus-visible:ring-2 focus-visible:ring-primary/10 transition-all",value:w,onChange:a=>x(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:[(0,b.jsx)("div",{className:"lg:hidden w-full",children:(0,b.jsxs)(ap.Sheet,{children:[(0,b.jsx)(ap.SheetTrigger,{asChild:!0,children:(0,b.jsxs)(V.Button,{variant:"outline",className:"h-14 w-full rounded-2xl px-6 gap-3 border-muted/20 bg-white shadow-sm font-bold hover:bg-primary/5 hover:text-primary transition-all",children:[(0,b.jsx)(ag,{className:"h-5 w-5"}),"Filters",(0,b.jsx)(ao.Badge,{className:"bg-primary/10 text-primary border-none font-black h-5 w-5 p-0 flex items-center justify-center",children:Object.keys(m).filter(a=>void 0!==m[a]&&!1!==m[a]).length})]})}),(0,b.jsxs)(ap.SheetContent,{side:"bottom",className:"h-[90vh] p-0 rounded-t-3xl",children:[(0,b.jsxs)("div",{className:"bg-muted/30 p-6 border-b flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-bold text-lg text-foreground",children:"Filter Properties"}),(0,b.jsx)(V.Button,{variant:"ghost",size:"sm",onClick:G,className:"text-primary hover:text-primary hover:bg-primary/10 font-bold rounded-xl px-4",children:"Reset"})]}),(0,b.jsx)("div",{className:"h-[calc(90vh-80px)] overflow-y-auto p-6 custom-scrollbar",children:(0,b.jsx)(ad,{onFilterChange:E,onReset:G,initialFilters:m,onLocationSuccess:F,schoolsInArea:s,availableStates:B,userCurrency:A,className:"border-0 shadow-none p-0"})})]})]})}),(0,b.jsx)("div",{className:"hidden lg:block",children:(0,b.jsxs)(aq.Popover,{children:[(0,b.jsx)(aq.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(V.Button,{variant:"outline",className:"h-14 rounded-2xl px-6 gap-3 border-muted/20 bg-white shadow-sm font-bold hover:bg-primary/5 hover:text-primary transition-all",children:[(0,b.jsx)(ag,{className:"h-5 w-5"}),"Filters",(0,b.jsx)(ao.Badge,{className:"bg-primary/10 text-primary border-none font-black h-5 w-5 p-0 flex items-center justify-center",children:Object.keys(m).filter(a=>void 0!==m[a]&&!1!==m[a]).length})]})}),(0,b.jsxs)(aq.PopoverContent,{className:"w-[90vw] max-w-[500px] p-0 rounded-3xl overflow-hidden border-none shadow-2xl mt-2",align:"end",children:[(0,b.jsxs)("div",{className:"bg-muted/30 p-6 border-b flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-bold text-lg text-foreground",children:"Filter Properties"}),(0,b.jsx)(V.Button,{variant:"ghost",size:"sm",onClick:G,className:"text-primary hover:text-primary hover:bg-primary/10 font-bold rounded-xl px-4",children:"Reset"})]}),(0,b.jsx)("div",{className:"max-h-[70vh] overflow-y-auto p-6 custom-scrollbar",children:(0,b.jsx)(ad,{onFilterChange:E,onReset:G,initialFilters:m,onLocationSuccess:F,schoolsInArea:s,availableStates:B,userCurrency:A,className:"border-0 shadow-none p-0"})})]})]})}),(0,b.jsxs)(T.Select,{value:y,onValueChange:z,children:[(0,b.jsx)(T.SelectTrigger,{className:"h-14 w-full lg:w-[220px] rounded-2xl border-muted/20 bg-white shadow-sm font-bold px-6 focus:ring-2 focus:ring-primary/10",children:(0,b.jsx)(T.SelectValue,{placeholder:"Sort"})}),(0,b.jsxs)(T.SelectContent,{className:"rounded-2xl border-none shadow-3xl p-2 mt-2",children:[(0,b.jsx)(T.SelectItem,{value:"newest",className:"rounded-xl py-2.5 font-bold",children:"Newest First"}),(0,b.jsx)(T.SelectItem,{value:"price-asc",className:"rounded-xl py-2.5 font-bold",children:"Price: Low to High"}),(0,b.jsx)(T.SelectItem,{value:"price-desc",className:"rounded-xl py-2.5 font-bold",children:"Price: High to Low"}),(0,b.jsx)(T.SelectItem,{value:"bedrooms-desc",className:"rounded-xl py-2.5 font-bold",children:"Bedrooms: Most First"}),(0,b.jsx)(T.SelectItem,{value:"area-desc",className:"rounded-xl py-2.5 font-bold",children:"Area: Largest First"})]})]})]})]})]}),(0,b.jsx)("div",{className:"space-y-16",children:D?(0,b.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("h2",{className:"text-xl md:text-2xl font-black tracking-tight",children:[q.length," Homes Found"]}),w&&(0,b.jsxs)("p",{className:"text-muted-foreground font-medium",children:['Showing results for "',(0,b.jsx)("span",{className:"text-foreground font-bold",children:w}),'"']})]}),q.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 gap-10 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:q.map((a,c)=>(0,b.jsx)("div",{className:"animate-in fade-in slide-in-from-bottom-6 duration-700 hover:-translate-y-2 transition-all",style:{animationDelay:`${100*c}ms`},children:(0,b.jsx)(d.default,{property:a})},a.id))}):(0,b.jsx)(e.Card,{className:"overflow-hidden border-none bg-white shadow-xl shadow-black/[0.02]",children:(0,b.jsxs)(e.CardContent,{className:"flex flex-col items-center justify-center py-32 text-center",children:[(0,b.jsxs)("div",{className:"relative mb-12",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/10 blur-3xl rounded-full scale-150 animate-pulse"}),(0,b.jsx)("div",{className:"relative flex h-40 w-40 items-center justify-center rounded-[3rem] bg-muted/30",children:(0,b.jsx)(ah.Home,{className:"h-20 w-20 text-primary opacity-20"})})]}),(0,b.jsx)("h3",{className:"text-4xl font-black tracking-tight",children:"No properties found"}),(0,b.jsx)("p",{className:"mx-auto mt-6 max-w-sm text-xl font-medium text-muted-foreground/80 leading-relaxed",children:'"Adjust your search or broad filters to find more premium accommodations in your area."'}),(0,b.jsx)(V.Button,{size:"lg",variant:"outline",className:"mt-12 rounded-2xl px-12 h-14 font-black text-lg border-primary/20 hover:bg-primary/5",onClick:G,children:"Reset All Filters"})]})})]}):(0,b.jsx)("div",{className:"space-y-20",children:C.map((a,c)=>(0,b.jsx)(aw,{title:a.title,description:a.description,icon:a.icon,properties:a.properties,delay:100*c},a.id))})})]})}a.s(["default",()=>ax],19398)}];

//# sourceMappingURL=src_app_student_properties_page_tsx_b1e5780d._.js.map