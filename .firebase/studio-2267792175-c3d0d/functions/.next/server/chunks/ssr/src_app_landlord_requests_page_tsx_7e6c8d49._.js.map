{"version":3,"sources":["../../../../src/app/landlord/requests/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport * as React from 'react';\r\nimport { useState } from 'react';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\r\nimport type { UserProfile, Property, RentalApplication, LeaseAgreement } from '@/types/';\r\nimport { Check, X, Bell, User as UserIcon, MessageSquare, Calendar, Building, Wallet, ArrowRight, ShieldCheck, Clock, ExternalLink } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport LeaseGenerationDialog from '@/components/lease-generation-dialog';\r\nimport { useUser, useFirestore, useMemoFirebase } from '@/firebase';\r\nimport { collection, doc, query, where, getDocs, addDoc, updateDoc, documentId, getDoc } from 'firebase/firestore';\r\nimport { updateDocumentNonBlocking } from '@/firebase/non-blocking-updates';\r\nimport Loading from '@/app/loading';\r\nimport { sendNotification } from '@/lib/notifications';\r\nimport { formatPrice } from '@/utils';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ntype AggregatedRequest = {\r\n  request: RentalApplication;\r\n  applicant: UserProfile | null;\r\n  property: Property | null;\r\n};\r\n\r\n// Helper function to split an array into chunks\r\nfunction chunkArray<T>(array: T[], size: number): T[][] {\r\n  if (array.length === 0) return [];\r\n  const chunks: T[][] = [];\r\n  for (let i = 0; i < array.length; i += size) {\r\n    chunks.push(array.slice(i, i + size));\r\n  }\r\n  return chunks;\r\n}\r\n\r\nexport default function RentalRequestsPage() {\r\n  const { user: landlord, isUserLoading } = useUser();\r\n  const firestore = useFirestore();\r\n  const { toast } = useToast();\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [selectedRequest, setSelectedRequest] = useState<AggregatedRequest | null>(null);\r\n  const [aggregatedRequests, setAggregatedRequests] = useState<AggregatedRequest[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [landlordProfile, setLandlordProfile] = useState<UserProfile | null>(null);\r\n  const [pendingOfflinePayments, setPendingOfflinePayments] = useState<Array<{\r\n    lease: LeaseAgreement;\r\n    tenant: UserProfile | null;\r\n    property: Property | null;\r\n  }>>([]);\r\n\r\n  React.useEffect(() => {\r\n    if (!landlord || !firestore) {\r\n      if (!isUserLoading) setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchLandlordProfile = async () => {\r\n      try {\r\n        const userDocRef = doc(firestore, 'users', landlord.uid);\r\n        const userDocSnap = await getDoc(userDocRef);\r\n        if (userDocSnap.exists()) {\r\n          setLandlordProfile({ id: userDocSnap.id, ...userDocSnap.data() } as UserProfile);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching landlord profile:\", error);\r\n      }\r\n    };\r\n\r\n    fetchLandlordProfile();\r\n\r\n    const fetchRequests = async () => {\r\n      setIsLoading(true);\r\n      const requestsQuery = query(collection(firestore, 'rentalApplications'), where('landlordId', '==', landlord.uid));\r\n      const requestsSnapshot = await getDocs(requestsQuery);\r\n      const allRequests: RentalApplication[] = requestsSnapshot.docs.map((doc: any) => ({ id: doc.id, ...doc.data() } as RentalApplication));\r\n\r\n      if (allRequests.length === 0) {\r\n        setAggregatedRequests([]);\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      const userIds = [...new Set(allRequests.map(req => req.tenantId))].filter(Boolean);\r\n      const propertyIds = [...new Set(allRequests.map(req => req.propertyId))].filter(Boolean);\r\n\r\n      const usersMap = new Map<string, UserProfile>();\r\n      const propertiesMap = new Map<string, Property>();\r\n\r\n      if (userIds.length > 0) {\r\n        const userChunks = chunkArray(userIds, 30);\r\n        for (const chunk of userChunks) {\r\n          const usersQuery = query(collection(firestore, 'users'), where(documentId(), 'in', chunk));\r\n          const userSnapshots = await getDocs(usersQuery);\r\n          userSnapshots.forEach((doc: any) => usersMap.set(doc.id, { id: doc.id, ...doc.data() } as UserProfile));\r\n        }\r\n      }\r\n\r\n      if (propertyIds.length > 0) {\r\n        const propertyChunks = chunkArray(propertyIds, 30);\r\n        for (const chunk of propertyChunks) {\r\n          const propertiesQuery = query(collection(firestore, 'properties'), where(documentId(), 'in', chunk));\r\n          const propertySnapshots = await getDocs(propertiesQuery);\r\n          propertySnapshots.forEach((doc: any) => propertiesMap.set(doc.id, { id: doc.id, ...doc.data() } as Property));\r\n        }\r\n      }\r\n\r\n      const finalRequests: AggregatedRequest[] = allRequests.map(request => ({\r\n        request,\r\n        applicant: usersMap.get(request.tenantId) || null,\r\n        property: propertiesMap.get(request.propertyId) || null,\r\n      }));\r\n\r\n      setAggregatedRequests(finalRequests.sort((a, b) => new Date(b.request.applicationDate).getTime() - new Date(a.request.applicationDate).getTime()));\r\n      setIsLoading(false);\r\n    };\r\n\r\n    fetchRequests();\r\n\r\n    const fetchOfflinePayments = async () => {\r\n      const leasesQuery = query(\r\n        collection(firestore, 'leaseAgreements'),\r\n        where('landlordId', '==', landlord.uid),\r\n        where('paymentMethod', '==', 'offline'),\r\n        where('paymentConfirmed', '==', false)\r\n      );\r\n\r\n      const leasesSnapshot = await getDocs(leasesQuery);\r\n      const leases: LeaseAgreement[] = leasesSnapshot.docs.map((doc: any) => ({ id: doc.id, ...doc.data() } as LeaseAgreement));\r\n\r\n      if (leases.length === 0) {\r\n        setPendingOfflinePayments([]);\r\n        return;\r\n      }\r\n\r\n      const tenantIds = [...new Set(leases.map(l => l.tenantId))].filter(Boolean);\r\n      const propertyIds = [...new Set(leases.map(l => l.propertyId))].filter(Boolean);\r\n\r\n      const tenantsMap = new Map<string, UserProfile>();\r\n      const propertiesMap = new Map<string, Property>();\r\n\r\n      if (tenantIds.length > 0) {\r\n        const tenantChunks = chunkArray(tenantIds, 30);\r\n        for (const chunk of tenantChunks) {\r\n          const tenantsQuery = query(collection(firestore, 'users'), where(documentId(), 'in', chunk));\r\n          const tenantSnapshots = await getDocs(tenantsQuery);\r\n          tenantSnapshots.forEach((doc: any) => tenantsMap.set(doc.id, { id: doc.id, ...doc.data() } as UserProfile));\r\n        }\r\n      }\r\n\r\n      if (propertyIds.length > 0) {\r\n        const propertyChunks = chunkArray(propertyIds, 30);\r\n        for (const chunk of propertyChunks) {\r\n          const propertiesQuery = query(collection(firestore, 'properties'), where(documentId(), 'in', chunk));\r\n          const propertySnapshots = await getDocs(propertiesQuery);\r\n          propertySnapshots.forEach((doc: any) => propertiesMap.set(doc.id, { id: doc.id, ...doc.data() } as Property));\r\n        }\r\n      }\r\n\r\n      const payments = leases.map(lease => ({\r\n        lease,\r\n        tenant: tenantsMap.get(lease.tenantId) || null,\r\n        property: propertiesMap.get(lease.propertyId) || null,\r\n      }));\r\n\r\n      setPendingOfflinePayments(payments);\r\n    };\r\n\r\n    fetchOfflinePayments();\r\n  }, [landlord, firestore, isUserLoading]);\r\n\r\n  const pendingRequests = aggregatedRequests.filter(req => req.request.status === 'pending');\r\n\r\n  const handleAcceptClick = (request: AggregatedRequest) => {\r\n    setSelectedRequest(request);\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const handleDeclineClick = (requestId: string) => {\r\n    const requestRef = doc(firestore, 'rentalApplications', requestId);\r\n    updateDocumentNonBlocking(requestRef, { status: 'declined' });\r\n\r\n    const request = aggregatedRequests.find(r => r.request.id === requestId);\r\n    if (request && request.request.tenantId) {\r\n      sendNotification({\r\n        toUserId: request.request.tenantId,\r\n        type: 'REQUEST_REJECTED',\r\n        firestore: firestore,\r\n        propertyName: request.property?.title,\r\n        link: `/student/requests`\r\n      });\r\n    }\r\n\r\n    setAggregatedRequests(prev => prev.map(ar =>\r\n      ar.request.id === requestId\r\n        ? { ...ar, request: { ...ar.request, status: 'declined' } }\r\n        : ar\r\n    ));\r\n    toast({ title: \"Inquiry Declined\", description: \"The applicant has been notified of your decision.\" });\r\n  };\r\n\r\n  const handleLeaseSigned = async (finalText: string) => {\r\n    if (selectedRequest && landlord) {\r\n      const { request, property } = selectedRequest;\r\n      if (!property) return;\r\n\r\n      const requestRef = doc(firestore, 'rentalApplications', request.id);\r\n      updateDocumentNonBlocking(requestRef, { status: 'approved' });\r\n\r\n      const leaseStartDate = new Date().toISOString();\r\n      const leaseCollectionRef = collection(firestore, 'leaseAgreements');\r\n      const leaseDocRef = await addDoc(leaseCollectionRef, {\r\n        propertyId: property.id,\r\n        landlordId: landlord.uid,\r\n        tenantId: request.tenantId,\r\n        leaseText: finalText,\r\n        landlordSigned: true,\r\n        tenantSigned: false,\r\n        startDate: leaseStartDate,\r\n        endDate: new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toISOString(),\r\n        status: 'pending',\r\n      });\r\n      await updateDoc(leaseDocRef, { id: leaseDocRef.id });\r\n\r\n      await sendNotification({\r\n        toUserId: request.tenantId,\r\n        type: 'REQUEST_ACCEPTED',\r\n        firestore: firestore,\r\n        propertyName: property.title,\r\n        link: `/student/leases/${leaseDocRef.id}`\r\n      });\r\n\r\n      await sendNotification({\r\n        toUserId: request.tenantId,\r\n        type: 'LEASE_GENERATED',\r\n        firestore: firestore,\r\n        propertyName: property.title,\r\n        link: `/student/leases/${leaseDocRef.id}`\r\n      });\r\n\r\n      setAggregatedRequests(prev => prev.map(ar =>\r\n        ar.request.id === request.id\r\n          ? { ...ar, request: { ...ar.request, status: 'approved' } }\r\n          : ar\r\n      ));\r\n      toast({ title: \"Authority Granted\", description: \"Lease protocol initiated and tenant notified.\" });\r\n    }\r\n  };\r\n\r\n  const handleApproveOfflinePayment = async (leaseId: string, tenantId: string, propertyId: string, propertyTitle: string) => {\r\n    try {\r\n      const leaseRef = doc(firestore, 'leaseAgreements', leaseId);\r\n      const propertyRef = doc(firestore, 'properties', propertyId);\r\n\r\n      await updateDoc(leaseRef, {\r\n        paymentConfirmed: true,\r\n        landlordApprovedOfflinePayment: true,\r\n        status: 'active'\r\n      });\r\n\r\n      const leaseDoc = await getDoc(leaseRef);\r\n      const leaseData = leaseDoc.data() as LeaseAgreement;\r\n\r\n      await updateDoc(propertyRef, {\r\n        status: 'occupied',\r\n        currentTenantId: tenantId,\r\n        leaseStartDate: leaseData.startDate\r\n      });\r\n\r\n      const property = pendingOfflinePayments.find(p => p.lease.id === leaseId)?.property;\r\n      await addDoc(collection(firestore, 'transactions'), {\r\n        landlordId: landlord!.uid,\r\n        tenantId: tenantId,\r\n        propertyId: propertyId,\r\n        amount: leaseData.offlinePaymentAmount || property?.price || 0,\r\n        months: leaseData.offlinePaymentMonths || 1,\r\n        currency: leaseData.currency || property?.currency || 'USD',\r\n        date: new Date().toISOString(),\r\n        type: 'Rent',\r\n        paymentMethod: 'Offline',\r\n        status: 'Completed'\r\n      });\r\n\r\n      await sendNotification({\r\n        toUserId: tenantId,\r\n        type: 'OFFLINE_PAYMENT_APPROVED',\r\n        firestore: firestore,\r\n        propertyTitle: propertyTitle,\r\n        link: `/student/tenancy`\r\n      });\r\n\r\n      setPendingOfflinePayments(prev => prev.filter(p => p.lease.id !== leaseId));\r\n      toast({ title: \"Revenue Confirmed\", description: \"Offline payment authenticated successfully.\" });\r\n    } catch (error) {\r\n      console.error('Error approving offline payment:', error);\r\n      toast({ variant: \"destructive\", title: \"Authentication Error\", description: \"Failed to confirm offline revenue.\" });\r\n    }\r\n  };\r\n\r\n  const handleRejectOfflinePayment = async (leaseId: string, tenantId: string, propertyTitle: string) => {\r\n    try {\r\n      const leaseRef = doc(firestore, 'leaseAgreements', leaseId);\r\n      await updateDoc(leaseRef, {\r\n        paymentMethod: null,\r\n        paymentConfirmed: false\r\n      });\r\n\r\n      await sendNotification({\r\n        toUserId: tenantId,\r\n        type: 'OFFLINE_PAYMENT_REJECTED',\r\n        firestore: firestore,\r\n        propertyTitle: propertyTitle,\r\n        link: `/student/leases/${leaseId}`\r\n      });\r\n\r\n      setPendingOfflinePayments(prev => prev.filter(p => p.lease.id !== leaseId));\r\n      toast({ title: \"Payment Rejected\", description: \"Tenant redirected to re-choose payment protocol.\" });\r\n    } catch (error) {\r\n      console.error('Error rejecting offline payment:', error);\r\n    }\r\n  };\r\n\r\n  if (isUserLoading || isLoading) {\r\n    return <Loading />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-16 pb-32 animate-in fade-in duration-1000\">\r\n      {/* Page Header & Stats Section */}\r\n      <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-8 px-2\">\r\n        <div className=\"space-y-4\">\r\n          <h1 className=\"font-headline text-4xl md:text-5xl font-black tracking-tight uppercase\">Requests<span className=\"text-primary text-xl ml-1\">.</span></h1>\r\n          <p className=\"text-lg text-muted-foreground font-medium max-w-2xl leading-relaxed\">\r\n            Manage your incoming applications and verify offline payment transactions in a centralized workflow.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex flex-wrap gap-4\">\r\n          <div className=\"bg-white px-6 md:px-8 py-4 md:py-5 rounded-2xl md:rounded-[2rem] border-2 border-muted/10 shadow-sm flex flex-col justify-center flex-1 md:min-w-[160px]\">\r\n            <p className=\"text-[8px] md:text-[10px] font-black uppercase tracking-[0.2em] text-muted-foreground/60 mb-1\">Active Requests</p>\r\n            <p className=\"text-2xl md:text-3xl font-black tracking-tighter\">{pendingRequests.length}</p>\r\n          </div>\r\n          {pendingOfflinePayments.length > 0 && (\r\n            <div className=\"bg-orange-600 text-white px-6 md:px-8 py-4 md:py-5 rounded-2xl md:rounded-[2rem] shadow-xl shadow-orange-600/20 flex flex-col justify-center flex-1 md:min-w-[160px] animate-in zoom-in duration-500\">\r\n              <p className=\"text-[8px] md:text-[10px] font-black uppercase tracking-[0.2em] text-white/60 mb-1\">Payment Tasks</p>\r\n              <p className=\"text-2xl md:text-3xl font-black tracking-tighter\">{pendingOfflinePayments.length}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Application Stream */}\r\n      <div className=\"space-y-10\">\r\n        <div className=\"flex items-center gap-4 px-2\">\r\n          <div className=\"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center\">\r\n            <UserIcon className=\"h-5 w-5 text-primary\" />\r\n          </div>\r\n          <h2 className=\"text-3xl font-black uppercase tracking-tight\">Active Applications</h2>\r\n        </div>\r\n\r\n        {pendingRequests.length === 0 ? (\r\n          <Card className=\"rounded-[3.5rem] border-2 border-dashed border-foreground/10 bg-muted/5 p-24 text-center space-y-8\">\r\n            <div className=\"h-32 w-32 rounded-[2.5rem] bg-white shadow-2xl flex items-center justify-center mx-auto relative group overflow-hidden\">\r\n              <Bell className=\"h-14 w-14 text-muted-foreground/20 group-hover:scale-110 transition-transform\" />\r\n              <div className=\"absolute inset-0 bg-primary/5 rounded-[2.5rem]\" />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <h3 className=\"text-2xl font-black uppercase tracking-tight\">No Requests</h3>\r\n              <p className=\"text-lg text-muted-foreground max-w-sm mx-auto\">\r\n                No incoming applications at the moment.\r\n              </p>\r\n            </div>\r\n          </Card>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 gap-8\">\r\n            {pendingRequests.map((aggregatedRequest) => {\r\n              const { request, applicant, property } = aggregatedRequest;\r\n              if (!applicant || !property) return null;\r\n              return (\r\n                <Card key={request.id} className=\"group overflow-hidden rounded-[3rem] border-2 border-foreground/5 bg-white hover:shadow-3xl transition-all duration-500 p-8 md:p-10\">\r\n                  <div className=\"flex flex-col lg:flex-row gap-10\">\r\n                    {/* Applicant Profile */}\r\n                    <div className=\"flex items-center gap-6 lg:w-1/3 border-r-2 border-muted/5 pr-10\">\r\n                      <div className=\"relative\">\r\n                        <Avatar className=\"h-24 w-24 rounded-[2rem] ring-4 ring-primary/5 ring-offset-4 ring-offset-white\">\r\n                          <AvatarImage src={applicant?.profileImageUrl} className=\"object-cover\" />\r\n                          <AvatarFallback className=\"bg-muted text-2xl font-black uppercase\">\r\n                            {applicant?.name?.[0]}\r\n                          </AvatarFallback>\r\n                        </Avatar>\r\n                        <div className=\"absolute -bottom-2 -right-2 h-10 w-10 rounded-2xl bg-primary text-white flex items-center justify-center shadow-lg\">\r\n                          <ShieldCheck className=\"h-5 w-5\" />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-primary\">APPLICANT PROFILE</p>\r\n                        <h3 className=\"text-2xl font-black uppercase tracking-tight\">{applicant?.name}</h3>\r\n                        <p className=\"text-xs font-bold text-muted-foreground/60\">{applicant?.email}</p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Property Connection */}\r\n                    <div className=\"flex-1 space-y-6\">\r\n                      <div className=\"flex justify-between items-start\">\r\n                        <div className=\"space-y-2\">\r\n                          <p className=\"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40\">PROPERTY</p>\r\n                          <Link href={`/landlord/properties/${property.id}`} className=\"group/link flex items-center gap-2 text-xl font-black uppercase tracking-tight hover:text-primary transition-colors\">\r\n                            {property.title} <ExternalLink className=\"h-4 w-4 opacity-0 group-hover/link:opacity-100 transition-opacity\" />\r\n                          </Link>\r\n                          <p className=\"text-xs font-medium text-muted-foreground leading-relaxed\">\r\n                            &quot;{request.messageToLandlord || \"Application submitted without a message.\"}&quot;\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <p className=\"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40\">SUBMITTED ON</p>\r\n                          <p className=\"text-sm font-black text-foreground\">{new Date(request.applicationDate).toLocaleDateString(undefined, { month: 'short', day: 'numeric', year: 'numeric' })}</p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex flex-wrap gap-4 pt-4 border-t-2 border-muted/5\">\r\n                        <div className=\"flex items-center gap-2 px-4 py-2 rounded-xl bg-muted/20 text-[10px] font-black uppercase tracking-widest\">\r\n                          <Clock className=\"h-3 w-3 text-primary\" /> Status: {request.status}\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 px-4 py-2 rounded-xl bg-muted/20 text-[10px] font-black uppercase tracking-widest\">\r\n                          <Wallet className=\"h-3 w-3 text-primary\" /> Monthly Rent: {formatPrice(property.price, property.currency)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Decision Matrix */}\r\n                    <div className=\"lg:w-1/4 flex flex-col sm:flex-row lg:flex-col gap-4 justify-center items-stretch lg:border-l-2 lg:border-muted/5 lg:pl-10\">\r\n                      <Button\r\n                        onClick={() => handleAcceptClick(aggregatedRequest)}\r\n                        className=\"h-16 flex-1 rounded-2xl bg-foreground text-white hover:bg-primary transition-all font-black text-[10px] md:text-xs uppercase tracking-widest gap-3 shadow-xl\"\r\n                      >\r\n                        <Check className=\"h-5 w-5\" /> ACCEPT\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => handleDeclineClick(request.id)}\r\n                        className=\"h-16 flex-1 rounded-2xl border-2 hover:bg-destructive hover:text-white hover:border-destructive transition-all font-black text-[10px] md:text-xs uppercase tracking-widest gap-3\"\r\n                      >\r\n                        <X className=\"h-5 w-5\" /> DECLINE\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              )\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Offline Payment Sector */}\r\n      {pendingOfflinePayments.length > 0 && (\r\n        <div className=\"space-y-10\">\r\n          <div className=\"flex items-center gap-4 px-2\">\r\n            <div className=\"h-10 w-10 rounded-xl bg-orange-500/10 flex items-center justify-center\">\r\n              <Wallet className=\"h-5 w-5 text-orange-600\" />\r\n            </div>\r\n            <h2 className=\"text-3xl font-black uppercase tracking-tight\">Offline Payment <span className=\"text-orange-600\">Verification</span></h2>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n            {pendingOfflinePayments.map(({ lease, tenant, property }) => {\r\n              if (!tenant || !property) return null;\r\n              return (\r\n                <Card key={lease.id} className=\"group relative overflow-hidden rounded-[3rem] border-2 border-orange-500/10 bg-white hover:shadow-2xl transition-all duration-500 p-8\">\r\n                  <div className=\"absolute top-0 right-0 w-24 h-24 bg-orange-500/5 rounded-bl-[4rem] -mr-6 -mt-6\" />\r\n\r\n                  <div className=\"space-y-8 relative z-10\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <Avatar className=\"h-16 w-16 rounded-2xl ring-2 ring-orange-500/10\">\r\n                        <AvatarImage src={tenant.profileImageUrl} className=\"object-cover\" />\r\n                        <AvatarFallback className=\"bg-muted text-xl font-black uppercase\">\r\n                          {tenant.name?.[0]}\r\n                        </AvatarFallback>\r\n                      </Avatar>\r\n                      <div>\r\n                        <h4 className=\"text-xl font-black uppercase tracking-tight\">{tenant.name}</h4>\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40\">TENANT</p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-6 rounded-2xl bg-orange-500/5 border-2 border-orange-500/5 space-y-4\">\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-orange-600/60\">OFFLINE PAYMENT</p>\r\n                        <p className=\"text-2xl font-black text-orange-600\">{formatPrice(lease.offlinePaymentAmount || property.price, property.currency)}</p>\r\n                      </div>\r\n                      <div className=\"flex justify-between items-center pt-4 border-t border-orange-500/10\">\r\n                        <p className=\"text-xs font-bold text-muted-foreground/60\">LEASE TERM</p>\r\n                        <p className=\"text-xs font-black uppercase\">{lease.offlinePaymentMonths || 1} Month(s) Pre-Paid</p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4\">\r\n                      <p className=\"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40 text-center\">Verify physical receipt of funds before proceeding</p>\r\n                      <div className=\"grid grid-cols-2 gap-4\">\r\n                        <Button\r\n                          onClick={() => handleApproveOfflinePayment(lease.id, tenant.id, property.id, property.title)}\r\n                          className=\"h-14 rounded-xl bg-orange-600 text-white hover:bg-orange-700 transition-all font-black text-[10px] uppercase tracking-widest gap-2 shadow-lg\"\r\n                        >\r\n                          <Check className=\"h-4 w-4\" /> VERIFY PAYMENT\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          onClick={() => handleRejectOfflinePayment(lease.id, tenant.id, property.title)}\r\n                          className=\"h-14 rounded-xl border-2 border-orange-500/20 hover:bg-orange-50 text-orange-600 transition-all font-black text-[10px] uppercase tracking-widest gap-2\"\r\n                        >\r\n                          <X className=\"h-4 w-4\" /> REJECT\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              )\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {selectedRequest && landlordProfile && selectedRequest.applicant && selectedRequest.property?.leaseTemplate && (\r\n        <LeaseGenerationDialog\r\n          isOpen={dialogOpen}\r\n          onClose={() => setDialogOpen(false)}\r\n          onLeaseSigned={handleLeaseSigned}\r\n          landlord={landlordProfile}\r\n          tenant={selectedRequest.applicant}\r\n          property={selectedRequest.property}\r\n          templateText={selectedRequest.property.leaseTemplate}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}