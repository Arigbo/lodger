(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(4829);let s=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));s.displayName="Card";let l=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...a}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));d.displayName="CardTitle";let n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...a}));n.displayName="CardDescription";let i=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...a}));i.displayName="CardContent";let o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...a}));o.displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>i,"CardDescription",()=>n,"CardFooter",()=>o,"CardHeader",()=>l,"CardTitle",()=>d])},24687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(4829);let s=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));s.displayName="Textarea",e.s(["Textarea",()=>s])},84774,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(4829);let s=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("table",{ref:s,className:(0,r.cn)("w-full caption-bottom text-sm",e),...a}));s.displayName="Table";let l=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("thead",{ref:s,className:(0,r.cn)("[&_tr]:border-b",e),...a}));l.displayName="TableHeader";let d=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("tbody",{ref:s,className:(0,r.cn)("[&_tr:last-child]:border-0",e),...a}));d.displayName="TableBody",a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("tfoot",{ref:s,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("tr",{ref:s,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));n.displayName="TableRow";let i=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("th",{ref:s,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));i.displayName="TableHead";let o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("td",{ref:s,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));o.displayName="TableCell",a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("caption",{ref:s,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption",e.s(["Table",()=>s,"TableBody",()=>d,"TableCell",()=>o,"TableHead",()=>i,"TableHeader",()=>l,"TableRow",()=>n])},27557,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(84774),s=e.i(15288),l=e.i(19455),d=e.i(87486),n=e.i(55436),i=e.i(22016);e.i(11981);var o=e.i(61480),c=e.i(80428);e.i(36180);var u=e.i(17875),x=e.i(90392),m=e.i(4829),p=e.i(68499),f=e.i(76639),h=e.i(24687),g=e.i(74911);function b(e,t){if(0===e.length)return[];let a=[];for(let r=0;r<e.length;r+=t)a.push(e.slice(r,r+t));return a}function N(){let{user:e,isUserLoading:N}=(0,o.useUser)(),w=(0,o.useFirestore)(),[j,y]=a.useState([]),[v,C]=a.useState(!0),T=(0,o.useMemoFirebase)(()=>e?(0,u.query)((0,u.collection)(w,"rentalApplications"),(0,u.where)("tenantId","==",e.uid)):null,[e,w]),{data:k,isLoading:D}=(0,c.useCollection)(T);a.useEffect(()=>{if(!D){if(!k||!w){y([]),C(!1);return}(async()=>{if(C(!0),0===k.length){y([]),C(!1);return}let e=[...new Set(k.map(e=>e.landlordId))].filter(Boolean),t=[...new Set(k.map(e=>e.propertyId))].filter(Boolean),a=new Map,r=new Map;if(e.length>0)for(let t of b(e,30)){let e=(0,u.query)((0,u.collection)(w,"users"),(0,u.where)((0,u.documentId)(),"in",t));(await (0,u.getDocs)(e)).forEach(e=>a.set(e.id,{id:e.id,...e.data()}))}if(t.length>0)for(let e of b(t,30)){let t=(0,u.query)((0,u.collection)(w,"properties"),(0,u.where)((0,u.documentId)(),"in",e));(await (0,u.getDocs)(t)).forEach(e=>r.set(e.id,{id:e.id,...e.data()}))}y(k.map(e=>({request:e,landlord:a.get(e.landlordId)||null,property:r.get(e.propertyId)||null})).sort((e,t)=>new Date(t.request.applicationDate).getTime()-new Date(e.request.applicationDate).getTime())),C(!1)})()}},[k,D,w]);let[A,R]=a.useState(null),[B,E]=a.useState(null),[H,S]=a.useState(""),{toast:q}=(0,g.useToast)(),I=async()=>{if(A&&w)try{await (0,u.deleteDoc)((0,u.doc)(w,"rentalApplications",A)),q({title:"Request Deleted",description:"Your rental application has been cancelled."}),R(null)}catch(e){console.error("Error deleting request:",e),q({variant:"destructive",title:"Error",description:"Could not delete request. Please try again."})}},L=async()=>{if(B&&w)try{await (0,u.updateDoc)((0,u.doc)(w,"rentalApplications",B.id),{messageToLandlord:H}),q({title:"Request Updated",description:"Your application details have been updated."}),E(null)}catch(e){console.error("Error updating request:",e),q({variant:"destructive",title:"Error",description:"Could not update request. Please try again."})}};return N||D||v?(0,t.jsx)(x.default,{}):(0,t.jsxs)("div",{className:"space-y-10 animate-in fade-in duration-700",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"font-headline text-4xl font-black tracking-tight text-foreground underline decoration-primary/20 underline-offset-8 uppercase",children:"Rental Requests"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground font-medium",children:'"Track your active rental applications and inquiries."'})]}),j.length>0?(0,t.jsxs)(s.Card,{className:"overflow-hidden border-2 border-foreground/5 bg-white shadow-xl rounded-[2.5rem]",children:[(0,t.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,t.jsxs)(r.Table,{children:[(0,t.jsx)(r.TableHeader,{children:(0,t.jsxs)(r.TableRow,{className:"bg-muted/30 border-none",children:[(0,t.jsx)(r.TableHead,{className:"px-8 font-bold text-foreground",children:"Property"}),(0,t.jsx)(r.TableHead,{className:"font-bold text-foreground",children:"Landlord"}),(0,t.jsx)(r.TableHead,{className:"font-bold text-foreground",children:"Date Applied"}),(0,t.jsx)(r.TableHead,{className:"font-bold text-foreground",children:"Status"}),(0,t.jsx)(r.TableHead,{className:"text-right px-8 font-bold text-foreground",children:"Actions"})]})}),(0,t.jsx)(r.TableBody,{children:j.map(({request:e,landlord:a,property:s})=>(0,t.jsxs)(r.TableRow,{className:"border-muted/10 hover:bg-muted/5 transition-colors text-[10px] sm:text-xs md:text-sm",children:[(0,t.jsx)(r.TableCell,{className:"px-8 font-bold",children:(0,t.jsx)(i.default,{href:`/student/properties/${s?.id}`,className:"hover:text-primary transition-colors whitespace-nowrap",children:s?.title||"Unknown Property"})}),(0,t.jsx)(r.TableCell,{className:"font-medium whitespace-nowrap",children:a?.name||"N/A"}),(0,t.jsx)(r.TableCell,{className:"font-medium text-muted-foreground whitespace-nowrap",children:new Date(e.applicationDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}),(0,t.jsx)(r.TableCell,{children:(0,t.jsx)(d.Badge,{className:(0,m.cn)("rounded-full px-4 py-1 text-[10px] font-black uppercase tracking-widest border-none","approved"===e.status?"bg-green-500/10 text-green-600":"declined"===e.status?"bg-red-500/10 text-red-600":"bg-primary/10 text-primary"),children:e.status})}),(0,t.jsxs)(r.TableCell,{className:"text-right px-8 space-x-2 whitespace-nowrap",children:["approved"===e.status&&(0,t.jsx)(l.Button,{size:"sm",className:"rounded-xl font-bold",asChild:!0,children:(0,t.jsx)(i.default,{href:"/student/leases",children:"View Lease"})}),"pending"===e.status&&(0,t.jsx)(l.Button,{variant:"outline",size:"sm",className:"rounded-xl font-bold",onClick:()=>{E(e),S(e.messageToLandlord||"")},children:"Edit"}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",className:"rounded-xl font-bold text-red-500 hover:bg-red-50",onClick:()=>R(e.id),children:"pending"===e.status?"Withdraw":"Clear"})]})]},e.id))})]})}),(0,t.jsx)("div",{className:"md:hidden divide-y divide-muted/10",children:j.map(({request:e,landlord:a,property:r})=>(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.default,{href:`/student/properties/${r?.id}`,className:"font-black text-sm uppercase tracking-tight hover:text-primary transition-colors block mb-1",children:r?.title||"Unknown Property"}),(0,t.jsxs)("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest",children:["Applied: ",new Date(e.applicationDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})]})]}),(0,t.jsx)(d.Badge,{className:(0,m.cn)("rounded-full px-3 py-1 text-[9px] font-black uppercase tracking-widest border-none","approved"===e.status?"bg-green-500/10 text-green-600":"declined"===e.status?"bg-red-500/10 text-red-600":"bg-primary/10 text-primary"),children:e.status})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-lg bg-muted/20 flex items-center justify-center text-[10px] font-black uppercase",children:a?.name?.[0]||"L"}),(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:a?.name||"Unknown Landlord"})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:["approved"===e.status?(0,t.jsx)(l.Button,{size:"sm",className:"flex-1 rounded-xl font-black text-[9px] uppercase tracking-widest h-10",asChild:!0,children:(0,t.jsx)(i.default,{href:"/student/leases",children:"View Lease"})}):"pending"===e.status?(0,t.jsx)(l.Button,{variant:"outline",size:"sm",className:"flex-1 rounded-xl font-black text-[9px] uppercase tracking-widest h-10 border-2",onClick:()=>{E(e),S(e.messageToLandlord||"")},children:"Edit"}):null,(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",className:"rounded-xl font-black text-[9px] uppercase tracking-widest text-red-500 h-10 px-4",onClick:()=>R(e.id),children:"pending"===e.status?"Withdraw":"Clear"})]})]},e.id))})]}):(0,t.jsx)(s.Card,{className:"overflow-hidden border-none bg-white shadow-xl shadow-black/[0.02]",children:(0,t.jsxs)(s.CardContent,{className:"flex flex-col items-center justify-center py-24 text-center",children:[(0,t.jsxs)("div",{className:"relative mb-8",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-primary/10 blur-3xl rounded-full scale-150"}),(0,t.jsx)("div",{className:"relative flex h-24 w-24 items-center justify-center rounded-[2rem] bg-muted/30",children:(0,t.jsx)(n.Search,{className:"h-10 w-10 text-primary opacity-20"})})]}),(0,t.jsx)("h2",{className:"text-2xl font-black tracking-tight",children:"No Active Requests"}),(0,t.jsx)("p",{className:"mx-auto mt-2 max-w-sm text-muted-foreground font-medium",children:"You haven't submitted any rental applications yet."}),(0,t.jsx)(l.Button,{className:"mt-8 rounded-2xl px-8 font-bold",asChild:!0,children:(0,t.jsx)(i.default,{href:"/student/properties",children:"Explore Properties"})})]})}),(0,t.jsx)(p.AlertDialog,{open:!!A,onOpenChange:e=>!e&&R(null),children:(0,t.jsxs)(p.AlertDialogContent,{className:"w-[95vw] sm:max-w-md rounded-[2.5rem] border-none shadow-3xl p-10",children:[(0,t.jsxs)(p.AlertDialogHeader,{className:"space-y-4",children:[(0,t.jsx)(p.AlertDialogTitle,{className:"text-3xl font-black",children:"Archive Inquiry?"}),(0,t.jsx)(p.AlertDialogDescription,{className:"text-lg font-medium text-muted-foreground",children:"Are you sure you want to withdraw this application? This action cannot be reversed."})]}),(0,t.jsxs)(p.AlertDialogFooter,{className:"gap-4 mt-8",children:[(0,t.jsx)(p.AlertDialogCancel,{className:"h-14 rounded-2xl border-2 font-black text-xs uppercase tracking-widest",children:"RETAIN"}),(0,t.jsx)(p.AlertDialogAction,{onClick:I,className:"h-14 rounded-2xl bg-red-500 text-white hover:bg-red-600 font-black text-xs uppercase tracking-widest shadow-xl shadow-red-500/20",children:"WITHDRAW APPLICATION"})]})]})}),(0,t.jsx)(f.Dialog,{open:!!B,onOpenChange:e=>!e&&E(null),children:(0,t.jsxs)(f.DialogContent,{className:"sm:max-w-md w-[95vw] rounded-[2.5rem] border-none shadow-3xl p-10",children:[(0,t.jsxs)(f.DialogHeader,{className:"space-y-4",children:[(0,t.jsx)(f.DialogTitle,{className:"text-3xl font-black",children:"Edit Application"}),(0,t.jsx)(f.DialogDescription,{className:"text-lg font-medium text-muted-foreground",children:"Update your message to the landlord."})]}),(0,t.jsxs)("div",{className:"py-8 space-y-3",children:[(0,t.jsx)("label",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-muted-foreground/40 ml-1",children:"MESSAGE"}),(0,t.jsx)(h.Textarea,{value:H,onChange:e=>S(e.target.value),placeholder:"Introduce yourself and explain why you're a good fit...",className:"min-h-[200px] rounded-[2rem] border-2 bg-muted/5 focus:bg-white transition-all p-6 text-lg font-medium leading-relaxed"})]}),(0,t.jsxs)(f.DialogFooter,{className:"gap-4",children:[(0,t.jsx)(l.Button,{variant:"ghost",className:"h-14 rounded-2xl font-black text-xs uppercase tracking-widest",onClick:()=>E(null),children:"CANCEL"}),(0,t.jsx)(l.Button,{onClick:L,className:"h-14 rounded-2xl px-10 font-black text-xs uppercase tracking-widest shadow-2xl shadow-primary/20",children:"SAVE CHANGES"})]})]})})]})}e.s(["default",()=>N])}]);