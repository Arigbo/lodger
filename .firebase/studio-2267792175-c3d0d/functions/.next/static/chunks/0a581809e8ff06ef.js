(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13246,e=>{"use strict";var t=e.i(43476),r=e.i(71645),o=e.i(26842),l=e.i(15288),s=e.i(10204),i=e.i(70152),n=e.i(81140),a=e.i(20783),c=e.i(30030),d=e.i(69340),u=e.i(86318),m=e.i(99682),h=e.i(35804),p=e.i(48425),x=e.i(75830),f=["PageUp","PageDown"],y=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],g={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},v="Slider",[b,j,w]=(0,x.createCollection)(v),[N,C]=(0,c.createContextScope)(v,[w]),[S,k]=N(v),L=r.forwardRef((e,o)=>{let{name:l,min:s=0,max:a=100,step:c=1,orientation:u="horizontal",disabled:m=!1,minStepsBetweenThumbs:h=0,defaultValue:p=[s],value:x,onValueChange:g=()=>{},onValueCommit:v=()=>{},inverted:j=!1,form:w,...N}=e,C=r.useRef(new Set),k=r.useRef(0),L="horizontal"===u,[P=[],R]=(0,d.useControllableState)({prop:x,defaultProp:p,onChange:e=>{let t=[...C.current];t[k.current]?.focus(),g(e)}}),F=r.useRef(P);function E(e,t,{commit:r}={commit:!1}){let o,l=(String(c).split(".")[1]||"").length,n=Math.round((Math.round((e-s)/c)*c+s)*(o=Math.pow(10,l)))/o,d=(0,i.clamp)(n,[s,a]);R((e=[])=>{let o=function(e=[],t,r){let o=[...e];return o[r]=t,o.sort((e,t)=>e-t)}(e,d,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,r)=>e[r+1]-t))>=t;return!0}(o,h*c))return e;{k.current=o.indexOf(d);let t=String(o)!==String(e);return t&&r&&v(o),t?o:e}})}return(0,t.jsx)(S,{scope:e.__scopeSlider,name:l,disabled:m,min:s,max:a,valueIndexToChangeRef:k,thumbs:C.current,values:P,orientation:u,form:w,children:(0,t.jsx)(b.Provider,{scope:e.__scopeSlider,children:(0,t.jsx)(b.Slot,{scope:e.__scopeSlider,children:(0,t.jsx)(L?D:I,{"aria-disabled":m,"data-disabled":m?"":void 0,...N,ref:o,onPointerDown:(0,n.composeEventHandlers)(N.onPointerDown,()=>{m||(F.current=P)}),min:s,max:a,inverted:j,onSlideStart:m?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let r=e.map(e=>Math.abs(e-t)),o=Math.min(...r);return r.indexOf(o)}(P,e);E(e,t)},onSlideMove:m?void 0:function(e){E(e,k.current)},onSlideEnd:m?void 0:function(){let e=F.current[k.current];P[k.current]!==e&&v(P)},onHomeKeyDown:()=>!m&&E(s,0,{commit:!0}),onEndKeyDown:()=>!m&&E(a,P.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!m){let r=f.includes(e.key)||e.shiftKey&&y.includes(e.key),o=k.current;E(P[o]+c*(r?10:1)*t,o,{commit:!0})}}})})})})});L.displayName=v;var[P,R]=N(v,{startEdge:"left",endEdge:"right",size:"width",direction:1}),D=r.forwardRef((e,o)=>{let{min:l,max:s,dir:i,inverted:n,onSlideStart:c,onSlideMove:d,onSlideEnd:m,onStepKeyDown:h,...p}=e,[x,f]=r.useState(null),y=(0,a.useComposedRefs)(o,e=>f(e)),v=r.useRef(void 0),b=(0,u.useDirection)(i),j="ltr"===b,w=j&&!n||!j&&n;function N(e){let t=v.current||x.getBoundingClientRect(),r=U([0,t.width],w?[l,s]:[s,l]);return v.current=t,r(e-t.left)}return(0,t.jsx)(P,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:(0,t.jsx)(F,{dir:b,"data-orientation":"horizontal",...p,ref:y,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=N(e.clientX);c?.(t)},onSlideMove:e=>{let t=N(e.clientX);d?.(t)},onSlideEnd:()=>{v.current=void 0,m?.()},onStepKeyDown:e=>{let t=g[w?"from-left":"from-right"].includes(e.key);h?.({event:e,direction:t?-1:1})}})})}),I=r.forwardRef((e,o)=>{let{min:l,max:s,inverted:i,onSlideStart:n,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...m}=e,h=r.useRef(null),p=(0,a.useComposedRefs)(o,h),x=r.useRef(void 0),f=!i;function y(e){let t=x.current||h.current.getBoundingClientRect(),r=U([0,t.height],f?[s,l]:[l,s]);return x.current=t,r(e-t.top)}return(0,t.jsx)(P,{scope:e.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:(0,t.jsx)(F,{"data-orientation":"vertical",...m,ref:p,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=y(e.clientY);n?.(t)},onSlideMove:e=>{let t=y(e.clientY);c?.(t)},onSlideEnd:()=>{x.current=void 0,d?.()},onStepKeyDown:e=>{let t=g[f?"from-bottom":"from-top"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),F=r.forwardRef((e,r)=>{let{__scopeSlider:o,onSlideStart:l,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:c,onStepKeyDown:d,...u}=e,m=k(v,o);return(0,t.jsx)(p.Primitive.span,{...u,ref:r,onKeyDown:(0,n.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(a(e),e.preventDefault()):"End"===e.key?(c(e),e.preventDefault()):f.concat(y).includes(e.key)&&(d(e),e.preventDefault())}),onPointerDown:(0,n.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),m.thumbs.has(t)?t.focus():l(e)}),onPointerMove:(0,n.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:(0,n.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),i(e))})})}),E="SliderTrack",A=r.forwardRef((e,r)=>{let{__scopeSlider:o,...l}=e,s=k(E,o);return(0,t.jsx)(p.Primitive.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...l,ref:r})});A.displayName=E;var T="SliderRange",M=r.forwardRef((e,o)=>{let{__scopeSlider:l,...s}=e,i=k(T,l),n=R(T,l),c=r.useRef(null),d=(0,a.useComposedRefs)(o,c),u=i.values.length,m=i.values.map(e=>G(e,i.min,i.max)),h=u>1?Math.min(...m):0,x=100-Math.max(...m);return(0,t.jsx)(p.Primitive.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:d,style:{...e.style,[n.startEdge]:h+"%",[n.endEdge]:x+"%"}})});M.displayName=T;var H="SliderThumb",B=r.forwardRef((e,o)=>{let l=j(e.__scopeSlider),[s,i]=r.useState(null),n=(0,a.useComposedRefs)(o,e=>i(e)),c=r.useMemo(()=>s?l().findIndex(e=>e.ref.current===s):-1,[l,s]);return(0,t.jsx)(_,{...e,ref:n,index:c})}),_=r.forwardRef((e,o)=>{var l,s,i,c,d;let u,m,{__scopeSlider:x,index:f,name:y,...g}=e,v=k(H,x),j=R(H,x),[w,N]=r.useState(null),C=(0,a.useComposedRefs)(o,e=>N(e)),S=!w||v.form||!!w.closest("form"),L=(0,h.useSize)(w),P=v.values[f],D=void 0===P?0:G(P,v.min,v.max),I=(l=f,(s=v.values.length)>2?`Value ${l+1} of ${s}`:2===s?["Minimum","Maximum"][l]:void 0),F=L?.[j.size],E=F?(i=F,c=D,d=j.direction,m=U([0,50],[0,u=i/2]),(u-m(c)*d)*d):0;return r.useEffect(()=>{if(w)return v.thumbs.add(w),()=>{v.thumbs.delete(w)}},[w,v.thumbs]),(0,t.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[j.startEdge]:`calc(${D}% + ${E}px)`},children:[(0,t.jsx)(b.ItemSlot,{scope:e.__scopeSlider,children:(0,t.jsx)(p.Primitive.span,{role:"slider","aria-label":e["aria-label"]||I,"aria-valuemin":v.min,"aria-valuenow":P,"aria-valuemax":v.max,"aria-orientation":v.orientation,"data-orientation":v.orientation,"data-disabled":v.disabled?"":void 0,tabIndex:v.disabled?void 0:0,...g,ref:C,style:void 0===P?{display:"none"}:e.style,onFocus:(0,n.composeEventHandlers)(e.onFocus,()=>{v.valueIndexToChangeRef.current=f})})}),S&&(0,t.jsx)(z,{name:y??(v.name?v.name+(v.values.length>1?"[]":""):void 0),form:v.form,value:P},f)]})});B.displayName=H;var z=r.forwardRef(({__scopeSlider:e,value:o,...l},s)=>{let i=r.useRef(null),n=(0,a.useComposedRefs)(i,s),c=(0,m.usePrevious)(o);return r.useEffect(()=>{let e=i.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(c!==o&&t){let r=new Event("input",{bubbles:!0});t.call(e,o),e.dispatchEvent(r)}},[c,o]),(0,t.jsx)(p.Primitive.input,{style:{display:"none"},...l,ref:n,defaultValue:o})});function G(e,t,r){return(0,i.clamp)(100/(r-t)*(e-t),[0,100])}function U(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(r-e[0])}}z.displayName="RadioBubbleInput";var V=e.i(4829);let K=r.forwardRef(({className:e,...r},o)=>(0,t.jsxs)(L,{ref:o,className:(0,V.cn)("relative flex w-full touch-none select-none items-center",e),...r,children:[(0,t.jsx)(A,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(M,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(B,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));K.displayName=L.displayName;var O=e.i(67489),$=e.i(57428),Y=e.i(19455);e.i(93948);var X=e.i(9815),q=e.i(46897),J=e.i(52571),Q=e.i(93479),W=e.i(12416),Z=e.i(97038),ee=e.i(74911),et=e.i(31792),er=e.i(29895);function eo({onFilterChange:e,onReset:o,initialFilters:i,onLocationSuccess:n,schoolsInArea:a,availableStates:c,userCurrency:d="USD",className:u}){let{toast:m}=(0,ee.useToast)(),[h,p]=(0,r.useState)(i||{}),[x,f]=(0,r.useState)(i?.price||3e3);(0,r.useEffect)(()=>{i&&(p(i),f(i.price||("NGN"===d?1e6:"GHS"===d?1e4:3e3)))},[i,d]);let y=(t,r)=>{let o={...h,[t]:r};["country","state","city","school"].includes(t)&&(o.useCurrentLocation=!1),p(o),e({...o,price:x})};return(0,t.jsxs)(l.Card,{className:(0,V.cn)("h-full",u),children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsx)(l.CardTitle,{className:"font-headline",children:"Filter & Sort"})}),(0,t.jsxs)(l.CardContent,{className:"grid gap-6",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(s.Label,{htmlFor:"country",children:"Country"}),(0,t.jsx)(et.Combobox,{options:W.countries.map(e=>({label:e.name,value:e.name})),value:h.country,onChange:e=>y("country",e),placeholder:"Select Country",disabled:h.useCurrentLocation})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(s.Label,{htmlFor:"state",children:"State"}),(0,t.jsx)(et.Combobox,{options:h.country?W.countries.find(e=>e.name===h.country)?.states.map(e=>({label:e.name,value:e.name}))||[]:c.map(e=>({label:e,value:e})),value:h.state,onChange:e=>y("state",e),placeholder:"Select State",disabled:h.useCurrentLocation,emptyText:h.country?"No states found":"Select a country or use existing properties"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(s.Label,{htmlFor:"city",children:"City"}),(0,t.jsx)(Q.Input,{id:"city",placeholder:"Enter city",value:h.city||"",onChange:e=>y("city",e.target.value),disabled:h.useCurrentLocation})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(s.Label,{htmlFor:"school",children:"School"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("div",{className:"flex-grow",children:null!==a?(0,t.jsx)(et.Combobox,{options:(a||[]).map(e=>({label:e,value:e})),value:h.school,onChange:e=>y("school",e),placeholder:"Select School",disabled:h.useCurrentLocation&&0===(a?.length||0),emptyText:"No schools found in this area."}):(0,t.jsx)(er.SchoolCombobox,{value:h.school,onChange:e=>y("school",e),placeholder:"Select School",disabled:h.useCurrentLocation})}),(0,t.jsxs)(Y.Button,{variant:"outline",size:"icon",onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{n({lat:e.coords.latitude,lng:e.coords.longitude})},t=>{console.error("Geolocation error:",t),alert("Could not get your location. Please ensure location services are enabled and try again.");let r={...h,useCurrentLocation:!1};p(r),e(r)}):alert("Geolocation is not supported by this browser.")},children:[(0,t.jsx)(q.MapPin,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Use current location"})]})]}),h.useCurrentLocation&&(0,t.jsx)("p",{className:"text-xs text-primary",children:"Showing properties near you."})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsxs)(s.Label,{children:["Max Price: ",(0,V.formatPrice)(x,d)]}),(0,t.jsx)(K,{value:[x],onValueChange:t=>{f(t[0]),e({...h,price:t[0]})},max:"NGN"===d?5e6:"GHS"===d?5e4:1e4,min:"NGN"===d?5e4:"GHS"===d?500:100,step:"NGN"===d?1e4:"GHS"===d?100:50})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(s.Label,{htmlFor:"property-type",children:"Property Type"}),(0,t.jsxs)(O.Select,{value:h.propertyType,onValueChange:e=>y("propertyType",e),children:[(0,t.jsx)(O.SelectTrigger,{id:"property-type",children:(0,t.jsx)(O.SelectValue,{placeholder:"Any"})}),(0,t.jsxs)(O.SelectContent,{children:[(0,t.jsx)(O.SelectItem,{value:"any",children:"Any"}),Z.PROPERTY_TYPES.map(e=>(0,t.jsx)(O.SelectItem,{value:e.value,className:"group",children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full gap-2 min-w-[120px]",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)("div",{role:"button",className:"p-1 hover:bg-muted rounded-full transition-colors opacity-50 group-hover:opacity-100",onClick:t=>{t.preventDefault(),t.stopPropagation(),m({title:e.label,description:e.description})},children:(0,t.jsx)(J.Info,{className:"h-3 w-3"})})]})},e.value))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(s.Label,{htmlFor:"bedrooms",children:"Beds"}),(0,t.jsxs)(O.Select,{value:h.bedrooms,onValueChange:e=>y("bedrooms",e),children:[(0,t.jsx)(O.SelectTrigger,{id:"bedrooms",children:(0,t.jsx)(O.SelectValue,{placeholder:"Any"})}),(0,t.jsxs)(O.SelectContent,{children:[(0,t.jsx)(O.SelectItem,{value:"any",children:"Any"}),(0,t.jsx)(O.SelectItem,{value:"1",children:"1"}),(0,t.jsx)(O.SelectItem,{value:"2",children:"2"}),(0,t.jsx)(O.SelectItem,{value:"3",children:"3"}),(0,t.jsx)(O.SelectItem,{value:"4",children:"4+"})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(s.Label,{htmlFor:"bathrooms",children:"Baths"}),(0,t.jsxs)(O.Select,{value:h.bathrooms,onValueChange:e=>y("bathrooms",e),children:[(0,t.jsx)(O.SelectTrigger,{id:"bathrooms",children:(0,t.jsx)(O.SelectValue,{placeholder:"Any"})}),(0,t.jsxs)(O.SelectContent,{children:[(0,t.jsx)(O.SelectItem,{value:"any",children:"Any"}),(0,t.jsx)(O.SelectItem,{value:"1",children:"1"}),(0,t.jsx)(O.SelectItem,{value:"2",children:"2"}),(0,t.jsx)(O.SelectItem,{value:"3",children:"3+"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(s.Label,{children:"Amenities"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:X.amenities.slice(0,6).map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)($.Checkbox,{id:e.toLowerCase().replace(/[\s-]/g,""),checked:!!h.amenities?.includes(e),onCheckedChange:t=>{var r;let o;return r=!!t,o=h.amenities||[],void y("amenities",r?[...o,e]:o.filter(t=>t!==e))}}),(0,t.jsx)(s.Label,{htmlFor:e.toLowerCase().replace(/[\s-]/g,""),className:"text-sm font-normal",children:e})]},e))})]})]}),(0,t.jsx)(l.CardFooter,{className:"flex-col gap-2",children:(0,t.jsx)(Y.Button,{variant:"ghost",className:"w-full",onClick:()=>{f("NGN"===d?1e6:"GHS"===d?1e4:3e3),o()},children:"Reset All Filters"})})]})}var el=e.i(55436),es=e.i(75254);let ei=(0,es.default)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var en=e.i(94351),ea=e.i(23204);e.i(11981);var ec=e.i(61480),ed=e.i(80428),eu=e.i(41899);e.i(36180);var em=e.i(17875),eh=e.i(90392),ep=e.i(87486),ex=e.i(80376),ef=e.i(37822),ey=e.i(32095);let eg=(0,es.default)("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);var ev=e.i(83086),eb=e.i(25652),ej=e.i(70273);function ew({title:e,description:r,properties:l,icon:s,delay:i=0}){return 0===l.length?null:(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-700",style:{animationDelay:`${i}ms`},children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-primary font-bold uppercase tracking-wider text-[10px] md:text-xs",children:[(0,t.jsx)(s,{className:"h-3.5 w-3.5 md:h-4 w-4"}),(0,t.jsx)("span",{children:e})]}),(0,t.jsx)("div",{className:"flex items-end justify-between gap-4",children:(0,t.jsx)("h2",{className:"text-xl md:text-3xl font-black tracking-tight leading-tight",children:r||`Premium ${e}`})})]}),(0,t.jsx)("div",{className:"relative -mx-4 sm:-mx-6 lg:-mx-8",children:(0,t.jsxs)("div",{className:"flex gap-4 md:gap-6 overflow-x-auto pb-8 pt-2 px-4 sm:px-6 lg:px-8 no-scrollbar scroll-smooth snap-x snap-mandatory",children:[l.map((e,r)=>(0,t.jsx)("div",{className:"min-w-[85vw] sm:min-w-[380px] lg:min-w-[420px] snap-start",children:(0,t.jsx)(o.default,{property:e,className:"h-full shadow-lg shadow-black/[0.03]"})},e.id)),(0,t.jsx)("div",{className:"min-w-[20px] sm:min-w-[40px] shrink-0"})]})})]})}function eN(){let{user:e}=(0,ec.useUser)(),s=(0,ec.useFirestore)(),i=(0,ec.useMemoFirebase)(()=>e?(0,em.doc)(s,"users",e.uid):null,[e,s]),{data:n,isLoading:a}=(0,eu.useDoc)(i),c=(0,ec.useMemoFirebase)(()=>(0,em.query)((0,em.collection)(s,"properties"),(0,em.where)("status","==","available")),[s]),{data:d,isLoading:u}=(0,ed.useCollection)(c),[m,h]=(0,r.useState)({useCurrentLocation:!1}),[p,x]=(0,r.useState)(null),[f,y]=(0,r.useState)([]),[g,v]=(0,r.useState)(null),[b,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(""),[C,S]=(0,r.useState)("newest"),k=(0,r.useMemo)(()=>n?.currency?n.currency:n?.country?(0,ea.getCurrencyByCountry)(n.country):"USD",[n]),L=(0,r.useMemo)(()=>{if(!d)return[];let e=d;return m.country&&(e=e.filter(e=>e.location.country===m.country)),[...new Set(e.map(e=>e.location.state))]},[d,m.country]);(0,r.useEffect)(()=>{n&&!b&&(h(e=>({...e,country:n.country||e.country,state:n.state||e.state,school:n.school||e.school})),j(!0))},[n,b]),(0,r.useEffect)(()=>{if(!d)return;let e=d;if(e=e.filter(e=>"available"===e.status),m.useCurrentLocation&&p?e=e.filter(e=>!!e.location.lat&&!!e.location.lng&&10>(0,V.haversineDistance)(p,{lat:e.location.lat,lng:e.location.lng})):(m.country&&(e=e.filter(e=>e.location.country===m.country)),m.state&&(e=e.filter(e=>e.location.state.toLowerCase().includes(m.state.toLowerCase()))),m.city&&(e=e.filter(e=>e.location.city.toLowerCase().includes(m.city.toLowerCase()))),m.school&&(e=e.filter(e=>e.location.school?.toLowerCase().includes(m.school.toLowerCase())))),m.price&&(e=e.filter(e=>(0,ea.convertCurrency)(e.price,e.currency,k)<=m.price)),m.propertyType&&"any"!==m.propertyType&&(e=e.filter(e=>e.type===m.propertyType)),m.bedrooms&&"any"!==m.bedrooms&&(e="4"===m.bedrooms?e.filter(e=>e.bedrooms>=4):e.filter(e=>e.bedrooms===parseInt(m.bedrooms))),m.bathrooms&&"any"!==m.bathrooms&&(e="3"===m.bathrooms?e.filter(e=>e.bathrooms>=3):e.filter(e=>e.bathrooms===parseInt(m.bathrooms))),m.amenities&&m.amenities.length>0&&(e=e.filter(e=>m.amenities.every(t=>e.amenities.includes(t)))),w){let t=w.toLowerCase().trim();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.location.address.toLowerCase().includes(t)||e.location.city.toLowerCase().includes(t)||e.location.state.toLowerCase().includes(t)||e.location.school?.toLowerCase().includes(t)||e.type.toLowerCase().includes(t))}e.sort((e,t)=>{let r=(0,ea.convertCurrency)(e.price,e.currency,k),o=(0,ea.convertCurrency)(t.price,t.currency,k);switch(C){case"price-asc":return r-o;case"price-desc":return o-r;case"bedrooms-desc":return t.bedrooms-e.bedrooms;case"area-desc":return t.area-e.area;default:return t.id.localeCompare(e.id)}}),y(e)},[m,p,d,w,C,k]);let P=(0,r.useMemo)(()=>{if(!d||0===d.length)return[];let e=d.filter(e=>n?.school&&e.location.school?.toLowerCase()===n.school.toLowerCase()),t=d.filter(e=>n?.city&&e.location.city?.toLowerCase()===n.city.toLowerCase()),r=[...d].sort((e,t)=>(0,ea.convertCurrency)(e.price,e.currency,k)-(0,ea.convertCurrency)(t.price,t.currency,k)),o=[...d].sort((e,t)=>{let r=e=>{let t;return t=0+Math.min(5*(e.amenities?.length||0),50),n?.school&&e.location.school?.toLowerCase()===n.school.toLowerCase()&&(t+=50),t},o=r(e),l=r(t);return o!==l?l-o:t.id.localeCompare(e.id)}),l=[...d].sort((e,t)=>t.id.localeCompare(e.id));return[{id:"near-school",title:"Near Your School",description:`Apartments near ${n?.school||"University"}`,icon:ey.GraduationCap,properties:e},{id:"recommended",title:"Highly Recommended",description:"Curated premium homes for you",icon:ej.Star,properties:o},{id:"in-city",title:"In Your City",description:`Best listings in ${n?.city||"your area"}`,icon:eg,properties:t},{id:"budget",title:"Budget Friendly",description:"Premium homes within your reach",icon:eb.TrendingUp,properties:r},{id:"recent",title:"Recently Added",description:"Freshly listed for you",icon:ev.Sparkles,properties:l}]},[d,n,k]),R=(0,r.useMemo)(()=>w.trim().length>0||Object.keys(m).filter(e=>"useCurrentLocation"===e?m[e]:void 0!==m[e]&&("amenities"===e?m[e]&&m[e].length>0:!["country","state","school"].includes(e)||m[e]!==n?.[e])).length>0||"newest"!==C,[m,w,C,n]),D=e=>{!1===e.useCurrentLocation&&(x(null),v(null)),h(e)},I=e=>{if(!d||0===d.length)return;x(e);let t=null,r=1/0;for(let o of d)if(o.location.lat&&o.location.lng){let l=(0,V.haversineDistance)(e,{lat:o.location.lat,lng:o.location.lng});l<r&&(r=l,t=o)}if(t&&r<50){let e=t.location.state,r=t.location.country;v([...new Set(d.filter(t=>t.location.state===e&&t.location.school).map(e=>e.location.school))]),h(t=>({...t,useCurrentLocation:!0,country:r,state:e,school:void 0}))}else v([]),h(e=>({...e,useCurrentLocation:!0}))},F=()=>{h({country:void 0,state:void 0,city:void 0,school:void 0,useCurrentLocation:!1,price:void 0,propertyType:void 0,bedrooms:void 0,bathrooms:void 0,amenities:[]}),x(null),v(null),N(""),S("newest")};return a||u?(0,t.jsx)(eh.default,{}):(0,t.jsxs)("div",{className:"w-full py-8 space-y-12 animate-in fade-in duration-700 overflow-x-visible",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("h1",{className:"font-headline text-3xl md:text-4xl font-black tracking-tight text-foreground uppercase",children:["Find ",(0,t.jsx)("span",{className:"text-primary",children:"Property."})]}),(0,t.jsx)("div",{className:"h-1 w-12 bg-primary rounded-full"})]}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative group flex-1 w-full",children:[(0,t.jsx)(el.Search,{className:"absolute left-5 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground group-focus-within:text-primary transition-colors"}),(0,t.jsx)(Q.Input,{placeholder:"Search by name, city, or university...",className:"h-14 pl-14 pr-6 rounded-2xl border-muted/20 bg-white shadow-sm text-lg font-medium placeholder:text-muted-foreground/40 focus-visible:ring-2 focus-visible:ring-primary/10 transition-all",value:w,onChange:e=>N(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:[(0,t.jsx)("div",{className:"lg:hidden w-full",children:(0,t.jsxs)(ex.Sheet,{children:[(0,t.jsx)(ex.SheetTrigger,{asChild:!0,children:(0,t.jsxs)(Y.Button,{variant:"outline",className:"h-14 w-full rounded-2xl px-6 gap-3 border-muted/20 bg-white shadow-sm font-bold hover:bg-primary/5 hover:text-primary transition-all",children:[(0,t.jsx)(ei,{className:"h-5 w-5"}),"Filters",(0,t.jsx)(ep.Badge,{className:"bg-primary/10 text-primary border-none font-black h-5 w-5 p-0 flex items-center justify-center",children:Object.keys(m).filter(e=>void 0!==m[e]&&!1!==m[e]).length})]})}),(0,t.jsxs)(ex.SheetContent,{side:"bottom",className:"h-[90vh] p-0 rounded-t-3xl",children:[(0,t.jsxs)("div",{className:"bg-muted/30 p-6 border-b flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-foreground",children:"Filter Properties"}),(0,t.jsx)(Y.Button,{variant:"ghost",size:"sm",onClick:F,className:"text-primary hover:text-primary hover:bg-primary/10 font-bold rounded-xl px-4",children:"Reset"})]}),(0,t.jsx)("div",{className:"h-[calc(90vh-80px)] overflow-y-auto p-6 custom-scrollbar",children:(0,t.jsx)(eo,{onFilterChange:D,onReset:F,initialFilters:m,onLocationSuccess:I,schoolsInArea:g,availableStates:L,userCurrency:k,className:"border-0 shadow-none p-0"})})]})]})}),(0,t.jsx)("div",{className:"hidden lg:block",children:(0,t.jsxs)(ef.Popover,{children:[(0,t.jsx)(ef.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(Y.Button,{variant:"outline",className:"h-14 rounded-2xl px-6 gap-3 border-muted/20 bg-white shadow-sm font-bold hover:bg-primary/5 hover:text-primary transition-all",children:[(0,t.jsx)(ei,{className:"h-5 w-5"}),"Filters",(0,t.jsx)(ep.Badge,{className:"bg-primary/10 text-primary border-none font-black h-5 w-5 p-0 flex items-center justify-center",children:Object.keys(m).filter(e=>void 0!==m[e]&&!1!==m[e]).length})]})}),(0,t.jsxs)(ef.PopoverContent,{className:"w-[90vw] max-w-[500px] p-0 rounded-3xl overflow-hidden border-none shadow-2xl mt-2",align:"end",children:[(0,t.jsxs)("div",{className:"bg-muted/30 p-6 border-b flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-foreground",children:"Filter Properties"}),(0,t.jsx)(Y.Button,{variant:"ghost",size:"sm",onClick:F,className:"text-primary hover:text-primary hover:bg-primary/10 font-bold rounded-xl px-4",children:"Reset"})]}),(0,t.jsx)("div",{className:"max-h-[70vh] overflow-y-auto p-6 custom-scrollbar",children:(0,t.jsx)(eo,{onFilterChange:D,onReset:F,initialFilters:m,onLocationSuccess:I,schoolsInArea:g,availableStates:L,userCurrency:k,className:"border-0 shadow-none p-0"})})]})]})}),(0,t.jsxs)(O.Select,{value:C,onValueChange:S,children:[(0,t.jsx)(O.SelectTrigger,{className:"h-14 w-full lg:w-[220px] rounded-2xl border-muted/20 bg-white shadow-sm font-bold px-6 focus:ring-2 focus:ring-primary/10",children:(0,t.jsx)(O.SelectValue,{placeholder:"Sort"})}),(0,t.jsxs)(O.SelectContent,{className:"rounded-2xl border-none shadow-3xl p-2 mt-2",children:[(0,t.jsx)(O.SelectItem,{value:"newest",className:"rounded-xl py-2.5 font-bold",children:"Newest First"}),(0,t.jsx)(O.SelectItem,{value:"price-asc",className:"rounded-xl py-2.5 font-bold",children:"Price: Low to High"}),(0,t.jsx)(O.SelectItem,{value:"price-desc",className:"rounded-xl py-2.5 font-bold",children:"Price: High to Low"}),(0,t.jsx)(O.SelectItem,{value:"bedrooms-desc",className:"rounded-xl py-2.5 font-bold",children:"Bedrooms: Most First"}),(0,t.jsx)(O.SelectItem,{value:"area-desc",className:"rounded-xl py-2.5 font-bold",children:"Area: Largest First"})]})]})]})]})]}),(0,t.jsx)("div",{className:"space-y-16",children:R?(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,t.jsxs)("h2",{className:"text-xl md:text-2xl font-black tracking-tight",children:[f.length," Homes Found"]}),w&&(0,t.jsxs)("p",{className:"text-muted-foreground font-medium",children:['Showing results for "',(0,t.jsx)("span",{className:"text-foreground font-bold",children:w}),'"']})]}),f.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 gap-10 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:f.map((e,r)=>(0,t.jsx)("div",{className:"animate-in fade-in slide-in-from-bottom-6 duration-700 hover:-translate-y-2 transition-all",style:{animationDelay:`${100*r}ms`},children:(0,t.jsx)(o.default,{property:e})},e.id))}):(0,t.jsx)(l.Card,{className:"overflow-hidden border-none bg-white shadow-xl shadow-black/[0.02]",children:(0,t.jsxs)(l.CardContent,{className:"flex flex-col items-center justify-center py-32 text-center",children:[(0,t.jsxs)("div",{className:"relative mb-12",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-primary/10 blur-3xl rounded-full scale-150 animate-pulse"}),(0,t.jsx)("div",{className:"relative flex h-40 w-40 items-center justify-center rounded-[3rem] bg-muted/30",children:(0,t.jsx)(en.Home,{className:"h-20 w-20 text-primary opacity-20"})})]}),(0,t.jsx)("h3",{className:"text-4xl font-black tracking-tight",children:"No properties found"}),(0,t.jsx)("p",{className:"mx-auto mt-6 max-w-sm text-xl font-medium text-muted-foreground/80 leading-relaxed",children:'"Adjust your search or broad filters to find more premium accommodations in your area."'}),(0,t.jsx)(Y.Button,{size:"lg",variant:"outline",className:"mt-12 rounded-2xl px-12 h-14 font-black text-lg border-primary/20 hover:bg-primary/5",onClick:F,children:"Reset All Filters"})]})})]}):(0,t.jsx)("div",{className:"space-y-20",children:P.map((e,r)=>(0,t.jsx)(ew,{title:e.title,description:e.description,icon:e.icon,properties:e.properties,delay:100*r},e.id))})})]})}e.s(["default",()=>eN],13246)}]);