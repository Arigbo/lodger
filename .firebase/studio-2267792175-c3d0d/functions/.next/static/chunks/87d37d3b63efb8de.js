(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23802,e=>{"use strict";let t=(0,e.i(75254).default)("Signature",[["path",{d:"m21 17-2.156-1.868A.5.5 0 0 0 18 15.5v.5a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 0 0 0 5c4.153 0 4.745-11.295 5.708-13.5a2.5 2.5 0 1 1 3.31 3.284",key:"y32ogt"}],["path",{d:"M3 21h18",key:"itz85i"}]]);e.s(["Signature",()=>t],23802)},29687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(19455),r=e.i(87486),l=e.i(78583),i=e.i(23802),n=e.i(22016),d=e.i(4829);e.i(11981);var c=e.i(61480),o=e.i(80428);e.i(36180);var m=e.i(17875),u=e.i(90392);function x(e,t){let a=[];for(let s=0;s<e.length;s+=t)a.push(e.slice(s,s+t));return a}function h(){let{user:e,isUserLoading:h}=(0,c.useUser)(),p=(0,c.useFirestore)(),[g,f]=a.useState([]),[j,b]=a.useState(!0),w=(0,c.useMemoFirebase)(()=>e?(0,m.query)((0,m.collection)(p,"leaseAgreements"),(0,m.where)("tenantId","==",e.uid)):null,[e,p]),{data:N,isLoading:v}=(0,o.useCollection)(w);return(a.useEffect(()=>{if(!v){if(!N||!p){f([]),b(!1);return}(async()=>{if(b(!0),0===N.length){f([]),b(!1);return}let e=[...new Set(N.map(e=>e.landlordId))].filter(Boolean),t=[...new Set(N.map(e=>e.propertyId))].filter(Boolean),a=new Map,s=new Map;if(e.length>0)for(let t of x(e,30)){let e=(0,m.query)((0,m.collection)(p,"users"),(0,m.where)((0,m.documentId)(),"in",t));(await (0,m.getDocs)(e)).forEach(e=>a.set(e.id,{id:e.id,...e.data()}))}if(t.length>0)for(let e of x(t,30)){let t=(0,m.query)((0,m.collection)(p,"properties"),(0,m.where)((0,m.documentId)(),"in",e));(await (0,m.getDocs)(t)).forEach(e=>s.set(e.id,{id:e.id,...e.data()}))}f(N.map(e=>({lease:e,landlord:a.get(e.landlordId)||null,property:s.get(e.propertyId)||null})).sort((e,t)=>new Date(t.lease.startDate).getTime()-new Date(e.lease.startDate).getTime())),b(!1)})()}},[N,v,p]),h||v||j)?(0,t.jsx)(u.default,{}):(0,t.jsxs)("div",{className:"space-y-12 pb-20 animate-in fade-in duration-700",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"font-headline text-4xl md:text-5xl font-black tracking-tight text-foreground underline decoration-primary/20 underline-offset-8",children:"LEASES"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground font-medium",children:"View and manage your lease agreements."})]}),(0,t.jsxs)("div",{className:"px-6 py-3 bg-primary/5 rounded-2xl border-2 border-primary/10 flex items-center gap-3",children:[(0,t.jsx)(l.FileText,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("span",{className:"font-black text-sm uppercase tracking-widest",children:[g.length," AGREEMENTS"]})]})]}),g.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:g.map(({lease:e,landlord:a,property:c})=>(0,t.jsxs)("div",{className:"group relative overflow-hidden rounded-[2.5rem] bg-white border-2 border-muted/10 shadow-xl shadow-black/[0.02] hover:shadow-2xl hover:border-primary/20 transition-all p-8 md:p-10",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-bl-[5rem] -mr-8 -mt-8 transition-all group-hover:scale-110"}),(0,t.jsxs)("div",{className:"relative z-10 space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(r.Badge,{variant:(e=>{switch(e){case"active":return"secondary";case"expired":return"outline";default:return"default"}})(e.status),className:"px-4 py-1 rounded-full text-[10px] font-black uppercase tracking-widest mb-3",children:e.status}),(0,t.jsx)("h3",{className:"text-2xl font-black tracking-tight group-hover:text-primary transition-colors",children:c?.title||"Unknown Property"}),(0,t.jsxs)("p",{className:"text-muted-foreground font-medium text-sm flex items-center gap-2",children:[(0,t.jsx)(l.FileText,{className:"h-4 w-4 opacity-40"}),c?.type," â€¢ ",c?.bedrooms," Bed"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-muted-foreground/60 uppercase tracking-[0.2em] mb-1",children:"LANDLORD"}),(0,t.jsx)("p",{className:"font-bold text-lg",children:a?.name||"Anonymous"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6 p-6 rounded-3xl bg-muted/20 border-2 border-white",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1",children:"TERM START"}),(0,t.jsx)("p",{className:"font-black text-lg",children:new Date(e.startDate).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest mb-1",children:"TERM END"}),(0,t.jsx)("p",{className:"font-black text-lg",children:new Date(e.endDate).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-6 pt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:(0,d.cn)("h-3 w-3 rounded-full animate-pulse","active"===e.status?"bg-green-500":"bg-muted/40")}),(0,t.jsx)("span",{className:"text-xs font-black uppercase tracking-widest text-muted-foreground/60",children:"active"===e.status?"ACTIVE LEASE":"EXPIRED LEASE"})]}),(0,t.jsx)(n.default,{href:`/student/leases/${e.id}`,className:"w-full sm:w-auto",children:(0,t.jsx)(s.Button,{variant:"pending"===e.status?"default":"outline",className:"w-full h-14 rounded-2xl px-10 font-black text-sm uppercase tracking-widest gap-3 shadow-lg shadow-primary/5 hover:scale-105 active:scale-95 transition-all",children:"pending"===e.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Signature,{className:"h-4 w-4"})," REVIEW & SIGN"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.FileText,{className:"h-4 w-4"})," VIEW DOCUMENTS"]})})})]})]})]},e.id))}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-[3rem] border-4 border-dotted border-muted/30 p-24 text-center space-y-8 animate-in zoom-in duration-500",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-primary/20 blur-3xl rounded-full scale-150 animate-pulse"}),(0,t.jsx)("div",{className:"relative h-28 w-28 flex items-center justify-center rounded-[2.5rem] bg-white shadow-2xl border-2 border-muted/10",children:(0,t.jsx)(l.FileText,{className:"h-12 w-12 text-muted-foreground/40"})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h3",{className:"text-3xl font-black",children:"No Leases Found"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground max-w-md mx-auto",children:"You don't have any lease agreements yet."})]}),(0,t.jsx)(n.default,{href:"/student/properties",children:(0,t.jsx)(s.Button,{className:"h-16 rounded-2xl px-12 font-black text-sm shadow-2xl hover:scale-105 transition-all",children:"EXPLORE PROPERTIES"})})]})]})}e.s(["default",()=>h])}]);