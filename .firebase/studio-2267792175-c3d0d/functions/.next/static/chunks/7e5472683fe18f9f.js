(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(4829);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));s.displayName="Card";let i=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let l=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let c=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let d=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...r}));d.displayName="CardContent";let n=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r}));n.displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>c,"CardFooter",()=>n,"CardHeader",()=>i,"CardTitle",()=>l])},42920,e=>{"use strict";let t=(0,e.i(75254).default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);e.s(["Building",()=>t],42920)},95468,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},78917,e=>{"use strict";let t=(0,e.i(75254).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},41071,e=>{"use strict";let t=(0,e.i(75254).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],41071)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},28732,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(15288),s=e.i(55146),i=e.i(19455),l=e.i(87486),c=e.i(41071),d=e.i(95116),n=e.i(3116),o=e.i(63209),x=e.i(95468),p=e.i(73884),u=e.i(42920),m=e.i(84614),h=e.i(87316),g=e.i(72520),f=e.i(78917),y=e.i(22016);e.i(11981);var N=e.i(61480),j=e.i(74911);e.i(36180);var k=e.i(17875),w=e.i(90392);function v(e,t){if(!e||0===e.length)return[];let r=[];for(let a=0;a<e.length;a+=t)r.push(e.slice(a,a+t));return r}function b(){let{user:e,isUserLoading:b}=(0,N.useUser)(),C=(0,N.useFirestore)(),{toast:M}=(0,j.useToast)(),[T,D]=r.useState([]),[I,R]=r.useState(!0),E=async()=>{if(!e||!C)return;R(!0);let t=(0,k.query)((0,k.collection)(C,"maintenanceRequests"),(0,k.where)("landlordId","==",e.uid)),r=(await (0,k.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}));if(0===r.length){D([]),R(!1);return}let a=[...new Set(r.map(e=>e.tenantId))],s=[...new Set(r.map(e=>e.propertyId))],i=new Map,l=new Map;if(a.length>0)for(let e of v(a,30)){let t=(0,k.query)((0,k.collection)(C,"users"),(0,k.where)((0,k.documentId)(),"in",e));(await (0,k.getDocs)(t)).forEach(e=>i.set(e.id,{id:e.id,...e.data()}))}if(s.length>0)for(let e of v(s,30)){let t=(0,k.query)((0,k.collection)(C,"properties"),(0,k.where)((0,k.documentId)(),"in",e));(await (0,k.getDocs)(t)).forEach(e=>l.set(e.id,{id:e.id,...e.data()}))}D(r.map(e=>({...e,tenantName:i.get(e.tenantId)?.name||"Unknown Tenant",propertyName:l.get(e.propertyId)?.title||"Unknown Property"})).sort((e,t)=>new Date(t.requestDate).getTime()-new Date(e.requestDate).getTime())),R(!1)};r.useEffect(()=>{E()},[e,C]);let q=async(e,t)=>{try{let r=(0,k.doc)(C,"maintenanceRequests",e);await (0,k.updateDoc)(r,{status:t}),D(r=>r.map(r=>r.id===e?{...r,status:t}:r)),M({title:"Status Synchronized",description:`Request has been transitioned to ${t}.`})}catch(e){console.error("Error updating status:",e),M({variant:"destructive",title:"Protocol Failure",description:"Failed to update service status."})}};return b||I?(0,t.jsx)(w.default,{}):(0,t.jsxs)("div",{className:"space-y-16 pb-32 animate-in fade-in duration-1000",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-8 pb-8 border-b-4 border-foreground/5 px-2",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary animate-pulse"}),(0,t.jsx)("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-muted-foreground/60",children:"Property Care"})]}),(0,t.jsxs)("h1",{className:"font-headline text-5xl md:text-7xl font-black tracking-tighter text-foreground uppercase leading-[0.9]",children:["MAINTENANCE ",(0,t.jsx)("br",{})," ",(0,t.jsx)("span",{className:"text-primary",children:"LOGISTICS"})]}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground font-medium mt-4",children:"Manage service requests and property upkeep."})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"bg-white px-8 py-5 rounded-[2rem] border-2 border-muted/10 shadow-sm flex flex-col justify-center min-w-[160px]",children:[(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-muted-foreground/60 mb-1",children:"Total Requests"}),(0,t.jsx)("p",{className:"text-3xl font-black tracking-tighter",children:T.length})]}),(0,t.jsxs)("div",{className:"bg-orange-600 text-white px-8 py-5 rounded-[2rem] shadow-xl shadow-orange-600/20 flex flex-col justify-center min-w-[160px]",children:[(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-white/60 mb-1",children:"Pending Tasks"}),(0,t.jsx)("p",{className:"text-3xl font-black tracking-tighter",children:T.filter(e=>"Pending"===e.status).length})]})]})]}),(0,t.jsxs)("div",{className:"space-y-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 px-2",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(d.Wrench,{className:"h-5 w-5 text-primary"})}),(0,t.jsx)("h2",{className:"text-3xl font-black uppercase tracking-tight",children:"Active Maintenance"})]}),T.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 gap-8",children:T.map(e=>(0,t.jsx)(a.Card,{className:"group relative overflow-hidden rounded-[3rem] bg-white border-2 border-foreground/5 shadow-xl hover:shadow-3xl transition-all duration-500 p-8 md:p-10",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-10",children:[(0,t.jsxs)("div",{className:"lg:w-1/4 border-r-2 border-muted/5 pr-10 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"Completed":return(0,t.jsx)(x.CheckCircle2,{className:"h-4 w-4 text-emerald-500"});case"In Progress":return(0,t.jsx)(n.Clock,{className:"h-4 w-4 text-primary animate-pulse"});case"Pending":return(0,t.jsx)(o.AlertCircle,{className:"h-4 w-4 text-orange-500"});case"Cancelled":return(0,t.jsx)(p.XCircle,{className:"h-4 w-4 text-muted-foreground"});default:return(0,t.jsx)(o.AlertCircle,{className:"h-4 w-4"})}})(e.status),(0,t.jsx)(l.Badge,{variant:"outline",className:"px-3 py-0.5 rounded-full text-[9px] font-black uppercase tracking-widest border-muted/20",children:e.status})]}),(0,t.jsx)("h3",{className:"text-2xl font-black uppercase tracking-tight group-hover:text-primary transition-colors leading-tight",children:e.title})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-lg bg-muted/20 flex items-center justify-center",children:(0,t.jsx)(h.Calendar,{className:"h-4 w-4 text-muted-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] font-black text-muted-foreground/40 uppercase tracking-widest",children:"Logged On"}),(0,t.jsx)("p",{className:"text-xs font-bold",children:new Date(e.requestDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-lg bg-muted/20 flex items-center justify-center",children:(0,t.jsx)(o.AlertCircle,{className:"h-4 w-4 text-muted-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] font-black text-muted-foreground/40 uppercase tracking-widest",children:"Priority Level"}),(0,t.jsx)(l.Badge,{variant:(e=>{switch(e){case"High":return"destructive";case"Medium":return"default";case"Low":return"secondary";default:return"outline"}})(e.priority),className:"h-4 px-2 text-[8px] font-black uppercase",children:e.priority})]})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40",children:"Property"}),(0,t.jsxs)(y.default,{href:`/landlord/properties/${e.propertyId}`,className:"group/link flex items-center gap-2 text-xl font-black uppercase tracking-tight hover:text-primary transition-colors",children:[(0,t.jsx)(u.Building,{className:"h-5 w-5 opacity-40"})," ",e.propertyName," ",(0,t.jsx)(f.ExternalLink,{className:"h-3 w-3 opacity-0 group-hover/link:opacity-100 transition-opacity"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40",children:"Tenant"}),(0,t.jsxs)(y.default,{href:`/landlord/tenants/${e.tenantId}`,className:"group/link flex items-center gap-2 text-xl font-black uppercase tracking-tight hover:text-primary transition-colors",children:[(0,t.jsx)(m.User,{className:"h-5 w-5 opacity-40"})," ",e.tenantName," ",(0,t.jsx)(f.ExternalLink,{className:"h-3 w-3 opacity-0 group-hover/link:opacity-100 transition-opacity"})]})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-2xl bg-muted/10 border-2 border-muted/5 min-h-[100px]",children:[(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40 mb-3",children:"Service Details"}),(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground leading-relaxed",children:e.description||"No tactical details provided by the tenant."})]})]}),(0,t.jsxs)("div",{className:"lg:w-1/5 flex lg:flex-col gap-3 justify-center",children:[(0,t.jsx)("p",{className:"text-[9px] font-black uppercase tracking-widest text-center text-muted-foreground/40 hidden lg:block mb-2",children:"Manage Request"}),(0,t.jsxs)(s.DropdownMenu,{children:[(0,t.jsx)(s.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{className:"h-14 rounded-xl bg-foreground text-white hover:bg-primary transition-all font-black text-[10px] uppercase tracking-widest gap-2 shadow-lg",children:["UPDATE STATUS ",(0,t.jsx)(c.MoreHorizontal,{className:"h-4 w-4"})]})}),(0,t.jsxs)(s.DropdownMenuContent,{align:"end",className:"rounded-2xl p-2 border-2 border-foreground/5 shadow-2xl",children:[(0,t.jsx)(s.DropdownMenuItem,{onClick:()=>q(e.id,"In Progress"),className:"rounded-xl focus:bg-primary focus:text-white cursor-pointer py-3 px-4 font-black text-[10px] uppercase tracking-widest",children:"MARK IN PROGRESS"}),(0,t.jsx)(s.DropdownMenuItem,{onClick:()=>q(e.id,"Completed"),className:"rounded-xl focus:bg-emerald-500 focus:text-white cursor-pointer py-3 px-4 font-black text-[10px] uppercase tracking-widest",children:"MARK COMPLETED"}),(0,t.jsx)(s.DropdownMenuItem,{onClick:()=>q(e.id,"Cancelled"),className:"rounded-xl focus:bg-destructive focus:text-white cursor-pointer py-3 px-4 font-black text-[10px] uppercase tracking-widest text-destructive",children:"CANCEL REQUEST"})]})]}),(0,t.jsx)(y.default,{href:`/landlord/messages?conversationId=${e.tenantId}`,className:"w-full",children:(0,t.jsxs)(i.Button,{variant:"outline",className:"w-full h-14 rounded-xl border-2 hover:bg-muted font-black text-[10px] uppercase tracking-widest gap-2",children:["CONTACT ",(0,t.jsx)(g.ArrowRight,{className:"h-4 w-4"})]})})]})]})},e.id))}):(0,t.jsxs)(a.Card,{className:"rounded-[3.5rem] border-2 border-dashed border-foreground/10 bg-muted/5 p-24 text-center space-y-8",children:[(0,t.jsxs)("div",{className:"h-32 w-32 rounded-[2.5rem] bg-white shadow-2xl flex items-center justify-center mx-auto relative group overflow-hidden",children:[(0,t.jsx)(d.Wrench,{className:"h-14 w-14 text-muted-foreground/20 group-hover:rotate-12 transition-transform"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-primary/5 rounded-[2.5rem]"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-2xl font-black uppercase tracking-tight",children:"Systems Clear"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground max-w-sm mx-auto",children:"No active maintenance requests found at this time."})]})]})]})]})}e.s(["default",()=>b])}]);