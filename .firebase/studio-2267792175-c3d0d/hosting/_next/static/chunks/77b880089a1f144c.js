(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72520,e=>{"use strict";let r=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>r],72520)},71689,e=>{"use strict";let r=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>r],71689)},31278,e=>{"use strict";let r=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],31278)},29895,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(43531),o=e.i(44523),s=e.i(7233),n=e.i(4829),l=e.i(19455),i=e.i(17056),d=e.i(37822),c=e.i(76639),u=e.i(93479),m=e.i(10204);e.i(11981);var p=e.i(61480);e.i(36180);var h=e.i(17875),f=e.i(74911),x=e.i(31792),v=e.i(12416);function g({value:e,onChange:g,placeholder:y="Select university...",emptyText:j="School not found.",className:b,disabled:w=!1}){let[C,N]=t.useState(!1),[F,P]=t.useState([]),[S,R]=t.useState(""),[k,A]=t.useState(!1),I=(0,p.useFirestore)(),{toast:D}=(0,f.useToast)(),[E,L]=t.useState(!1),[M,T]=t.useState(""),[O,U]=t.useState(""),[B,q]=t.useState(""),[_,$]=t.useState(""),[z,H]=t.useState(!1);t.useEffect(()=>{if(!I)return;let e=async()=>{A(!0);try{let e,r=(0,h.collection)(I,"schools");e=S.trim()?(0,h.query)(r,(0,h.orderBy)("name"),(0,h.startAt)(S),(0,h.endAt)(S+"ï£¿"),(0,h.limit)(20)):(0,h.query)(r,(0,h.orderBy)("name"),(0,h.limit)(20));let t=(await (0,h.getDocs)(e)).docs.map(e=>({id:e.id,value:e.data().name,label:e.data().name}));P(t)}catch(e){console.error("Error fetching schools:",e)}finally{A(!1)}},r=setTimeout(()=>{e()},300);return()=>clearTimeout(r)},[S,I]);let V=async()=>{if(!M||!B||!O)return void D({variant:"destructive",title:"Missing Fields",description:"Please fill in Name, City, and Country."});if(!I)return void D({variant:"destructive",title:"System Error",description:"Database connection not available."});H(!0);try{let e=(0,h.collection)(I,"schools");await (0,h.addDoc)(e,{name:M,city:O,country:B,state:_||null,createdAt:new Date().toISOString()}),g(M),R(""),L(!1),T(""),U(""),$(""),q(""),D({title:"School Added",description:`${M} has been added to our database.`})}catch(e){console.error("Error adding school:",e),D({variant:"destructive",title:"Error",description:"Failed to add school. Please try again."})}finally{H(!1)}},G=t.useMemo(()=>B?(v.countries.find(e=>e.name===B)?.states||[]).map(e=>e.name):[],[B]);return(0,r.jsxs)(c.Dialog,{open:E,onOpenChange:L,children:[(0,r.jsxs)(d.Popover,{open:C,onOpenChange:N,modal:!1,children:[(0,r.jsx)(d.PopoverTrigger,{asChild:!0,children:(0,r.jsxs)(l.Button,{variant:"outline",role:"combobox","aria-expanded":C,className:(0,n.cn)("w-full justify-between",b,!e&&"text-muted-foreground"),disabled:w,children:[e||y,(0,r.jsx)(o.ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,r.jsx)(d.PopoverContent,{className:"w-[--radix-popover-trigger-width] p-0 z-[300]",onOpenAutoFocus:e=>e.preventDefault(),children:(0,r.jsxs)(i.Command,{shouldFilter:!1,children:[(0,r.jsx)(i.CommandInput,{placeholder:"Search university...",value:S,onValueChange:R}),(0,r.jsxs)(i.CommandList,{children:[(0,r.jsxs)(i.CommandEmpty,{className:"p-2",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:j}),(0,r.jsxs)(l.Button,{size:"sm",variant:"secondary",className:"w-full text-xs h-7",onClick:()=>{T(S),N(!1),L(!0)},children:[(0,r.jsx)(s.Plus,{className:"mr-1 h-3 w-3"}),' Add "',S||"New School",'"']})]}),(0,r.jsx)(i.CommandGroup,{children:F.map(t=>(0,r.jsxs)(i.CommandItem,{value:t.label,onPointerDown:e=>{e.preventDefault()},onSelect:r=>{g(r===e?"":r),N(!1)},onClick:()=>{g(t.label===e?"":t.label),N(!1)},children:[(0,r.jsx)(a.Check,{className:(0,n.cn)("mr-2 h-4 w-4",e===t.value?"opacity-100":"opacity-0")}),t.label]},t.id))})]})]})})]}),(0,r.jsxs)(c.DialogContent,{className:"sm:max-w-md w-[95vw] border-2 shadow-lg",children:[(0,r.jsxs)(c.DialogHeader,{children:[(0,r.jsx)(c.DialogTitle,{children:"Add New School"}),(0,r.jsx)(c.DialogDescription,{children:"Can't find your university? Add it to our database."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(m.Label,{htmlFor:"name",children:"University Name"}),(0,r.jsx)(u.Input,{id:"name",value:M,onChange:e=>T(e.target.value),placeholder:"e.g. University of Example"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(m.Label,{children:"Country"}),(0,r.jsx)(x.Combobox,{options:v.countries.map(e=>({label:e.name,value:e.name})),value:B,onChange:q,placeholder:"Select Country"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(m.Label,{children:"State / Province"}),(0,r.jsx)(x.Combobox,{options:G.map(e=>({label:e,value:e})),value:_,onChange:$,placeholder:"Select State",disabled:!B||0===G.length})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(m.Label,{htmlFor:"city",children:"City"}),(0,r.jsx)(u.Input,{id:"city",value:O,onChange:e=>U(e.target.value),placeholder:"e.g. London"})]})]}),(0,r.jsxs)(c.DialogFooter,{children:[(0,r.jsx)(l.Button,{variant:"outline",onClick:()=>L(!1),disabled:z,children:"Cancel"}),(0,r.jsx)(l.Button,{onClick:V,disabled:z,children:z?"Adding...":"Add School"})]})]})]})}e.s(["SchoolCombobox",()=>g])},7233,e=>{"use strict";let r=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],7233)},99682,e=>{"use strict";var r=e.i(71645);function t(e){let t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}e.s(["usePrevious",()=>t])},15288,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(4829);let o=t.forwardRef(({className:e,...t},o)=>(0,r.jsx)("div",{ref:o,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let s=t.forwardRef(({className:e,...t},o)=>(0,r.jsx)("div",{ref:o,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));s.displayName="CardHeader";let n=t.forwardRef(({className:e,...t},o)=>(0,r.jsx)("div",{ref:o,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));n.displayName="CardTitle";let l=t.forwardRef(({className:e,...t},o)=>(0,r.jsx)("div",{ref:o,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let i=t.forwardRef(({className:e,...t},o)=>(0,r.jsx)("div",{ref:o,className:(0,a.cn)("p-6 pt-0",e),...t}));i.displayName="CardContent";let d=t.forwardRef(({className:e,...t},o)=>(0,r.jsx)("div",{ref:o,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t}));d.displayName="CardFooter",e.s(["Card",()=>o,"CardContent",()=>i,"CardDescription",()=>l,"CardFooter",()=>d,"CardHeader",()=>s,"CardTitle",()=>n])},10204,e=>{"use strict";var r=e.i(43476),t=e.i(71645);e.i(74080);var a=e.i(91918),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,o)=>{let s=(0,a.createSlot)(`Primitive.${o}`),n=t.forwardRef((e,t)=>{let{asChild:a,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(a?s:o,{...n,ref:t})});return n.displayName=`Primitive.${o}`,{...e,[o]:n}},{}),s=t.forwardRef((e,t)=>(0,r.jsx)(o.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));s.displayName="Label";var n=e.i(25913),l=e.i(4829);let i=(0,n.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)(s,{ref:a,className:(0,l.cn)(i(),e),...t}));d.displayName=s.displayName,e.s(["Label",()=>d],10204)},55436,e=>{"use strict";let r=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>r],55436)},93479,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(4829);let o=t.forwardRef(({className:e,type:t,...o},s)=>(0,r.jsx)("input",{type:t,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...o}));o.displayName="Input",e.s(["Input",()=>o])},37822,e=>{"use strict";let r,t,a;var o=e.i(43476),s=e.i(71645),n=e.i(81140),l=e.i(20783),i=e.i(30030),d=e.i(26330),c=e.i(3536),u=e.i(65491),m=e.i(10772),p=e.i(53660),h=e.i(74606),f=e.i(96626),x=e.i(48425),v=Symbol("radix.slottable");function g(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===v}var y=e.i(69340),j=e.i(86312),b=e.i(85369),w="Popover",[C,N]=(0,i.createContextScope)(w,[p.createPopperScope]),F=(0,p.createPopperScope)(),[P,S]=C(w),R=e=>{let{__scopePopover:r,children:t,open:a,defaultOpen:n,onOpenChange:l,modal:i=!1}=e,d=F(r),c=s.useRef(null),[u,h]=s.useState(!1),[f,x]=(0,y.useControllableState)({prop:a,defaultProp:n??!1,onChange:l,caller:w});return(0,o.jsx)(p.Root,{...d,children:(0,o.jsx)(P,{scope:r,contentId:(0,m.useId)(),triggerRef:c,open:f,onOpenChange:x,onOpenToggle:s.useCallback(()=>x(e=>!e),[x]),hasCustomAnchor:u,onCustomAnchorAdd:s.useCallback(()=>h(!0),[]),onCustomAnchorRemove:s.useCallback(()=>h(!1),[]),modal:i,children:t})})};R.displayName=w;var k="PopoverAnchor";s.forwardRef((e,r)=>{let{__scopePopover:t,...a}=e,n=S(k,t),l=F(t),{onCustomAnchorAdd:i,onCustomAnchorRemove:d}=n;return s.useEffect(()=>(i(),()=>d()),[i,d]),(0,o.jsx)(p.Anchor,{...l,...a,ref:r})}).displayName=k;var A="PopoverTrigger",I=s.forwardRef((e,r)=>{let{__scopePopover:t,...a}=e,s=S(A,t),i=F(t),d=(0,l.useComposedRefs)(r,s.triggerRef),c=(0,o.jsx)(x.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":z(s.open),...a,ref:d,onClick:(0,n.composeEventHandlers)(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:(0,o.jsx)(p.Anchor,{asChild:!0,...i,children:c})});I.displayName=A;var D="PopoverPortal",[E,L]=C(D,{forceMount:void 0}),M=e=>{let{__scopePopover:r,forceMount:t,children:a,container:s}=e,n=S(D,r);return(0,o.jsx)(E,{scope:r,forceMount:t,children:(0,o.jsx)(f.Presence,{present:t||n.open,children:(0,o.jsx)(h.Portal,{asChild:!0,container:s,children:a})})})};M.displayName=D;var T="PopoverContent",O=s.forwardRef((e,r)=>{let t=L(T,e.__scopePopover),{forceMount:a=t.forceMount,...s}=e,n=S(T,e.__scopePopover);return(0,o.jsx)(f.Presence,{present:a||n.open,children:n.modal?(0,o.jsx)(B,{...s,ref:r}):(0,o.jsx)(q,{...s,ref:r})})});O.displayName=T;var U=((a=s.forwardRef((e,r)=>{let{children:t,...a}=e;if(s.isValidElement(t)){var o;let e,n,i=(o=t,(n=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(n=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),d=function(e,r){let t={...r};for(let a in r){let o=e[a],s=r[a];/^on[A-Z]/.test(a)?o&&s?t[a]=(...e)=>{let r=s(...e);return o(...e),r}:o&&(t[a]=o):"style"===a?t[a]={...o,...s}:"className"===a&&(t[a]=[o,s].filter(Boolean).join(" "))}return{...e,...t}}(a,t.props);return t.type!==s.Fragment&&(d.ref=r?(0,l.composeRefs)(r,i):i),s.cloneElement(t,d)}return s.Children.count(t)>1?s.Children.only(null):null})).displayName="PopoverContent.RemoveScroll.SlotClone",r=a,(t=s.forwardRef((e,t)=>{let{children:a,...n}=e,l=s.Children.toArray(a),i=l.find(g);if(i){let e=i.props.children,a=l.map(r=>r!==i?r:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,o.jsx)(r,{...n,ref:t,children:s.isValidElement(e)?s.cloneElement(e,void 0,a):null})}return(0,o.jsx)(r,{...n,ref:t,children:a})})).displayName="PopoverContent.RemoveScroll.Slot",t),B=s.forwardRef((e,r)=>{let t=S(T,e.__scopePopover),a=s.useRef(null),i=(0,l.useComposedRefs)(r,a),d=s.useRef(!1);return s.useEffect(()=>{let e=a.current;if(e)return(0,j.hideOthers)(e)},[]),(0,o.jsx)(b.RemoveScroll,{as:U,allowPinchZoom:!0,children:(0,o.jsx)(_,{...e,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,n.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),d.current||t.triggerRef.current?.focus()}),onPointerDownOutside:(0,n.composeEventHandlers)(e.onPointerDownOutside,e=>{let r=e.detail.originalEvent,t=0===r.button&&!0===r.ctrlKey;d.current=2===r.button||t},{checkForDefaultPrevented:!1}),onFocusOutside:(0,n.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),q=s.forwardRef((e,r)=>{let t=S(T,e.__scopePopover),a=s.useRef(!1),n=s.useRef(!1);return(0,o.jsx)(_,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{e.onCloseAutoFocus?.(r),r.defaultPrevented||(a.current||t.triggerRef.current?.focus(),r.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:r=>{e.onInteractOutside?.(r),r.defaultPrevented||(a.current=!0,"pointerdown"===r.detail.originalEvent.type&&(n.current=!0));let o=r.target;t.triggerRef.current?.contains(o)&&r.preventDefault(),"focusin"===r.detail.originalEvent.type&&n.current&&r.preventDefault()}})}),_=s.forwardRef((e,r)=>{let{__scopePopover:t,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:n,disableOutsidePointerEvents:l,onEscapeKeyDown:i,onPointerDownOutside:m,onFocusOutside:h,onInteractOutside:f,...x}=e,v=S(T,t),g=F(t);return(0,c.useFocusGuards)(),(0,o.jsx)(u.FocusScope,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:n,children:(0,o.jsx)(d.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:f,onEscapeKeyDown:i,onPointerDownOutside:m,onFocusOutside:h,onDismiss:()=>v.onOpenChange(!1),children:(0,o.jsx)(p.Content,{"data-state":z(v.open),role:"dialog",id:v.contentId,...g,...x,ref:r,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),$="PopoverClose";function z(e){return e?"open":"closed"}s.forwardRef((e,r)=>{let{__scopePopover:t,...a}=e,s=S($,t);return(0,o.jsx)(x.Primitive.button,{type:"button",...a,ref:r,onClick:(0,n.composeEventHandlers)(e.onClick,()=>s.onOpenChange(!1))})}).displayName=$,s.forwardRef((e,r)=>{let{__scopePopover:t,...a}=e,s=F(t);return(0,o.jsx)(p.Arrow,{...s,...a,ref:r})}).displayName="PopoverArrow";var H=e.i(4829);let V=s.forwardRef(({className:e,align:r="center",sideOffset:t=4,...a},s)=>(0,o.jsx)(M,{children:(0,o.jsx)(O,{ref:s,align:r,sideOffset:t,className:(0,H.cn)("z-[300] w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));V.displayName=O.displayName,e.s(["Popover",()=>R,"PopoverContent",()=>V,"PopoverTrigger",()=>I],37822)},66531,e=>{"use strict";let r=(0,e.i(75254).default)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);e.s(["UploadCloud",()=>r],66531)},86536,e=>{"use strict";let r=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>r],86536)},5702,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(18566),o=e.i(53145),s=e.i(94814),n=e.i(65638),l=e.i(19455),i=e.i(15288),d=e.i(3133),c=e.i(93479),u=e.i(81140),m=e.i(20783),p=e.i(30030),h=e.i(48425),f=e.i(42727),x=e.i(69340),v=e.i(86318),g=e.i(35804),y=e.i(99682),j=e.i(96626),b="Radio",[w,C]=(0,p.createContextScope)(b),[N,F]=w(b),P=t.forwardRef((e,a)=>{let{__scopeRadio:o,name:s,checked:n=!1,required:l,disabled:i,value:d="on",onCheck:c,form:p,...f}=e,[x,v]=t.useState(null),g=(0,m.useComposedRefs)(a,e=>v(e)),y=t.useRef(!1),j=!x||p||!!x.closest("form");return(0,r.jsxs)(N,{scope:o,checked:n,disabled:i,children:[(0,r.jsx)(h.Primitive.button,{type:"button",role:"radio","aria-checked":n,"data-state":A(n),"data-disabled":i?"":void 0,disabled:i,value:d,...f,ref:g,onClick:(0,u.composeEventHandlers)(e.onClick,e=>{n||c?.(),j&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),j&&(0,r.jsx)(k,{control:x,bubbles:!y.current,name:s,value:d,checked:n,required:l,disabled:i,form:p,style:{transform:"translateX(-100%)"}})]})});P.displayName=b;var S="RadioIndicator",R=t.forwardRef((e,t)=>{let{__scopeRadio:a,forceMount:o,...s}=e,n=F(S,a);return(0,r.jsx)(j.Presence,{present:o||n.checked,children:(0,r.jsx)(h.Primitive.span,{"data-state":A(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t})})});R.displayName=S;var k=t.forwardRef(({__scopeRadio:e,control:a,checked:o,bubbles:s=!0,...n},l)=>{let i=t.useRef(null),d=(0,m.useComposedRefs)(i,l),c=(0,y.usePrevious)(o),u=(0,g.useSize)(a);return t.useEffect(()=>{let e=i.current;if(!e)return;let r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==o&&r){let t=new Event("click",{bubbles:s});r.call(e,o),e.dispatchEvent(t)}},[c,o,s]),(0,r.jsx)(h.Primitive.input,{type:"radio","aria-hidden":!0,defaultChecked:o,...n,tabIndex:-1,ref:d,style:{...n.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function A(e){return e?"checked":"unchecked"}k.displayName="RadioBubbleInput";var I=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],D="RadioGroup",[E,L]=(0,p.createContextScope)(D,[f.createRovingFocusGroupScope,C]),M=(0,f.createRovingFocusGroupScope)(),T=C(),[O,U]=E(D),B=t.forwardRef((e,t)=>{let{__scopeRadioGroup:a,name:o,defaultValue:s,value:n,required:l=!1,disabled:i=!1,orientation:d,dir:c,loop:u=!0,onValueChange:m,...p}=e,g=M(a),y=(0,v.useDirection)(c),[j,b]=(0,x.useControllableState)({prop:n,defaultProp:s??null,onChange:m,caller:D});return(0,r.jsx)(O,{scope:a,name:o,required:l,disabled:i,value:j,onValueChange:b,children:(0,r.jsx)(f.Root,{asChild:!0,...g,orientation:d,dir:y,loop:u,children:(0,r.jsx)(h.Primitive.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":i?"":void 0,dir:y,...p,ref:t})})})});B.displayName=D;var q="RadioGroupItem",_=t.forwardRef((e,a)=>{let{__scopeRadioGroup:o,disabled:s,...n}=e,l=U(q,o),i=l.disabled||s,d=M(o),c=T(o),p=t.useRef(null),h=(0,m.useComposedRefs)(a,p),x=l.value===n.value,v=t.useRef(!1);return t.useEffect(()=>{let e=e=>{I.includes(e.key)&&(v.current=!0)},r=()=>v.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}},[]),(0,r.jsx)(f.Item,{asChild:!0,...d,focusable:!i,active:x,children:(0,r.jsx)(P,{disabled:i,required:l.required,checked:x,...c,...n,name:l.name,ref:h,onCheck:()=>l.onValueChange(n.value),onKeyDown:(0,u.composeEventHandlers)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,u.composeEventHandlers)(n.onFocus,()=>{v.current&&p.current?.click()})})})});_.displayName=q;var $=t.forwardRef((e,t)=>{let{__scopeRadioGroup:a,...o}=e,s=T(a);return(0,r.jsx)(R,{...s,...o,ref:t})});$.displayName="RadioGroupIndicator";var z=e.i(14683),H=e.i(4829);let V=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)(B,{className:(0,H.cn)("grid gap-2",e),...t,ref:a}));V.displayName=B.displayName;let G=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)(_,{ref:a,className:(0,H.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,r.jsx)($,{className:"flex items-center justify-center",children:(0,r.jsx)(z.Circle,{className:"h-2.5 w-2.5 fill-current text-current"})})}));G.displayName=_.displayName;var W=e.i(10204),J=e.i(31792),K=e.i(22016),X=e.i(86536),Y=e.i(75254);let Z=(0,Y.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var Q=e.i(71689),ee=e.i(72520),er=e.i(66531);let et=(0,Y.default)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);var ea=e.i(31278),eo=e.i(37727);e.i(74080);var es=e.i(91918),en=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let o=(0,es.createSlot)(`Primitive.${a}`),s=t.forwardRef((e,t)=>{let{asChild:s,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(s?o:a,{...n,ref:t})});return s.displayName=`Primitive.${a}`,{...e,[a]:s}},{}),el="Progress",[ei,ed]=function(e,a=[]){let o=[],s=()=>{let r=o.map(e=>t.createContext(e));return function(a){let o=a?.[e]||r;return t.useMemo(()=>({[`__scope${e}`]:{...a,[e]:o}}),[a,o])}};return s.scopeName=e,[function(a,s){let n=t.createContext(s);n.displayName=a+"Context";let l=o.length;o=[...o,s];let i=a=>{let{scope:o,children:s,...i}=a,d=o?.[e]?.[l]||n,c=t.useMemo(()=>i,Object.values(i));return(0,r.jsx)(d.Provider,{value:c,children:s})};return i.displayName=a+"Provider",[i,function(r,o){let i=o?.[e]?.[l]||n,d=t.useContext(i);if(d)return d;if(void 0!==s)return s;throw Error(`\`${r}\` must be used within \`${a}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let o=a.reduce((r,{useScope:t,scopeName:a})=>{let o=t(e)[`__scope${a}`];return{...r,...o}},{});return t.useMemo(()=>({[`__scope${r.scopeName}`]:o}),[o])}};return a.scopeName=r.scopeName,a}(s,...a)]}(el),[ec,eu]=ei(el),em=t.forwardRef((e,t)=>{var a,o;let{__scopeProgress:s,value:n=null,max:l,getValueLabel:i=ef,...d}=e;(l||0===l)&&!eg(l)&&console.error((a=`${l}`,`Invalid prop \`max\` of value \`${a}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let c=eg(l)?l:100;null===n||ey(n,c)||console.error((o=`${n}`,`Invalid prop \`value\` of value \`${o}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let u=ey(n,c)?n:null,m=ev(u)?i(u,c):void 0;return(0,r.jsx)(ec,{scope:s,value:u,max:c,children:(0,r.jsx)(en.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":ev(u)?u:void 0,"aria-valuetext":m,role:"progressbar","data-state":ex(u,c),"data-value":u??void 0,"data-max":c,...d,ref:t})})});em.displayName=el;var ep="ProgressIndicator",eh=t.forwardRef((e,t)=>{let{__scopeProgress:a,...o}=e,s=eu(ep,a);return(0,r.jsx)(en.div,{"data-state":ex(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...o,ref:t})});function ef(e,r){return`${Math.round(e/r*100)}%`}function ex(e,r){return null==e?"indeterminate":e===r?"complete":"loading"}function ev(e){return"number"==typeof e}function eg(e){return ev(e)&&!isNaN(e)&&e>0}function ey(e,r){return ev(e)&&!isNaN(e)&&e<=r&&e>=0}eh.displayName=ep;let ej=t.forwardRef(({className:e,value:t,...a},o)=>(0,r.jsx)(em,{ref:o,className:(0,H.cn)("relative h-2 w-full overflow-hidden rounded-full bg-secondary",e),...a,children:(0,r.jsx)(eh,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));ej.displayName=em.displayName;var eb=e.i(61480),ew=e.i(74911);e.i(11981);var eC=e.i(31883),eN=e.i(12416);e.i(61086);var eF=e.i(27651);e.i(36180);var eP=e.i(17875),eS=e.i(29895);let eR=n.object({userType:n.enum(["student","landlord"]),name:n.string().min(2,"Name must be at least 2 characters."),legalName:n.string().min(2,"Legal Name is required for contracts."),email:n.string().email("Invalid email address."),password:n.string().min(8,"Password must be at least 8 characters."),confirmPassword:n.string(),phone:n.string().min(10,"Valid phone number is required."),whatsappUrl:n.string().url("Please enter a valid URL.").optional().or(n.literal("")),twitterUrl:n.string().url("Please enter a valid URL.").optional().or(n.literal("")),country:n.string().optional(),state:n.string().optional(),school:n.string().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}).refine(e=>"student"!==e.userType||!!e.country,{message:"Country is required.",path:["country"]}).refine(e=>"student"!==e.userType||!!e.state,{message:"State is required.",path:["state"]}).refine(e=>"student"!==e.userType||!!e.school,{message:"School is required.",path:["school"]});function ek(){let[e,n]=(0,t.useState)(1),[u,m]=(0,t.useState)(!1),[p,h]=(0,t.useState)(!1),[f,x]=(0,t.useState)(null),[v,g]=(0,t.useState)(null),y=(0,t.useRef)(null),j=(0,a.useRouter)(),b=(0,eb.useAuth)(),w=(0,eb.useFirestore)(),C=(0,eb.useFirebaseApp)(),{toast:N}=(0,ew.useToast)(),[F,P]=(0,t.useState)(null),[S,R]=(0,t.useState)([]),k=(0,o.useForm)({resolver:(0,s.zodResolver)(eR),defaultValues:{userType:"student",name:"",legalName:"",email:"",password:"",confirmPassword:""}}),{setError:A,watch:I}=k,D=I("userType"),E=I("country");(0,t.useEffect)(()=>{if(E){let e=eN.countries.find(e=>e.name===E);P(e||null),R(e?.states||[])}else P(null),R([])},[E]);let L="student"===D?[{id:1,name:"Choose Account Type",fields:["userType"]},{id:2,name:"Account Details",fields:["name","legalName","email","password","confirmPassword"]},{id:3,name:"Location & Contact",fields:["country","state","school","phone"]},{id:4,name:"Profile Picture (Optional)",fields:[]}]:[{id:1,name:"Choose Account Type",fields:["userType"]},{id:2,name:"Account Details",fields:["name","legalName","email","password","confirmPassword"]},{id:3,name:"Location & Contact",fields:["country","state","phone","whatsappUrl","twitterUrl"]},{id:4,name:"Profile Picture (Optional)",fields:[]}],M=L.length,T=async()=>{let r=L[e-1].fields;await k.trigger(r,{shouldFocus:!0})&&e<M&&n(e=>e+1)},O=async r=>{if(e<M)return void n(e=>e+1);if(!b||!w)return void N({variant:"destructive",title:"System Error",description:"Firebase services are not available."});try{let e=(await (0,eC.initiateEmailSignUp)(b,r.email,r.password)).user.uid,t=null;if(f)try{let r=(0,eF.getStorage)(C),a=(0,eF.ref)(r,`users/${e}/profile-picture`);await (0,eF.uploadBytes)(a,f,{contentType:f.type,cacheControl:"public, max-age=3600"}),t=await (0,eF.getDownloadURL)(a)}catch(e){console.error("Error uploading profile image:",e),N({title:"Profile created",description:"Account created but profile picture upload failed. You can upload it later."})}let a={id:e,name:r.name,legalName:r.legalName,email:r.email,role:r.userType,profileImageUrl:t,country:r.country||null,state:r.state||null,school:r.school||null,phone:r.phone||null,whatsappUrl:r.whatsappUrl||null,twitterUrl:r.twitterUrl||null,bio:"",createdAt:new Date().toISOString()};await (0,eP.setDoc)((0,eP.doc)(w,"users",e),a),N({title:"Account Created!",description:"Welcome to Lodger! Please sign in."}),j.push("/auth/login")}catch(e){console.error("Signup error:",e),"auth/email-already-in-use"===e.code?(A("email",{type:"manual",message:"This email address is already in use. Please try another one."}),n(2)):e.code&&e.code.includes("permission-denied")?N({variant:"destructive",title:"Access Denied",description:"Your account was authenticated but we couldn't create your profile due to permission rules. Please contact support."}):N({variant:"destructive",title:"Registration Failed",description:e.message||"There was a problem creating your account. Please try again."})}};return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background px-4 py-12",children:(0,r.jsxs)(i.Card,{className:"w-full max-w-lg",children:[(0,r.jsxs)(i.CardHeader,{className:"text-center",children:[(0,r.jsx)(i.CardTitle,{className:"font-headline text-3xl",children:"Create an Account"}),(0,r.jsx)(i.CardDescription,{children:"Join our community of students and landlords."})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,r.jsx)(ej,{value:e/M*100}),(0,r.jsxs)("p",{className:"text-center text-sm text-muted-foreground",children:["Step ",e," of ",M,": ",L[e-1].name]})]}),(0,r.jsx)(o.FormProvider,{...k,children:(0,r.jsxs)("form",{onSubmit:r=>{r.preventDefault(),e!==M&&k.handleSubmit(O)(r)},className:"space-y-8",children:[(0,r.jsx)("div",{className:(0,H.cn)(1===e?"block":"hidden"),children:(0,r.jsx)(d.FormField,{control:k.control,name:"userType",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"I am a..."}),(0,r.jsx)(d.FormControl,{children:(0,r.jsxs)(V,{onValueChange:r=>{e.onChange(r),k.reset({...k.getValues(),userType:r,phone:"",whatsappUrl:"",twitterUrl:"",country:"",state:"",school:""})},defaultValue:e.value,className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(G,{value:"student",id:"student",className:"peer sr-only"}),(0,r.jsx)(W.Label,{htmlFor:"student",className:"flex h-full cursor-pointer flex-col items-center justify-center rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary",children:"Student"})]}),(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(G,{value:"landlord",id:"landlord",className:"peer sr-only"}),(0,r.jsx)(W.Label,{htmlFor:"landlord",className:"flex h-full cursor-pointer flex-col items-center justify-center rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground peer-data-[state=checked]:border-primary [&:has([data-state=checked])]:border-primary",children:"Landlord"})]})]})}),(0,r.jsx)(d.FormMessage,{})]})})}),(0,r.jsxs)("div",{className:(0,H.cn)("space-y-6",2===e?"block":"hidden"),children:[(0,r.jsx)(d.FormField,{control:k.control,name:"name",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Full Name (Display Name)"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"John Doe",...e})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsx)(d.FormField,{control:k.control,name:"legalName",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Legal Name (For Contracts)"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"Johnathan Doe",...e})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsx)(d.FormField,{control:k.control,name:"email",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Email"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{type:"email",placeholder:"name@example.com",...e})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsx)(d.FormField,{control:k.control,name:"password",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Password"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.Input,{type:u?"text":"password",...e}),(0,r.jsx)(l.Button,{type:"button",variant:"ghost",size:"icon",className:"absolute inset-y-0 right-0 h-full px-3",onClick:()=>m(!u),children:u?(0,r.jsx)(Z,{}):(0,r.jsx)(X.Eye,{})})]})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsx)(d.FormField,{control:k.control,name:"confirmPassword",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Confirm Password"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.Input,{type:p?"text":"password",...e}),(0,r.jsx)(l.Button,{type:"button",variant:"ghost",size:"icon",className:"absolute inset-y-0 right-0 h-full px-3",onClick:()=>h(!p),children:p?(0,r.jsx)(Z,{}):(0,r.jsx)(X.Eye,{})})]})}),(0,r.jsx)(d.FormMessage,{})]})})]}),(0,r.jsxs)("div",{className:(0,H.cn)("space-y-6",3===e?"block":"hidden"),children:["landlord"===D&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tell us where you're based and how tenants can contact you."}),(0,r.jsx)(d.FormField,{control:k.control,name:"country",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Country"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(J.Combobox,{options:eN.countries.map(e=>({label:e.name,value:e.name})),value:e.value,onChange:e.onChange,placeholder:"Select Country",emptyText:"No country found."})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsx)(d.FormField,{control:k.control,name:"state",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"State/Province"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(J.Combobox,{options:S.map(e=>({label:e.name,value:e.name})),value:e.value,onChange:e.onChange,placeholder:"Select State",emptyText:"No state found.",disabled:!E})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsx)(d.FormField,{control:k.control,name:"phone",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Phone Number (Required)"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{type:"tel",placeholder:"(123) 456-7890",...e})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsx)(d.FormField,{control:k.control,name:"whatsappUrl",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"WhatsApp URL (Optional)"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{type:"url",placeholder:"https://wa.me/11234567890",...e})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsx)(d.FormField,{control:k.control,name:"twitterUrl",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"X (Twitter) Profile URL (Optional)"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{type:"url",placeholder:"https://x.com/yourprofile",...e})}),(0,r.jsx)(d.FormMessage,{})]})})]}),"student"===D&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Help us find properties near your school."}),(0,r.jsx)(d.FormField,{control:k.control,name:"country",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Country"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(J.Combobox,{options:eN.countries.map(e=>({label:e.name,value:e.name})),value:e.value,onChange:e.onChange,placeholder:"Select Country",emptyText:"No country found."})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsx)(d.FormField,{control:k.control,name:"state",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"State/Province"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(J.Combobox,{options:S.map(e=>({label:e.name,value:e.name})),value:e.value,onChange:e.onChange,placeholder:"Select State",emptyText:"No state found.",disabled:!E})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsx)(d.FormField,{control:k.control,name:"school",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"School"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(eS.SchoolCombobox,{value:e.value,onChange:e.onChange,placeholder:"Select School",emptyText:"No school found."})}),(0,r.jsx)(d.FormMessage,{})]})}),(0,r.jsx)(d.FormField,{control:k.control,name:"phone",render:({field:e})=>(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Phone Number (Required)"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{type:"tel",placeholder:"(123) 456-7890",...e})}),(0,r.jsx)(d.FormMessage,{})]})})]})]})]}),(0,r.jsxs)("div",{className:(0,H.cn)("space-y-6",4===e?"block":"hidden"),children:[(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Add a Profile Picture"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Help others recognize you! You can skip this step and add it later."})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[v?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-32 w-32 rounded-full overflow-hidden border-4 border-primary",children:(0,r.jsx)("img",{src:v,alt:"Profile preview",className:"h-full w-full object-cover"})}),(0,r.jsx)(l.Button,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-8 w-8 rounded-full",onClick:()=>{x(null),g(null),y.current&&(y.current.value="")},children:(0,r.jsx)(eo.X,{className:"h-4 w-4"})})]}):(0,r.jsx)("div",{className:"h-32 w-32 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:(0,r.jsx)(et,{className:"h-16 w-16 text-muted-foreground/50"})}),(0,r.jsx)("input",{ref:y,type:"file",accept:"image/*",className:"hidden",onChange:e=>{let r=e.target.files?.[0];if(!r)return;if(!r.type.startsWith("image/"))return void N({variant:"destructive",title:"Invalid file type",description:"Please upload a valid image file."});if(r.size>5242880)return void N({variant:"destructive",title:"Image too large",description:"Please upload an image smaller than 5MB."});x(r);let t=new FileReader;t.onloadend=()=>{g(t.result)},t.readAsDataURL(r)}}),(0,r.jsxs)(l.Button,{type:"button",variant:"outline",onClick:()=>y.current?.click(),className:"w-full max-w-xs",children:[(0,r.jsx)(er.UploadCloud,{className:"mr-2 h-4 w-4"}),v?"Change Picture":"Upload Picture"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Accepted formats: JPG, PNG, WebP (Max 5MB)"})]})]}),(0,r.jsxs)("div",{className:"mt-12 flex flex-col sm:flex-row justify-between gap-4",children:[(0,r.jsxs)(l.Button,{type:"button",variant:"outline",onClick:()=>{e>1&&n(e=>e-1)},className:(0,H.cn)(1===e&&"invisible","w-full sm:w-auto"),children:[(0,r.jsx)(Q.ArrowLeft,{className:"mr-2 h-4 w-4"})," Back"]}),e<M?(0,r.jsxs)(l.Button,{type:"button",onClick:T,className:"w-full sm:w-auto",children:["Next ",(0,r.jsx)(ee.ArrowRight,{className:"ml-2 h-4 w-4"})]}):(0,r.jsx)(l.Button,{type:"button",onClick:k.handleSubmit(O),disabled:k.formState.isSubmitting,className:"w-full sm:w-auto",children:k.formState.isSubmitting?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ea.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"})]})]})})]}),(0,r.jsxs)(i.CardFooter,{className:"flex-col gap-4",children:[(0,r.jsxs)("p",{className:"text-center text-xs text-muted-foreground",children:["By creating an account, you agree to our"," ",(0,r.jsx)(K.default,{href:"/terms",className:"underline hover:text-primary",children:"Terms of Service"})," ","and"," ",(0,r.jsx)(K.default,{href:"/privacy",className:"underline hover:text-primary",children:"Privacy Policy"}),"."]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",(0,r.jsx)(K.default,{href:"/auth/login",className:"font-medium text-primary underline-offset-4 hover:underline",children:"Sign in"})]})]})]})})}e.s(["default",()=>ek],5702)}]);