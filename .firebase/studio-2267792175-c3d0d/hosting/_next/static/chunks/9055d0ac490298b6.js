(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70094,e=>{"use strict";var t=e.i(43476),r=e.i(18566),a=e.i(4829),s=e.i(23204),i=e.i(87486),l=e.i(19455),n=e.i(15288),o=e.i(99676),d=e.i(77572),c=e.i(70273),m=e.i(58500),x=e.i(34972),u=e.i(59386),p=e.i(46897),h=e.i(69638),g=e.i(53475),b=e.i(87223),f=e.i(44988),v=e.i(82365),j=e.i(53013),y=e.i(86311),N=e.i(62031),w=e.i(63488),k=e.i(42920),C=e.i(32095),D=e.i(73375),P=e.i(90597),S=e.i(26842),O=e.i(71645),T=e.i(76639),I=e.i(22016),B={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},R=O.default.createContext&&O.default.createContext(B),A=["attr","size","title"];function L(){return(L=Object.assign.bind()).apply(this,arguments)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function M(e){var t=t=>{var r,{attr:a,size:s,title:i}=e,l=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,A),n=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),O.default.createElement("svg",L({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,l,{className:r,style:F(F({color:e.color||t.color},t.style),e.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),i&&O.default.createElement("title",null,i),e.children)};return void 0!==R?O.default.createElement(R.Consumer,null,e=>t(e)):t(B)}function U(e){var t;return(t={tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]},e=>O.default.createElement(M,L({attr:F({},t.attr)},e),function e(t){return t&&t.map((t,r)=>O.default.createElement(t.tag,F({key:r},t.attr),e(t.child)))}(t.child)))(e)}var q=e.i(74911),H=e.i(10204),z=e.i(24687);e.i(11981);var _=e.i(61480),Y=e.i(41899),W=e.i(80428);e.i(36180);var $=e.i(17875),G=e.i(90281),K=e.i(25126),V=e.i(30205),J=e.i(17064);let Q={Furnished:(0,t.jsx)(j.Tv,{className:"h-5 w-5 text-primary"}),"Wi-Fi":(0,t.jsx)(g.Wifi,{className:"h-5 w-5 text-primary"}),"In-unit Laundry":(0,t.jsx)(v.Wind,{className:"h-5 w-5 text-primary"}),"Pet Friendly":(0,t.jsx)(f.Dog,{className:"h-5 w-5 text-primary"}),"Parking Spot":(0,t.jsx)(b.ParkingCircle,{className:"h-5 w-5 text-primary"})};function X({initialProperty:e,propertyId:g}){(0,r.useParams)();let b=(0,_.useFirestore)(),f=(0,r.usePathname)(),{toast:v}=(0,q.useToast)(),{user:j,isUserLoading:B}=(0,_.useUser)(),R=(0,r.useRouter)(),[A,L]=(0,O.useState)(""),[E,F]=(0,O.useState)(!1),[M,X]=(0,O.useState)(!1);(0,O.useEffect)(()=>{F(!0)},[]);let ee=(0,_.useMemoFirebase)(()=>g?(0,$.doc)(b,"properties",g):null,[b,g]),{data:et,isLoading:er}=(0,Y.useDoc)(ee),ea=et||e,es=(0,_.useMemoFirebase)(()=>ea?(0,$.doc)(b,"users",ea.landlordId):null,[b,ea]),{data:ei,isLoading:el}=(0,Y.useDoc)(es),en=(0,_.useMemoFirebase)(()=>g?(0,$.query)((0,$.collection)(b,"propertyReviews"),(0,$.where)("propertyId","==",g)):null,[b,g]),{data:eo,isLoading:ed}=(0,W.useCollection)(en),ec=(0,_.useMemoFirebase)(()=>j?(0,$.doc)(b,"users",j.uid):null,[b,j]),{data:em,isLoading:ex}=(0,Y.useDoc)(ec),eu=O.default.useMemo(()=>em?.currency?em.currency:em?.country?(0,s.getCurrencyByCountry)(em.country):"USD",[em]),ep=(0,_.useMemoFirebase)(()=>(0,$.query)((0,$.collection)(b,"properties"),(0,$.where)("status","==","available")),[b]),{data:eh}=(0,W.useCollection)(ep),eg=O.default.useMemo(()=>ea&&eh?eh.filter(e=>e.id!==ea.id&&(e.type===ea.type||e.location.city===ea.location.city)).slice(0,3):[],[ea,eh]),eb=O.default.useMemo(()=>!!em&&!!ea&&(em.bookmarkedPropertyIds||[]).includes(ea.id),[em?.bookmarkedPropertyIds,ea?.id]);if(!ea&&!(el||ed||B||ex))return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-center py-20",children:[(0,t.jsx)("div",{className:"rounded-full bg-secondary p-4",children:(0,t.jsx)(k.Building,{className:"h-10 w-10 text-muted-foreground"})}),(0,t.jsx)("h1",{className:"mt-6 text-2xl font-bold",children:"Property Not Found"}),(0,t.jsx)("p",{className:"mt-2 text-muted-foreground",children:"The property you are looking for does not exist or is no longer available."}),(0,t.jsx)(l.Button,{asChild:!0,className:"mt-6",children:(0,t.jsx)(I.default,{href:"/student/properties",children:"Browse Other Properties"})})]});let ef=eo&&eo.length>0?eo.reduce((e,t)=>e+t.rating,0)/eo.length:0,ev=E?`${window.location.origin}${f}`:"",ej=async()=>{if(!j||!ei||!ea){v({variant:"destructive",title:"Login or Data Missing",description:"You must be logged in and property data must be loaded to send a request."}),j||R.push("/auth/login");return}let e=(0,$.collection)(b,"rentalApplications"),t={propertyId:ea.id,tenantId:j.uid,landlordId:ea.landlordId,messageToLandlord:A,applicationDate:new Date().toISOString(),status:"pending"};try{let r=await (0,$.addDoc)(e,t);await (0,$.updateDoc)(r,{id:r.id});let a=(0,$.collection)(b,"messages");await (0,$.addDoc)(a,{text:A||`Hi, I'm interested in renting ${ea.title}.`,senderId:j.uid,recipientId:ei.id,participantIds:[j.uid,ei.id].sort(),timestamp:(0,$.serverTimestamp)(),read:!1}),await (0,G.sendNotification)({toUserId:ei.id,type:"NEW_REQUEST",firestore:b,senderName:em?.name||"A student",propertyName:ea.title,link:"/landlord/requests"}),v({title:"Request Sent!",description:"Your rental request has been sent to the landlord."}),R.push(`/student/messages?conversationId=${ei.id}`)}catch(e){console.error("Error sending rental request:",e),v({variant:"destructive",title:"Uh oh! Something went wrong.",description:"Could not send your rental request. Please try again later."})}},ey=async e=>{if(e.preventDefault(),!j||!ec||!ea)return void v({variant:"destructive",title:"Login Required",description:"Please log in to bookmark properties"});try{eb?(await (0,$.updateDoc)(ec,{bookmarkedPropertyIds:(0,$.arrayRemove)(ea.id)}),v({title:"Removed from bookmarks"})):(await (0,$.updateDoc)(ec,{bookmarkedPropertyIds:(0,$.arrayUnion)(ea.id)}),v({title:"Added to bookmarks"}))}catch(e){console.error("Error toggling bookmark:",e)}},eN={"@context":"https://schema.org","@type":"RealEstateListing",name:ea.title,description:ea.description,image:ea.images,url:ev,address:{"@type":"PostalAddress",streetAddress:ea.location.address,addressLocality:ea.location.city,addressRegion:ea.location.state},offers:{"@type":"Offer",price:ea.price,priceCurrency:ea.currency||"USD"}};return(0,t.jsxs)("div",{className:"min-h-screen pb-20",children:[(0,t.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(eN)}}),(0,t.jsx)("div",{className:"container mx-auto max-w-7xl px-4 lg:px-8 mt-0",children:(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",onClick:()=>R.back(),className:"gap-2 hover:gap-3 transition-all",children:[(0,t.jsx)(D.ChevronLeft,{className:"h-4 w-4"})," Back to Properties"]})}),(0,t.jsx)("div",{className:"container mx-auto max-w-7xl px-4 lg:px-8 mt-4",children:(0,t.jsx)(V.PropertyHeroCarousel,{images:ea.images,title:ea.title})}),(0,t.jsxs)("div",{className:"container mx-auto max-w-7xl px-4 lg:px-8 mt-12",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-12",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i.Badge,{variant:"secondary",className:"bg-primary/10 text-primary border-none px-4 py-1 text-xs font-bold uppercase tracking-widest",children:ea.type}),"occupied"===ea.status&&(0,t.jsx)(i.Badge,{variant:"destructive",className:"px-4 py-1 text-xs font-bold uppercase tracking-widest",children:"Occupied"})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-6",children:[(0,t.jsx)("h1",{className:"font-headline text-4xl md:text-6xl font-bold tracking-tight text-foreground leading-[1.1] flex-1 uppercase",children:ea.title}),(0,t.jsxs)("div",{className:"flex items-center gap-3 shrink-0 md:mt-2",children:[(0,t.jsx)(l.Button,{variant:"outline",size:"icon",className:(0,a.cn)("h-14 w-14 rounded-2xl border-2 transition-all hover:scale-105",eb?"bg-red-50 border-red-100 text-red-500 hover:bg-red-100":"bg-white hover:border-primary/20"),onClick:ey,children:(0,t.jsx)(P.Heart,{className:(0,a.cn)("h-6 w-6",eb&&"fill-current")})}),(0,t.jsx)(l.Button,{variant:"outline",size:"icon",className:"h-14 w-14 rounded-2xl border-2 bg-white hover:border-primary/20 transition-all hover:scale-105",onClick:()=>X(!0),children:(0,t.jsx)(N.Share2,{className:"h-6 w-6"})})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-3 text-muted-foreground font-medium",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.MapPin,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("span",{children:[ea.location.address,", ",ea.location.city]})]}),ea.location.school&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.GraduationCap,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("span",{children:["Near ",ea.location.school]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Star,{className:"h-5 w-5 text-yellow-500 fill-current"}),(0,t.jsx)("span",{className:"text-foreground",children:ef.toFixed(1)}),(0,t.jsxs)("span",{className:"text-sm font-normal",children:["(",eo?.length||0," reviews)"]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-muted/30 p-6 rounded-3xl border border-border/50 flex flex-col items-center text-center group hover:bg-primary/5 hover:border-primary/20 transition-all",children:[(0,t.jsx)(m.BedDouble,{className:"h-8 w-8 text-primary mb-3 transition-transform group-hover:scale-110"}),(0,t.jsx)("p",{className:"text-xl font-bold",children:ea.bedrooms}),(0,t.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Bedrooms"})]}),(0,t.jsxs)("div",{className:"bg-muted/30 p-6 rounded-3xl border border-border/50 flex flex-col items-center text-center group hover:bg-primary/5 hover:border-primary/20 transition-all",children:[(0,t.jsx)(x.Bath,{className:"h-8 w-8 text-primary mb-3 transition-transform group-hover:scale-110"}),(0,t.jsx)("p",{className:"text-xl font-bold",children:ea.bathrooms}),(0,t.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Bathrooms"})]}),(0,t.jsxs)("div",{className:"bg-muted/30 p-6 rounded-3xl border border-border/50 flex flex-col items-center text-center group hover:bg-primary/5 hover:border-primary/20 transition-all",children:[(0,t.jsx)(u.Ruler,{className:"h-8 w-8 text-primary mb-3 transition-transform group-hover:scale-110"}),(0,t.jsx)("p",{className:"text-xl font-bold",children:ea.area}),(0,t.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Square Feet"})]}),(0,t.jsxs)("div",{className:"bg-muted/30 p-6 rounded-3xl border border-border/50 flex flex-col items-center text-center group hover:bg-primary/5 hover:border-primary/20 transition-all",children:[(0,t.jsx)(k.Building,{className:"h-8 w-8 text-primary mb-3 transition-transform group-hover:scale-110"}),(0,t.jsx)("p",{className:"text-xl font-bold whitespace-nowrap",children:ea.type}),(0,t.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground",children:"Property Type"})]})]}),(0,t.jsxs)(d.Tabs,{defaultValue:"gallery",className:"w-full",children:[(0,t.jsxs)(d.TabsList,{className:"w-full justify-start bg-transparent border-b rounded-none px-0 h-auto gap-8 mb-8",children:[(0,t.jsx)(d.TabsTrigger,{value:"gallery",className:"text-base font-bold rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 pb-4",children:"Gallery"}),(0,t.jsx)(d.TabsTrigger,{value:"overview",className:"text-base font-bold rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 pb-4",children:"Overview"}),(0,t.jsx)(d.TabsTrigger,{value:"amenities",className:"text-base font-bold rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 pb-4",children:"Amenities"}),(0,t.jsx)(d.TabsTrigger,{value:"rules",className:"text-base font-bold rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 pb-4",children:"House Rules"}),(0,t.jsx)(d.TabsTrigger,{value:"reviews",className:"text-base font-bold rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent px-0 pb-4",children:"Reviews"})]}),(0,t.jsx)(d.TabsContent,{value:"gallery",className:"mt-0 space-y-6",children:(0,t.jsx)(K.PropertyGallery,{images:ea.images,videos:ea.videos,title:ea.title})}),(0,t.jsxs)(d.TabsContent,{value:"overview",className:"mt-0 space-y-6",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:"About this property"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground leading-relaxed",children:ea.description})]}),(0,t.jsx)(d.TabsContent,{value:"amenities",className:"mt-0",children:(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:ea.amenities.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-2xl border bg-card/50 backdrop-blur-sm group hover:border-primary/30 transition-all",children:[(0,t.jsx)("div",{className:"bg-primary/10 p-2 rounded-xl text-primary group-hover:bg-primary group-hover:text-white transition-all",children:Q[e]||(0,t.jsx)(h.CheckCircle,{className:"h-5 w-5"})}),(0,t.jsx)("span",{className:"font-bold text-sm tracking-tight",children:e})]},e))})}),(0,t.jsx)(d.TabsContent,{value:"rules",className:"mt-0",children:(0,t.jsx)("div",{className:"bg-muted/20 p-8 rounded-[2rem] border-2 border-dashed border-border",children:(0,t.jsx)("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ea.rules.map(e=>(0,t.jsxs)("li",{className:"flex items-start gap-3 text-muted-foreground font-medium",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e]},e))})})}),(0,t.jsxs)(d.TabsContent,{value:"reviews",className:"mt-0 space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold tracking-tight",children:"Student reviews"}),(0,t.jsx)(Z,{propertyId:ea.id,userId:j?.uid,firestore:b,userProfile:em})]}),eo&&eo.length>0?(0,t.jsx)("div",{className:"space-y-6",children:eo.map(e=>(0,t.jsxs)("div",{className:"p-6 rounded-3xl border bg-card/50 backdrop-blur-sm space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(o.Avatar,{className:"h-12 w-12 border-2 border-background shadow-lg",children:[(0,t.jsx)(o.AvatarImage,{src:e.tenantImageUrl,className:"object-cover"}),(0,t.jsx)(o.AvatarFallback,{className:"bg-primary/10 text-primary font-bold",children:e.tenantName?.[0]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-lg leading-none",children:e.tenantName}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)("div",{className:"flex italic",children:[void 0,void 0,void 0,void 0,void 0].map((r,s)=>(0,t.jsx)(c.Star,{className:(0,a.cn)("h-3 w-3",s<e.rating?"text-yellow-500 fill-current":"text-muted/30")},s))}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground font-bold",children:new Date(e.reviewDate).toLocaleDateString(void 0,{month:"long",year:"numeric"})})]})]})]}),(0,t.jsx)("p",{className:"text-muted-foreground leading-relaxed font-medium",children:e.comment})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12 bg-muted/20 rounded-3xl border border-dashed flex flex-col items-center gap-3",children:[(0,t.jsx)(c.Star,{className:"h-8 w-8 text-muted/30"}),(0,t.jsx)("p",{className:"text-muted-foreground font-bold",children:"No reviews yet for this property."})]})]})]})]}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"sticky top-12 space-y-6",children:[(0,t.jsxs)(n.Card,{className:"border-none bg-background shadow-[0_0_50px_-12px_rgba(0,0,0,0.12)] rounded-[2.5rem] overflow-hidden",children:[(0,t.jsxs)(n.CardHeader,{className:"bg-[#0A0A0A] text-white p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)(i.Badge,{variant:"secondary",className:"bg-white/10 text-white border-white/20 px-3 py-0.5 text-[10px] font-bold uppercase tracking-widest",children:"Pricing"}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-white/60",children:[(0,t.jsx)(c.Star,{className:"h-4 w-4 text-yellow-500 fill-current"}),(0,t.jsx)("span",{className:"text-sm font-bold text-white",children:ef.toFixed(1)})]})]}),(0,t.jsxs)("p",{className:"text-3xl md:text-4xl font-bold tracking-tight truncate",children:[eu&&eu!==ea.currency?(0,a.formatPrice)((0,s.convertCurrency)(ea.price,ea.currency,eu),eu):(0,a.formatPrice)(ea.price,ea.currency),(0,t.jsx)("span",{className:"text-base md:text-lg font-normal text-white/40 ml-1",children:"/mo"})]})]}),(0,t.jsxs)(n.CardContent,{className:"p-8 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(T.Dialog,{children:[(0,t.jsx)(T.DialogTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{className:"w-full h-14 rounded-2xl text-lg font-bold shadow-xl shadow-primary/20",disabled:"occupied"===ea.status,children:"Request to Rent"})}),(0,t.jsxs)(T.DialogContent,{className:"sm:max-w-lg rounded-3xl",children:[(0,t.jsxs)(T.DialogHeader,{children:[(0,t.jsxs)(T.DialogTitle,{className:"text-2xl font-bold uppercase",children:["Application for ",ea.title]}),(0,t.jsxs)(T.DialogDescription,{className:"text-base font-medium",children:["Start a conversation with ",ei?.name,". Your request will include a text message."]})]}),(0,t.jsx)("div",{className:"py-6 space-y-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(H.Label,{htmlFor:"message",children:"Your Message"}),(0,t.jsx)(z.Textarea,{id:"message",placeholder:"Describe yourself...",className:"min-h-[150px] active:ring-primary",value:A,onChange:e=>L(e.target.value)})]})}),(0,t.jsxs)(T.DialogFooter,{className:"gap-3",children:[(0,t.jsx)(T.DialogClose,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"outline",className:"h-12 rounded-xl flex-1 border-2",children:"Cancel"})}),(0,t.jsx)(l.Button,{onClick:ej,className:"h-12 rounded-xl flex-1",children:"Send Request"})]})]})]}),(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full h-14 rounded-2xl text-lg font-bold border-2 hover:bg-muted/50",onClick:()=>{if(!j){v({variant:"destructive",title:"Not Logged In",description:"You must be logged in to message a landlord."}),R.push("/auth/login");return}ei&&R.push(`/student/messages?contact=${ei.id}`)},children:[(0,t.jsx)(y.MessageSquare,{className:"mr-3 h-5 w-5"})," Message Host"]})]}),(0,t.jsxs)("div",{className:"space-y-4 pt-4 border-t border-border/50",children:[(0,t.jsx)("div",{className:"flex items-center justify-between text-sm font-bold uppercase tracking-widest text-muted-foreground/60",children:(0,t.jsx)("span",{children:"Landlord Stats"})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"Response Rate"}),(0,t.jsx)("span",{className:"font-bold",children:"100%"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"Response Time"}),(0,t.jsx)("span",{className:"font-bold",children:"Under 1hr"})]})]})]})]})]}),ei&&(0,t.jsxs)(n.Card,{className:"border-none bg-muted/30 rounded-[2rem] p-6 hover:bg-muted/40 transition-colors group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(o.Avatar,{className:"h-16 w-16 shadow-xl border-2 border-background group-hover:scale-105 transition-transform",children:[(0,t.jsx)(o.AvatarImage,{src:ei.profileImageUrl,className:"object-cover"}),(0,t.jsx)(o.AvatarFallback,{className:"bg-primary/10 text-primary text-xl font-bold",children:ei.name[0]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-primary mb-1",children:"Meet Your Host"}),(0,t.jsx)("h4",{className:"text-xl font-headline font-bold",children:ei.name}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,t.jsx)("a",{href:`mailto:${ei.email}`,className:"text-muted-foreground hover:text-primary",children:(0,t.jsx)(w.Mail,{className:"h-4 w-4"})}),ei.whatsappUrl&&(0,t.jsx)(I.default,{href:ei.whatsappUrl,target:"_blank",className:"text-muted-foreground hover:text-primary",children:(0,t.jsx)(U,{className:"h-4 w-4"})})]})]})]}),ei.bio&&(0,t.jsxs)("p",{className:"mt-4 text-sm text-muted-foreground line-clamp-3 font-medium leading-relaxed",children:['"',ei.bio,'"']})]})]})})]}),eg.length>0&&(0,t.jsxs)("div",{className:"mt-20 border-t pt-20",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Similar Properties"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Explore other homes."})]}),(0,t.jsx)(l.Button,{variant:"ghost",className:"text-primary font-bold gap-2",asChild:!0,children:(0,t.jsxs)(I.default,{href:"/student/properties",children:["View All ",(0,t.jsx)(D.ChevronLeft,{className:"h-4 w-4 rotate-180"})]})})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:eg.map(e=>(0,t.jsx)(S.default,{property:e},e.id))})]}),(0,t.jsx)(J.SharePropertyModal,{isOpen:M,onClose:()=>X(!1),propertyId:ea.id,propertyTitle:ea.title})]})]})}function Z({propertyId:r,userId:s,firestore:i,userProfile:n}){let[o,d]=(0,O.useState)(!1),[c,m]=(0,O.useState)(!1),[x,u]=(0,O.useState)(5),[p,h]=(0,O.useState)(""),{toast:g}=(0,q.useToast)();O.default.useEffect(()=>{s&&i&&(async()=>{let t=(0,$.query)((0,$.collection)(i,"leaseAgreements"),(0,$.where)("tenantId","==",s),(0,$.where)("propertyId","==",r)),{getDocs:a}=await e.A(27510);(await a(t)).empty||d(!0)})()},[s,r,i]);let b=async()=>{if(s&&n)try{await (0,$.addDoc)((0,$.collection)(i,"propertyReviews"),{propertyId:r,tenantId:s,tenantName:n.name,tenantImageUrl:n.profileImageUrl,rating:x,comment:p,reviewDate:new Date().toISOString()}),g({title:"Review Submitted!"}),m(!1)}catch(e){g({variant:"destructive",title:"Error",description:"Could not submit review."})}};return o?(0,t.jsxs)(T.Dialog,{open:c,onOpenChange:m,children:[(0,t.jsx)(T.DialogTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"outline",className:"rounded-xl border-primary text-primary hover:bg-primary hover:text-white font-bold h-10 px-6",children:"Leave a Review"})}),(0,t.jsxs)(T.DialogContent,{className:"sm:max-w-md rounded-[2.5rem]",children:[(0,t.jsx)(T.DialogHeader,{children:(0,t.jsx)(T.DialogTitle,{className:"text-2xl font-bold uppercase",children:"Rate your stay"})}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsx)("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(e=>(0,t.jsx)("button",{onClick:()=>u(e),className:(0,a.cn)("h-10 w-10 rounded-xl transition-all",x>=e?"bg-yellow-100 text-yellow-600 scale-110 shadow-lg":"bg-muted/30 text-muted/40 hover:bg-muted"),children:e},e))}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(H.Label,{className:"font-bold uppercase tracking-wider text-[10px] text-muted-foreground pl-1",children:"Your experience"}),(0,t.jsx)(z.Textarea,{placeholder:"What was it like living here?",className:"min-h-[120px] rounded-2xl bg-muted/20 border-border/50 focus:ring-primary p-4",value:p,onChange:e=>h(e.target.value)})]})]}),(0,t.jsx)(T.DialogFooter,{children:(0,t.jsx)(l.Button,{onClick:b,className:"w-full h-12 rounded-xl text-lg font-bold",children:"Post Review"})})]})]}):null}e.s(["default",()=>X],70094)}]);